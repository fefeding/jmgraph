!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).jmGraph={})}(this,function(t){"use strict";function v(t){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function u(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function h(t,e,i){return(h=s()?Reflect.construct:function(t,e,i){var n=[null];n.push.apply(n,e);n=new(Function.bind.apply(t,n));return i&&r(n,i.prototype),n}).apply(null,arguments)}function e(t){var i="function"==typeof Map?new Map:void 0;return function(t){if(null===t||-1===Function.toString.call(t).indexOf("[native code]"))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==i){if(i.has(t))return i.get(t);i.set(t,e)}function e(){return h(t,arguments,o(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r(e,t)}(t)}function l(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function f(i){var n=s();return function(){var t,e=o(i);return l(this,n?(t=o(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments))}}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function p(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(t){if("string"==typeof t)return d(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(i="Object"===i&&t.constructor?t.constructor.name:i)||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?d(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,e=function(){};return{s:e,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r=!0,s=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return r=t.done,t},e:function(t){s=!0,o=t},f:function(){try{r||null==i.return||i.return()}finally{if(s)throw o}}}}var y=function(){c(h,e(Array));var s=f(h);function h(){var t;a(this,h);for(var e=[],i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];if(n&&n.length&&Array.isArray(n[0])){for(var r=0;r<n[0].length;r++)e.push(n[0][r]);t=s.call.apply(s,[this].concat(e))}else t=s.call(this);return t.option={},t.type="jmList",l(t)}return u(h,[{key:"add",value:function(t){if(t&&Array.isArray(t)){for(var e=0;e<t.length;e++)this.includes(t[e])||this.push(t[e]);return t}return"object"==v(t)&&this.includes(t)||this.push(t),t}},{key:"remove",value:function(t){for(var e=this.length-1;0<=e;e--)this[e]==t&&this.removeAt(e)}},{key:"removeAt",value:function(t){var e;this.length>t&&(e=this[t],this.splice(t,1),this.option.removeHandler&&this.option.removeHandler.call(this,e,t))}},{key:"contain",value:function(t){return this.includes(t)}},{key:"get",value:function(t){return"function"==typeof t?this.find(t):this[t]}},{key:"each",value:function(t,e){if(t&&"function"==typeof t)if(e){for(var i=this.length-1;0<=i;i--)if(!1===t.call(this,i,this[i]))break}else for(var n=this.length,o=0;o<n;o++)if(!1===t.call(this,o,this[o]))break}},{key:"count",value:function(t){if(t&&"function"==typeof t){for(var e=0,i=this.length,n=0;n<i;n++)t(this[n])&&e++;return e}return this.length}},{key:"clear",value:function(){this.splice(0,this.length)}}]),h}(),m=function(){function t(){a(this,t)}return u(t,null,[{key:"clone",value:function(t,e){var i=2<arguments.length&&void 0!==arguments[2]&&arguments[2],n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0;if("function"==typeof n){var r=n(t,i,o);if(r)return r}if("boolean"==typeof e&&(i=e,e=void 0),100<++o)return e;if(t&&"object"===v(t)){if(e=e||{},this.isType(t,y))return new y(t);if(Array.isArray(t)){if(i){for(var s=[],h=0;h<t.length;h++)s.push(this.clone(t[h],e[h],i,n,o));return s}return t.slice(0)}for(var a in t.__proto__&&(e.__proto__=t.__proto__),t)"constructor"!==a&&("object"!==v(e[a])&&void 0!==e[a]||(e[a]=this.clone(t[a],e[a],i,n,o)));return e}return void 0!==e?e:t}},{key:"bindEvent",value:function(t,e,i,n){if(e&&e.indexOf&&-1!=e.indexOf(" "))for(var o=e.split(" "),r=0;r<o.length;r++)this.bindEvent(t,o[r],i,n);return t.attachEvent?t.attachEvent("on"+e,i,n):t.addEventListener&&t.addEventListener(e,i,n),{name:e,target:t,fun:i}}},{key:"removeEvent",value:function(t,e,i){return t.removeEventListener?t.removeEventListener(e,i,!1):t.detachEvent?(t.detachEvent("on"+e,i),!0):void(t["on"+e]=null)}},{key:"getElementPosition",value:function(t){var e={top:0,left:0};if(!t)return e;if(t.offsetParent)for(;t.offsetParent;)e.top+=t.offsetTop,e.left+=t.offsetLeft,t=t.offsetParent;else t.x?e.left+=t.x:t.x&&(e.top+=t.y);return e}},{key:"getEventPosition",value:function(t,e){var i=!1,n=(t=t||event).changedTouches||t.targetTouches||t.touches,o=t.target||t.srcElement;n&&((t=n[0]).target||(t.target=o),i=!0);var r=t.pageX||t.x;void 0===r&&(r=t.clientX+(document.documentElement.scrollLeft||document.body.scrollLeft));var s=t.pageY||t.y;void 0===s&&(s=t.clientY+(document.documentElement.scrollTop||document.body.scrollTop));var h=t.offsetX,a=t.offsetY;return void 0===h&&void 0===a&&(h=r-(o=this.getElementPosition(o)).left,a=s-o.top),e&&(e.x&&(h/=e.x),e.y&&(a/=e.y)),{pageX:r,pageY:s,clientX:t.clientX,clientY:t.clientY,offsetX:h,offsetY:a,layerX:t.layerX,layerY:t.layerY,screenX:t.screenX,screenY:t.screenY,x:h,y:a,isTouch:i,touches:n}}},{key:"isType",value:function(t,e){return!(!t||"object"!==v(t))&&t.constructor===e}},{key:"pointInPolygon",value:function(t,e,i){i=i||1,i/=2;var n,o,r=e.length,s=!1,h=!0;if(!e||0==r)return 0;if(1==r)return Math.abs(e[0].x-t.x)<=i&&Math.abs(e[0].y-t.y)<=i;if(2==r){if(Math.min(e[0].x,e[1].x)-t.x>i||t.x-Math.max(e[0].x,e[1].x)>i)return 0;if(Math.min(e[0].y,e[1].y)-t.y>i||t.y-Math.max(e[0].y,e[1].y)>i)return 0;if(e[0].x==e[1].x)return Math.abs(e[0].x-t.x)<=i&&(t.y-e[0].y)*(t.y-e[1].y)<=0?1:0;if(e[0].y==e[1].y)return Math.abs(e[0].y-t.y)<=i&&(t.x-e[0].x)*(t.x-e[1].x)<=0?1:0;if(Math.abs(e[0].x-t.x)<i&&Math.abs(e[0].y-t.y)<i)return 1;if(Math.abs(e[1].x-t.x)<i&&Math.abs(e[1].y-t.y)<i)return 1;if(t.y==e[0].y||t.y==e[1].y)return 0;var a=(e[1].x-e[0].x)/(e[1].y-e[0].y)*(t.y-e[0].y),a=(t.y-e[0].y)/Math.sqrt(a*a+(t.y-e[0].y)*(t.y-e[0].y))*(t.x-e[0].x-a);return Math.abs(a)<=i?1:0}for(n=0;n<r;++n)if(e[n].x==t.x&&e[n].y==t.y)return 1;for(;h;)for(s=h=!1,n=0,o=r-1;n<r;o=n++)if(e[n].y<t.y&&t.y<e[o].y||e[o].y<t.y&&t.y<e[n].y){if(t.x<=e[n].x||t.x<=e[o].x){var u=(t.y-e[n].y)*(e[o].x-e[n].x)/(e[o].y-e[n].y)+e[n].x;if(t.x<u)s=!s;else if(t.x==u)return 1}}else if(t.y==e[n].y){if(t.x<e[n].x){e[n].y>e[o].y?--t.y:++t.y,h=!0;break}}else if(e[n].y==e[o].y&&t.y==e[n].y&&(e[n].x<t.x&&t.x<e[o].x||e[o].x<t.x&&t.x<e[n].x)){s=!0;break}return s?2:0}},{key:"checkOutSide",value:function(t,e,i){var n={left:0,right:0,top:0,bottom:0};return i.x<0?n.left=e.left+i.x-t.left:0<i.x&&(n.right=e.right+i.x-t.right),i.y<0?n.top=e.top+i.y-t.top:0<i.y&&(n.bottom=e.bottom+i.y-t.bottom),n}},{key:"rotatePoints",value:function(t,e,i){if(!i||!t)return t;var n=Math.cos(i),o=Math.sin(i);if(t.length)for(var r,s,h=0;h<t.length;h++)t[h]&&(r=t[h].x-e.x,s=t[h].y-e.y,t[h].x=r*n-s*o+e.x,t[h].y=r*o+s*n+e.y);else{var a=t.x-e.x,i=t.y-e.y;t.x=a*n-i*o+e.x,t.y=a*o+i*n+e.y}return t}},{key:"trimStart",value:function(t,e){if(e=e||" ",t&&0<t.length){var i=t[0];if(i===e||0<=e.indexOf(i))return t=t.substring(1),this.trimStart(t,e)}return t}},{key:"trimEnd",value:function(t,e){if(e=e||" ",t&&0<t.length){var i=t[t.length-1];if(i===e||0<=e.indexOf(i))return t=t.substring(0,t.length-1),this.trimStart(t,e)}return t}},{key:"trim",value:function(t,e){return this.trimEnd(this.trimStart(t,e),e)}},{key:"checkPercent",value:function(t){if("string"==typeof t&&"%"==(t=this.trim(t))[t.length-1])return t}},{key:"percentToNumber",value:function(t){var e;return"string"!=typeof t||(e=this.checkPercent(t))&&(t=this.trim(e,"% "),t/=100),t}},{key:"hexToNumber",value:function(t){if("string"!=typeof t)return t;for(var e=0,i=(t=t.toLowerCase()).length,n=0;n<i;n++){var o="0123456789abcdef".indexOf(t[n]);if(0!=o){for(var r=1;r<i-n;r++)o*=16;e+=o}}return e}},{key:"numberToHex",value:function(t){for(var e="";0<t;){e="0123456789abcdef"[t%16]+e;t=Math.floor(t/16)}return e}},{key:"hexToRGBA",value:function(t){if("#"==(t=this.trim(t))[0]){var e={a:1};if(8<=t.length)return e.a=t.substr(1,2),e.g=t.substr(5,2),e.b=t.substr(7,2),e.r=t.substr(3,2),e.a=(this.hexToNumber(e.a)/255).toFixed(4),e.r=this.hexToNumber(e.r||0),e.g=this.hexToNumber(e.g||0),e.b=this.hexToNumber(e.b||0),e;if(7===t.length||4===t.length)return 4===t.length?(e.g=t.substr(2,1),e.g=e.g+e.g,e.b=t.substr(3,1),e.b=e.b+e.b,e.r=t.substr(1,1),e.r=e.r+e.r):(e.g=t.substr(3,2),e.b=t.substr(5,2),e.r=t.substr(1,2)),e.r=this.hexToNumber(e.r||0),e.g=this.hexToNumber(e.g||0),e.b=this.hexToNumber(e.b||0),e;if(5===t.length)return e.a=t.substr(1,1),e.g=t.substr(3,1),e.b=t.substr(4,1),e.r=t.substr(2,1),e.r=this.hexToNumber(e.r||0),e.g=this.hexToNumber(e.g||0),e.b=this.hexToNumber(e.b||0),e.a=(this.hexToNumber(e.a)/255).toFixed(4),e}return t}},{key:"toColor",value:function(t,e,i,n){if("string"==typeof t&&t){if("#"===(t=this.trim(t))[0]&&(4===t.length||7===t.length))return t;var o=this.hexToRGBA(t);if("string"==typeof o)return o;t=o.r||t,e=o.g||e,i=o.b||i,n=o.a||n}return void 0!==t&&void 0!==e&&void 0!==i?void 0!==n?"rgba("+t+","+e+","+i+","+n+")":"rgb("+t+","+e+","+i+")":t}}]),t}(),g=function(){function e(t){a(this,e),t&&"jmGraph"==t.type&&(this.graph=t)}return u(e,[{key:"is",value:function(t){return"string"==typeof t?this.type==t:this instanceof t}},{key:"animate",value:function(){if(this.is("jmGraph")){if(1<arguments.length){this.animateHandles||(this.animateHandles=new y);var t=[];if(2<arguments.length)for(var e=2;e<arguments.length;e++)t.push(e<0||arguments.length<=e?void 0:arguments[e]);this.animateHandles.add({millisec:(arguments.length<=1?void 0:arguments[1])||20,handle:arguments.length<=0?void 0:arguments[0],params:t})}var r;this.animateHandles&&0<this.animateHandles.count()&&((r=this).dispatcher=setTimeout(function(i){i=i||r;var t,n=[],o=(new Date).getTime();for(t in i.animateHandles.each(function(t,e){try{e&&e.handle&&(!e.times||o-e.times>=e.millisec)&&(!1===e.handle.apply(i,e.params)&&n.push(e),e.times=o)}catch(t){window.console&&window.console.info&&window.console.info(t.toString()),e&&n.push(e)}}),n)i.animateHandles.remove(n[t]);i.animate()},10,this))}else{var i=this.graph;i&&i.animate.apply(i,arguments)}}}]),e}(),b=Symbol("properties"),i=function(){c(i,g);var e=f(i);function i(){var t;return a(this,i),(t=e.call(this))[b]={},t}return u(i,[{key:"__pro",value:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];if(e){var n=this[b],o=e[0];if(1<e.length){var r=e[1],r={oldValue:n[o],newValue:r};return n[o]=e[1],this.emit&&this.emit("propertyChange",o,r),e[1]}if(1==e.length)return n[o]}}},{key:"needUpdate",get:function(){return this.__pro("needUpdate")},set:function(t){this.__pro("needUpdate",t),t&&!this.is("jmGraph")&&this.graph&&(this.graph.needUpdate=!0)}},{key:"graph",get:function(){return this.__pro("graph")||this.__pro("graph",this.findParent("jmGraph"))},set:function(t){return this.__pro("graph",t)}}]),i}(),x=function(){function o(t,e,i,n){a(this,o),"string"!=typeof t||e||i||n?(this.x=t,this.y=e,this.blur=i,this.color=n):this.fromString(t)}return u(o,[{key:"fromString",value:function(t){if(t){t=t.match(/\s*([^,]+)\s*,\s*([^,]+)\s*(,[^,]+)?\s*(,[\s\S]+)?\s*/i);return t&&(this.x=t[1]||0,this.y=t[2]||0,t[3]&&(t[3]=m.trim(t[3],", "),0===t[3].indexOf("#")||/^rgb/i.test(t[3])?this.color=t[3]:this.blur=m.trim(t[3],", ")),t[4]&&(this.color=m.trim(t[4],", "))),this}}},{key:"toString",value:function(){var t=this.x+","+this.y;return this.blur&&(t+=","+this.blur),this.color&&(t+=","+this.color),t}}]),o}(),w=function(){function i(t){if(a(this,i),this.stops=new y,t&&"object"==v(t))for(var e in t)this[e]=t[e];else"string"==typeof t&&this.fromString(t)}return u(i,[{key:"addStop",value:function(t,e){this.stops.add({offset:Number(t),color:e})}},{key:"toGradient",value:function(t){var n,e=t.context||t,i=t.absoluteBounds||t.getAbsoluteBounds(),o=this.x1||0,r=this.y1||0,s=this.x2,h=this.y2,a=t.getLocation(),t=0,t=(t=a.radius?2*a.radius:t)||Math.min(a.width,a.height);m.checkPercent(o)&&(o=m.percentToNumber(o)*(i.width||t)),m.checkPercent(s)&&(s=m.percentToNumber(s)*(i.width||t)),m.checkPercent(r)&&(r=m.percentToNumber(r)*(i.height||t)),m.checkPercent(h)&&(h=m.percentToNumber(h)*(i.height||t));a=Number(o)+i.left,o=Number(r)+i.top,r=Number(s)+i.left,s=Number(h)+i.top;return"linear"===this.type?n=e.createLinearGradient(a,o,r,s):"radial"===this.type&&(h=this.r1||0,i=this.r2,m.checkPercent(h)&&(h=m.percentToNumber(h),h*=t),m.checkPercent(i)&&(i=m.percentToNumber(i),i*=t),n=e.createCircularGradient?e.createCircularGradient(a,o,i):e.createRadialGradient(a,o,h,r,s,i)),this.stops.each(function(t,e){var i=m.toColor(e.color);n.addColorStop(e.offset,i)}),n}},{key:"fromString",value:function(t){if(t){var e=t.match(/(linear|radial)-gradient\s*\(\s*([^,]+)\s*,\s*((.|\s)+)\)/i);if(e&&!(e.length<3)){this.type=e[1].toLowerCase();t=m.trim(e[2]).split(/\s+/);"linear"==this.type?t.length<=2?(this.x2=t[0],this.y2=t[1]||0):(this.x1=t[0],this.y1=t[1],this.x2=t[2],this.y2=t[3]):t.length<=3?(this.x2=t[0],this.y2=t[1]||0,this.r2=t[2]||0):(this.x1=t[0],this.y1=t[1],this.r1=t[2],this.x2=t[3],this.y2=t[3],this.r2=t[3]);var i=e[3].match(/((rgb(a)?\s*\([\d,\.\s]+\))|(#[a-zA-Z\d]+))\s+([\d\.]+)/gi);if(i&&i.length)for(var n=0;n<i.length;n++){var o,r=m.trim(i[n]),s=r.lastIndexOf(" ");-1<s&&(o=Number(r.substr(s+1)),s=m.trim(r.substr(0,s)),!isNaN(o)&&s&&this.addStop(o,s))}}}}},{key:"toString",value:function(){var i=this.type+"-gradient(";return"linear"==this.type?i+=this.x1+" "+this.y1+" "+this.x2+" "+this.y2:i+=this.x1+" "+this.y1+" "+this.r1+" "+this.x2+" "+this.y2+" "+this.r2,this.stops.each(function(t,e){i+=","+e.color+" "+e.offset}),i+")"}}]),i}(),_=function(){function i(t,e){a(this,i),this.container=t,this.target=e||t,this.mouseHandler=new k(this,t,e),this.keyHandler=new E(this,t,e)}return u(i,[{key:"touchStart",value:function(t){if(t=t||window.event,this.container.raiseEvent("touchstart",t),(t.target||t.srcElement)==this.target)return!1}},{key:"touchMove",value:function(t){if(t=t||window.event,this.container.raiseEvent("touchmove",t),(t.target||t.srcElement)==this.target)return!1}},{key:"touchEnd",value:function(t){if(t=t||window.event,this.container.raiseEvent("touchend",t),(t.target||t.srcElement)==this.target)return!1}},{key:"touchCancel",value:function(t){if(t=t||window.event,this.container.raiseEvent("touchcancel",t),(t.target||t.srcElement)==this.target)return!1}},{key:"destory",value:function(){this.mouseHandler.destory(),this.keyHandler.destory()}}]),i}(),k=function(){function n(t,e,i){a(this,n),this.instance=t,this.container=e,this.target=i||e,this.eventEvents={},this.init(t,e,i)}return u(n,[{key:"init",value:function(e,i,t){var n=this.target,o=void 0!==("undefined"==typeof document?"undefined":v(document))?document:null;this.eventEvents.mousedown=m.bindEvent(this.target,"mousedown",function(t){t=t||window.event,i.raiseEvent("mousedown",t)}),this.eventEvents.mousedown=m.bindEvent(this.target,"mousemove",function(t){if(((t=t||window.event).target||t.srcElement)==n)return i.raiseEvent("mousemove",t),t.preventDefault&&t.preventDefault(),!1}),this.eventEvents.mousedown=m.bindEvent(this.target,"mouseover",function(t){t=t||window.event,i.raiseEvent("mouseover",t)}),this.eventEvents.mouseleave=m.bindEvent(this.target,"mouseleave",function(t){t=t||window.event,i.raiseEvent("mouseleave",t)}),this.eventEvents.mouseout=m.bindEvent(this.target,"mouseout",function(t){t=t||window.event,i.raiseEvent("mouseout",t)}),o&&(this.eventEvents.mouseup=m.bindEvent(o,"mouseup",function(t){if(t=t||window.event,!1===i.raiseEvent("mouseup",t))return t.preventDefault&&t.preventDefault(),!1})),this.eventEvents.dblclick=m.bindEvent(this.target,"dblclick",function(t){t=t||window.event,i.raiseEvent("dblclick",t)}),this.eventEvents.click=m.bindEvent(this.target,"click",function(t){t=t||window.event,i.raiseEvent("click",t)}),o&&(this.eventEvents.resize=m.bindEvent(o,"resize",function(t){return t=t||window.event,i.raiseEvent("resize",t)})),this.eventEvents.touchstart=m.bindEvent(this.target,"touchstart",function(t){return e.touchStart(t)},{passive:!1}),this.eventEvents.touchmove=m.bindEvent(this.target,"touchmove",function(t){return e.touchMove(t)},{passive:!1}),o&&(this.eventEvents.touchend=m.bindEvent(o,"touchend",function(t){return e.touchEnd(t)},{passive:!1})),o&&(this.eventEvents.touchcancel=m.bindEvent(o,"touchcancel",function(t){return e.touchCancel(t)},{passive:!1}))}},{key:"destory",value:function(){for(var t in this.eventEvents){var e=this.eventEvents[t];e&&e.fun&&m.removeEvent(e.target,t,e.fun)}}}]),n}(),E=function(){function n(t,e,i){a(this,n),this.instance=t,this.container=e,this.target=i||e,this.eventEvents={},this.init(e,i)}return u(n,[{key:"init",value:function(i,t){function n(t){return!(t=t.srcElement||t.target)||"INPUT"!=t.tagName&&"TEXTAREA"!=t.tagName&&"ANCHOR"!=t.tagName&&"FORM"!=t.tagName&&"FILE"!=t.tagName&&"IMG"!=t.tagName&&"HIDDEN"!=t.tagName&&"RADIO"!=t.tagName&&"TEXT"!=t.tagName}var e=void 0!==("undefined"==typeof document?"undefined":v(document))?document:null;e&&(this.eventEvents.touchcancel=m.bindEvent(e,"keypress",function(t){if(t=t||window.event,n(t)){var e=i.raiseEvent("keypress",t);return!1===e&&t.preventDefault&&t.preventDefault(),e}})),e&&(this.eventEvents.touchcancel=m.bindEvent(e,"keydown",function(t){if(t=t||window.event,n(t)){var e=i.raiseEvent("keydown",t);return!1===e&&t.preventDefault&&t.preventDefault(),e}})),e&&(this.eventEvents.touchcancel=m.bindEvent(e,"keyup",function(t){if(t=t||window.event,n(t)){var e=i.raiseEvent("keyup",t);return!1===e&&t.preventDefault&&t.preventDefault(),e}}))}},{key:"destory",value:function(){for(var t in this.eventEvents){var e=this.eventEvents[t];e&&e.fun&&m.removeEvent(e.target,t,e.fun)}}}]),n}(),S=function(){c(o,i);var n=f(o);function o(t,e){var i;return a(this,o),t=t||{},(i=n.call(this)).__pro("type",e||(this instanceof o?this.constructor:void 0).name),i.style=t&&t.style?t.style:{},i.width=t.width||0,i.height=t.height||0,t.position&&(i.position=t.position),i.graph=t.graph||null,i.zIndex=t.zIndex||0,i.interactive=void 0===t.interactive||t.interactive,i.jmStyleMap={fill:"fillStyle",stroke:"strokeStyle","shadow.blur":"shadowBlur","shadow.x":"shadowOffsetX","shadow.y":"shadowOffsetY","shadow.color":"shadowColor",lineWidth:"lineWidth",miterLimit:"miterLimit",fillStyle:"fillStyle",strokeStyle:"strokeStyle",font:"font",opacity:"globalAlpha",textAlign:"textAlign",textBaseline:"textBaseline",shadowBlur:"shadowBlur",shadowOffsetX:"shadowOffsetX",shadowOffsetY:"shadowOffsetY",shadowColor:"shadowColor",lineJoin:"lineJoin",lineCap:"lineCap"},i.initializing(),i.on=i.bind,i.option=t,i}return u(o,[{key:"type",get:function(){return this.__pro("type")}},{key:"context",get:function(){var t=this.__pro("context");if(t)return t;if(this.is("jmGraph")&&this.canvas)return this.context=this.canvas.getContext("2d");t=this.graph;return t?t.context:t.canvas.getContext("2d")},set:function(t){return this.__pro("context",t)}},{key:"style",get:function(){return this.__pro("style")||this.__pro("style",{})},set:function(t){return this.needUpdate=!0,this.__pro("style",t)}},{key:"visible",get:function(){var t=this.__pro("visible");return t=void 0===t?this.__pro("visible",!0):t},set:function(t){return this.needUpdate=!0,this.__pro("visible",t)}},{key:"interactive",get:function(){return this.__pro("interactive")},set:function(t){return this.__pro("interactive",t)}},{key:"children",get:function(){return this.__pro("children")||this.__pro("children",new y)},set:function(t){return this.needUpdate=!0,this.__pro("children",t)}},{key:"width",get:function(){var t=this.__pro("width");return t=void 0===t?this.__pro("width",0):t},set:function(t){return this.needUpdate=!0,this.__pro("width",t)}},{key:"height",get:function(){var t=this.__pro("height");return t=void 0===t?this.__pro("height",0):t},set:function(t){return this.needUpdate=!0,this.__pro("height",t)}},{key:"zIndex",get:function(){return this.__pro("zIndex")||this.__pro("zIndex",0)},set:function(t){return this.needUpdate=!0,this.__pro("zIndex",t),this.children.sort(),this.needUpdate=!0,t}},{key:"cursor",get:function(){var t=this.graph;if(t)return t.css("cursor")},set:function(t){var e=this.graph;e&&e.css("cursor",t)}},{key:"initializing",value:function(){var e=this;this.children=this.children||new y;var i=this.children.add;this.children.add=function(t){if("object"===v(t))return t.parent&&t.parent!=e&&t.parent.children&&t.parent.children.remove(t),t.parent=e,this.contain(t)&&this.oremove(t),i.call(this,t),t.emit("add",t),e.needUpdate=!0,e.graph&&(t.graph=e.graph),this.sort(),t},this.children.oremove=this.children.remove,this.children.remove=function(t){"object"===v(t)&&(t.parent=null,t.graph=null,t.remove(!0),this.oremove(t),e.needUpdate=!0)},this.children.sort=function(){var t,n={};for(t in this.each(function(t,e){var i;e&&(!(i=e.zIndex)&&e.style&&e.style.zIndex&&(i=Number(e.style.zIndex),isNaN(i)&&(i=e.style.zIndex||0)),(n[i]||(n[i]=[])).push(e))}),this.splice(0,this.length),n)i.call(this,n[t])},this.children.clear=function(){this.each(function(t,e){this.remove(e)},!0)},this.needUpdate=!0}},{key:"setStyle",value:function(t){var l=this;if(t=t||m.clone(this.style,!0)){var e,i,f=this.graph.devicePixelRatio,n=function t(e,i,n){if(e){if("function"==typeof e)try{e=e.call(l)}catch(t){return void console.warn(t)}var o=v(e),n=l.jmStyleMap[n||i];if(e instanceof w||"string"==o&&-1<e.indexOf("-gradient"))t((e="string"==o&&-1<e.indexOf("-gradient")?new w(e):e).toGradient(l),n||i);else if("function"==o)n&&(e=e.call(l,n))&&t(e,n);else if(n){if("string"==o&&-1<["fillStyle","strokeStyle","shadowColor"].indexOf(n)&&(e=m.toColor(e)),f&&e)switch(n){case"lineWidth":e*=f;break;case"fontSize":case"font":var r,s=e.toString().match(/[\d\.]+/);s&&s.length&&(r=Number(s[0])*f,e=e.toString().replace(s[0],r))}l.context[n]=e}else switch(i){case"shadow":if("string"==o){t(new x(e),i);break}for(var h in e)t(e[h],h,i+"."+h);break;case"translate":l.context.translate(e.x,e.y);break;case"rotation":if(!e.angle)break;var a,u=0,c=0;e.point&&(a=l.absoluteBounds||l.getAbsoluteBounds(),u=(e=l.getRotation(e)).rotateX+a.left,c=e.rotateY+a.top),0==u&&0==c||l.context.translate(u,c),l.context.rotate(e.angle),0==u&&0==c||l.context.translate(-u,-c);break;case"transform":Array.isArray(e)?l.context.transform.apply(l.context,e):"object"==v(e)&&l.context.transform(e.scaleX,e.skewX,e.skewY,e.scaleY,e.offsetX,e.offsetY);break;case"cursor":l.cursor=e}}};for(e in this.translate&&n(this.translate,"translate"),this.transform&&n(this.transform,"transform"),t)"constructor"!==e&&("string"==(i=v(t[e]))&&-1<t[e].indexOf("-gradient")?t[e]=new w(t[e]):"string"==i&&"shadow"==e&&(t[e]=new x(t[e])),n(t[e],e))}}},{key:"getBounds",value:function(t){if(this.bounds&&!t)return this.bounds;var e={};if("jmGraph"==this.type&&this.canvas)"function"==typeof this.canvas.width?e.right=this.canvas.width():this.canvas.width?e.right=this.canvas.width:this.width&&(e.right=this.width),"function"==typeof this.canvas.height?e.bottom=this.canvas.height():this.canvas.height?e.bottom=this.canvas.height:this.height&&(e.bottom=this.height);else if(this.points&&0<this.points.length)for(var i in this.points){i=this.points[i];(void 0===e.left||e.left>i.x)&&(e.left=i.x),(void 0===e.top||e.top>i.y)&&(e.top=i.y),(void 0===e.right||e.right<i.x)&&(e.right=i.x),(void 0===e.bottom||e.bottom<i.y)&&(e.bottom=i.y)}else!this.getLocation||(t=this.getLocation())&&(e.left=t.left,e.top=t.top,e.right=t.left+t.width,e.bottom=t.top+t.height);return e.left||(e.left=0),e.top||(e.top=0),e.right||(e.right=0),e.bottom||(e.bottom=0),e.width=e.right-e.left,e.height=e.bottom-e.top,this.bounds=e}},{key:"getLocation",value:function(){var t=this.location={left:0,top:0,width:0,height:0};t.position="function"==typeof this.position?this.position():m.clone(this.position),t.center=this.center&&"function"==typeof this.center?this.center():m.clone(this.center),t.start=this.start&&"function"==typeof this.start?this.start():m.clone(this.start),t.end=this.end&&"function"==typeof this.end?this.end():m.clone(this.end),t.radius=this.radius,t.width=this.width,t.height=this.height;var e=m.clone(this.style.margin,{});if(e.left=(e.left||0)*this.graph.devicePixelRatio,e.top=(e.top||0)*this.graph.devicePixelRatio,e.right=(e.right||0)*this.graph.devicePixelRatio,e.bottom=(e.bottom||0)*this.graph.devicePixelRatio,t.position?(t.left=t.position.x,t.top=t.position.y):(t.left=e.left,t.top=e.top),!this.parent)return t;e=this.parent.getBounds();return m.checkPercent(t.left)&&(t.left=m.percentToNumber(t.left)*e.width),m.checkPercent(t.top)&&(t.top=m.percentToNumber(t.top)*e.height),m.checkPercent(t.width)&&(t.width=m.percentToNumber(t.width)*e.width),m.checkPercent(t.height)&&(t.height=m.percentToNumber(t.height)*e.height),t.center&&(m.checkPercent(t.center.x)&&(t.center.x=m.percentToNumber(t.center.x)*e.width),m.checkPercent(t.center.y)&&(t.center.y=m.percentToNumber(t.center.y)*e.height)),t.radius&&m.checkPercent(t.radius)&&(t.radius=m.percentToNumber(t.radius)*Math.min(e.width,e.height)),t}},{key:"getRotation",value:function(t){var e;return(t=t||this.style.rotation)?(e=this.getBounds(),t.rotateX=t.point.x,m.checkPercent(t.rotateX)&&(t.rotateX=m.percentToNumber(t.rotateX)*e.width),t.rotateY=t.point.y,m.checkPercent(t.rotateY)&&(t.rotateY=m.percentToNumber(t.rotateY)*e.height)):(t=this.parent&&this.parent.getRotation?this.parent.getRotation():null)&&(e=this.getBounds(),t.rotateX-=e.left,t.rotateY-=e.top),t}},{key:"remove",value:function(){this.parent&&this.parent.children.remove(this)}},{key:"offset",value:function(t,e,i,n){i=!1!==i;var o=this.getLocation(!0),r=!1;if(o.position&&(o.left+=t,o.top+=e,this.position.x=o.left,this.position.y=o.top,r=!0),o.center&&(this.center.x=o.center.x+t,this.center.y=o.center.y+e,r=!0),o.start&&"object"==v(o.start)&&(this.start.x=o.start.x+t,this.start.y=o.start.y+e,r=!0),o.end&&"object"==v(o.end)&&(this.end.x=o.end.x+t,this.end.y=o.end.y+e,r=!0),0==r&&this.cpoints){var s=(this.cpoints,this.cpoints);if(s){for(var h=s.length,a=0;a<h;a++)s[a].x+=t,s[a].y+=e;r=!0}}if(0==r&&this.points){for(var u=this.points.length,c=0;c<u;c++)this.points[c].x+=t,this.points[c].y+=e;r=!0}this.emit("move",{offsetX:t,offsetY:e,trans:i,evt:n}),this.needUpdate=!0}},{key:"rotate",value:function(t,e){this.style.rotation={angle:t,point:e},this.needUpdate=!0}},{key:"getAbsoluteBounds",value:function(){var t=this.getBounds();if(this.parent&&this.parent.absoluteBounds){var e=this.parent.absoluteBounds||this.parent.getAbsoluteBounds();return{left:e.left+t.left,top:e.top+t.top,right:e.left+t.right,bottom:e.top+t.bottom,width:t.width,height:t.height}}return t}},{key:"beginDraw",value:function(){this.getLocation(!0),this.context.beginPath()}},{key:"endDraw",value:function(){this.style.close&&this.context.closePath(),this.style.fill&&this.context.fill(),!this.style.stroke&&this.style.fill||this.context.stroke(),this.needUpdate=!1}},{key:"draw",value:function(){if(this.points&&0<this.points.length){var t=(this.parent&&this.parent.absoluteBounds?this.parent:this).absoluteBounds;this.context.moveTo(this.points[0].x+t.left,this.points[0].y+t.top);for(var e=this.points.length,i=1;i<e;i++){var n=this.points[i];n.m?this.context.moveTo(n.x+t.left,n.y+t.top):this.context.lineTo(n.x+t.left,n.y+t.top)}}}},{key:"paint",value:function(t){!1!==t&&!1!==this.visible&&(this.initPoints&&this.initPoints(),this.bounds=null,this.absoluteBounds=this.getAbsoluteBounds(),t=!0,!this.is("jmGraph")&&this.graph&&(this.absoluteBounds.left>=this.graph.width||this.absoluteBounds.top>=this.graph.height||this.absoluteBounds.right<=0||this.absoluteBounds.bottom<=0)&&(t=!1),this.context.save(),this.emit("beginDraw",this),this.setStyle(),t&&this.beginDraw&&this.beginDraw(),t&&this.draw&&this.draw(),t&&this.endDraw&&this.endDraw(),this.children&&this.children.each(function(t,e){e&&e.paint&&e.paint()}),this.emit("endDraw",this),this.context.restore(),this.is("jmGraph")&&this.context.draw&&this.context.draw(),this.needUpdate=!1)}},{key:"getEvent",value:function(t){return this.__events?this.__events[t]:null}},{key:"bind",value:function(t,e){if(t&&-1<t.indexOf(" ")){var i,n=p(t=t.split(" "));try{for(n.s();!(i=n.n()).done;){var o=i.value;o&&this.bind(o,e)}}catch(t){n.e(t)}finally{n.f()}}else{t=this.getEvent(t)||function(t,e){return this.__events||(this.__events={}),this.__events[t]=e}.call(this,t,new y);t.contain(e)||t.add(e)}}},{key:"unbind",value:function(t,e){if(t&&-1<t.indexOf(" ")){var i,n=p(t=t.split(" "));try{for(n.s();!(i=n.n()).done;){var o=i.value;o&&this.unbind(o,e)}}catch(t){n.e(t)}finally{n.f()}}else{t=this.getEvent(t);t&&(e?t.remove(e):t.clear())}}},{key:"emit",value:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this.runEventHandle(e[0],e.slice(1)),this}},{key:"runEventHandle",value:function(t,i){var n,t=this.getEvent(t);return t&&(n=this,Array.isArray(i)||(i=[i]),t.each(function(t,e){!1===e.apply(n,i)&&(i.cancel=!0)})),i.cancel}},{key:"checkPoint",value:function(t,e){if("jmGraph"==this.type){var i=this.getPosition(),n=i.left+(this.canvas.clientWidth||this.canvas.offsetWidth||this.canvas.width),o=i.top+(this.canvas.clientHeight||this.canvas.offsetHeight||this.canvas.height);return t.pageX>n||t.pageX<i.left?!1:!(t.pageY>o||t.pageY<i.top)}var o=this.getBounds(),i=this.getRotation(),r=this.points;if(r&&r.length||((r=[]).push({x:o.left,y:o.top}),r.push({x:o.right,y:o.top}),r.push({x:o.right,y:o.bottom}),r.push({x:o.left,y:o.bottom}),r.push({x:o.left,y:o.top})),e=Number(e||this.style.touchPadding||this.style.lineWidth||1),r&&r.length){if(i&&0!=i.angle&&(r=m.clone(r,!0),r=m.rotatePoints(r,{x:i.rotateX+o.left,y:i.rotateY+o.top},i.angle)),2<r.length&&(!this.style.fill||this.style.stroke)){for(var s=0,h=r.length,a=s+1;a<=h;a=++s+1)if(a==h){if(this.style.close)if(m.pointInPolygon(t,[r[s],r[0]],e))return!0}else if(m.pointInPolygon(t,[r[s],r[a]],e))return!0;if(!this.style.fill)return!1}return m.pointInPolygon(t,r,e)}return!(t.x>o.right||t.x<o.left)&&!(t.y>o.bottom||t.y<o.top)}},{key:"raiseEvent",value:function(i,n){if(!1!==this.visible){var t,e;n.position||(t=this.graph,r=n.srcElement||n.target,e=m.getEventPosition(n,t.scaleSize),0<t.devicePixelRatio&&(e.x=e.offsetX=e.x*devicePixelRatio,e.y=e.offsetY=e.y*devicePixelRatio),n={position:e,button:0==n.button||e.isTouch?1:n.button,keyCode:n.keyCode||n.charCode||n.which,ctrlKey:n.ctrlKey,cancel:!1,event:n,srcElement:r}),n.path=n.path||[];var o=!1;if(this.children&&this.children.each(function(t,e){if(!0!==n.cancel&&(o=!1===e.raiseEvent(i,n)||o))return!1},!0),o)return!1;var r=(this.parent&&this.parent.absoluteBounds?this.parent:this).absoluteBounds;if(!r)return!1;n.position.x=n.position.offsetX-r.left,n.position.y=n.position.offsetY-r.top;r=!1!==this.interactive&&this.checkPoint(n.position);return r?(n.target||(n.target=this),this.runEventAndPopEvent(i,n),this.focused||"mousemove"!==i&&"touchmove"!==i||(this.focused=!0,this.raiseEvent("mousemove"===i?"mouseover":"touchover",n))):!1===this.interactive||r||!this.focused||"mousemove"!==i&&"touchmove"!==i||(this.focused=!1,this.runEventHandle("mousemove"===i?"mouseleave":"touchleave",n)),!1===n.cancel}}},{key:"runEventAndPopEvent",value:function(t,e){!0!==e.cancel&&(e.path.push(this),this.runEventHandle(t,e))}},{key:"clearEvents",value:function(t){t=this.getEvent(t);t&&t.clear}},{key:"findParent",value:function(t){if("string"==typeof t){if(this.type==t)return this}else if(this.is(t))return this;return this.parent?this.parent.findParent(t):null}},{key:"canMove",value:function(t,e){var s;return this.__mvMonitor||(this.__mvMonitor={},this.__mvMonitor.mouseDown=!1,this.__mvMonitor.curposition={x:0,y:0},(s=this).__mvMonitor.mv=function(t){var e=s;if(e.__mvMonitor.mouseDown){e.parent.bounds=null;var i,n=e.parent.getAbsoluteBounds(),o=t.position.offsetX-e.__mvMonitor.curposition.x,r=t.position.offsetY-e.__mvMonitor.curposition.y;return e.lockSide&&(i=e.bounds||e.getAbsoluteBounds(),(i=m.checkOutSide(n,i,{x:o,y:r})).left<0?e.lockSide.left&&(o-=i.left):0<i.right&&e.lockSide.right&&(o-=i.right),i.top<0?e.lockSide.top&&(r-=i.top):0<i.bottom&&e.lockSide.bottom&&(r-=i.bottom)),(o||r)&&(e.offset(o,r,!0,t),e.__mvMonitor.curposition.x=t.position.offsetX,e.__mvMonitor.curposition.y=t.position.offsetY),!1}},this.__mvMonitor.mu=function(t){var e=s;e.__mvMonitor.mouseDown&&(e.__mvMonitor.mouseDown=!1,e.emit("moveend",{position:e.__mvMonitor.curposition}))},this.__mvMonitor.ml=function(){var t=s;if(t.__mvMonitor.mouseDown)return t.__mvMonitor.mouseDown=!1,t.emit("moveend",{position:t.__mvMonitor.curposition}),!1},this.__mvMonitor.md=function(t){if(!this.__mvMonitor.mouseDown)return 0==t.button||1==t.button?(this.__mvMonitor.mouseDown=!0,this.__mvMonitor.curposition.x=t.position.offsetX,this.__mvMonitor.curposition.y=t.position.offsetY,this.emit("movestart",{position:this.__mvMonitor.curposition}),!(t.cancel=!0)):void 0}),e=e||this.graph,!1!==t?(e.bind("mousemove",this.__mvMonitor.mv),e.bind("mouseup",this.__mvMonitor.mu),e.bind("mouseleave",this.__mvMonitor.ml),this.bind("mousedown",this.__mvMonitor.md),e.bind("touchmove",this.__mvMonitor.mv),e.bind("touchend",this.__mvMonitor.mu),this.bind("touchstart",this.__mvMonitor.md)):(e.unbind("mousemove",this.__mvMonitor.mv),e.unbind("mouseup",this.__mvMonitor.mu),e.unbind("mouseleave",this.__mvMonitor.ml),this.unbind("mousedown",this.__mvMonitor.md),e.unbind("touchmove",this.__mvMonitor.mv),e.unbind("touchend",this.__mvMonitor.mu),this.unbind("touchstart",this.__mvMonitor.md)),this}}]),o}(),P=function(){c(n,S);var i=f(n);function n(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"jmPath";return a(this,n),(e=i.call(this,t,e)).points=t&&t.points?t.points:[],e}return u(n,[{key:"points",get:function(){return this.__pro("points")},set:function(t){return this.needUpdate=!0,this.__pro("points",t)}}]),n}(),M=function(){c(r,S);var o=f(r);function r(t,e,i){var n;return a(this,r),"function"==typeof e&&(i=e,e={}),(e=e||{}).interactive=!0,(n=o.call(this,e,"jmGraph")).option=e||{},n.devicePixelRatio=1,n.util=n.utils=m,"undefined"!=typeof wx&&wx.createCanvasContext?(n.context=wx.createCanvasContext(t),t=wx.createSelectorQuery().select("#"+t)):("string"==typeof t&&"undefined"!=typeof document?t=document.getElementById(t):t.length&&(t=t[0]),"CANVAS"!=t.tagName?(n.container=t,e=document.createElement("canvas"),t.appendChild(e),e.width=t.offsetWidth||t.clientWidth,e.height=t.offsetHeight||t.clientHeight,t=e):n.container=t.parentElement,n.context=t.getContext("2d")),n.canvas=t,n.__init(i),n}return u(r,[{key:"__init",value:function(t){this.shapes=Object.assign({path:P},this.option.shapes),this.on("beginDraw",function(){this.context.translate(.5,.5)}),this.on("endDraw",function(){this.context.translate(-.5,-.5)}),0<this.option.width&&(this.width=this.option.width),0<this.option.height&&(this.height=this.option.height),this.resize(),this.eventHandler=new _(this,this.canvas.canvas||this.canvas),this.option.autoRefresh&&this.autoRefresh(),t&&t(this)}},{key:"resize",value:function(t,e){var i="undefined"!=typeof window&&1<window.devicePixelRatio?window.devicePixelRatio:1;1<i&&(this.__normalSize=this.__normalSize||{width:0,height:0},t=t||this.__normalSize.width||this.width,e=e||this.__normalSize.height||this.height,t&&(this.__normalSize.width=t),e&&(this.__normalSize.height=e),this.canvas.style.width=t+"px",this.canvas.style.height=e+"px",this.canvas.height=e*i,this.canvas.width=t*i,this.context.scale(i,i),this.devicePixelRatio=i)}},{key:"pointToPixes",value:function(t){return t=this.devicePixelRatio&&1!==this.devicePixelRatio?Object.assign({},t,{x:t.x/this.devicePixelRatio,y:t.y/this.devicePixelRatio}):t}},{key:"width",get:function(){return this.canvas?this.canvas.width:0},set:function(t){return this.needUpdate=!0,this.canvas&&(this.canvas.width=t,this.resize(t)),t}},{key:"height",get:function(){return this.canvas?this.canvas.height:0},set:function(t){return this.needUpdate=!0,this.canvas&&(this.canvas.height=t,this.resize(0,t)),t}},{key:"getPosition",value:function(){var t=m.getElementPosition(this.canvas.canvas||this.canvas);return t.width=this.canvas.width,t.height=this.canvas.height,t.right=t.left+t.width,t.bottom=t.top+t.height,t}},{key:"registerShape",value:function(t,e){this.shapes[t]=e}},{key:"createShape",value:function(t,e){if(t="string"==typeof t?this.shapes[t]:t)return(e=e||{}).graph=this,new t(e)}},{key:"createShadow",value:function(t,e,i,n){return new x(t,e,i,n)}},{key:"createLinearGradient",value:function(t,e,i,n){return new w({type:"linear",x1:t,y1:e,x2:i,y2:n})}},{key:"createRadialGradient",value:function(t,e,i,n,o,r){return new w({type:"radial",x1:t,y1:e,r1:i,x2:n,y2:o,r2:r})}},{key:"refresh",value:function(){this.redraw()}},{key:"redraw",value:function(t,e){this.clear(t||this.width,e||this.height),this.paint()}},{key:"clear",value:function(t,e){t&&e?(this.canvas.width=t,this.canvas.height=e,this.scaleSize&&this.context.scale&&this.context.scale(this.scaleSize.x,this.scaleSize.y)):(t=this.canvas.width,e=this.canvas.height,this.scaleSize&&(t/=this.scaleSize.x,e/=this.scaleSize.y)),this.style&&this.style.fill?this.points=[{x:0,y:0},{x:t,y:0},{x:t,y:e},{x:0,y:e}]:this.context.clearRect&&this.context.clearRect(0,0,t,e)}},{key:"css",value:function(t,e){if(this.canvas)return void 0!==e&&(this.canvas.style[t]=e),this.canvas.style[t]}},{key:"createPath",value:function(t,e){return this.createShape("path",{points:t,style:e})}},{key:"createLine",value:function(t,e,i){return this.createShape("line",{start:t,end:e,style:i})}},{key:"zoomOut",value:function(){this.scale(.9,.9)}},{key:"zoomIn",value:function(){this.scale(1.1,1.1)}},{key:"zoomActual",value:function(){this.scaleSize?this.scale(1/this.scaleSize.x,1/this.scaleSize.y):this.scale(1,1)}},{key:"scale",value:function(t,e){this.normalSize||(this.normalSize={width:this.canvas.width,height:this.canvas.height}),this.context.scale(t,e),this.scaleSize?this.scaleSize={x:t*this.scaleSize.x,y:e*this.scaleSize.y}:this.scaleSize={x:t,y:e},this.refresh()}},{key:"toDataURL",value:function(){return this.canvas.toDataURL?this.canvas.toDataURL():""}},{key:"autoRefresh",value:function(e){if(!this.___isAutoRefreshing){var i=this;return this.___isAutoRefreshing=!0,requestAnimationFrame(function t(){i.destoryed?i.___isAutoRefreshing=!1:(i.needUpdate&&i.redraw(),requestAnimationFrame(t),e&&e())}),this}}},{key:"destory",value:function(){this.eventHandler.destory(),this.destoryed=!0}}],[{key:"create",value:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return h(r,e)}}]),r}();t.default=M,t.jmControl=S,t.jmEvents=_,t.jmGradient=w,t.jmGraph=M,t.jmList=y,t.jmPath=P,t.jmProperty=i,t.jmShadow=x,t.jmUtils=m,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=jmgraph.core.min.js.map
