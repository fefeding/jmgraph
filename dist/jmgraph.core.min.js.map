{"version":3,"file":"jmgraph.core.min.js","sources":["../src/core/jmList.js","../src/core/jmUtils.js","../src/core/jmObject.js","../src/core/jmProperty.js","../src/core/jmShadow.js","../src/core/jmGradient.js","../src/core/jmEvents.js","../src/lib/earcut.js","../src/lib/webgl/gradient.js","../src/lib/webgl/core/shader.js","../src/lib/webgl/core/mapSize.js","../src/lib/webgl/core/mapType.js","../src/lib/webgl/core/program.js","../src/lib/webgl/core/buffer.js","../src/lib/webgl/core/texture.js","../src/lib/webgl/base.js","../src/lib/webgl/path.js","../src/core/jmControl.js","../src/core/jmPath.js","../src/core/jmGraph.js"],"sourcesContent":["export default class jmList extends Array {\n    constructor(...arg) {\n        const ps = [];\n        if(arg && arg.length && Array.isArray(arg[0])) {\n            for(let i=0; i< arg[0].length; i++) ps.push(arg[0][i]);\n            super(...ps);\n        }\n        else {\n            super();\n        }\n        this.option = {};\n        this.type = 'jmList';\n    }\n\n    add(obj) {\n        if(obj && Array.isArray(obj)) {\n            for(let i=0; i < obj.length; i++) {\n                if(!this.includes(obj[i])) this.push(obj[i]);\n            }\n            return obj;\n        }\n        if(typeof obj == 'object' && this.includes(obj)) return obj;\n        this.push(obj);\n        return obj;\n    }\n\n    remove(obj) {\n        for(let i = this.length -1; i>=0; i--) {\n            if(this[i] == obj) {\n                this.removeAt(i);\n            }\n        }\n    }\n\n    removeAt(index) {\n        if(this.length > index) {\n            const obj = this[index];\n            this.splice(index,1);\n            if(this.option.removeHandler) this.option.removeHandler.call(this, obj, index);\n        }\n    }\n\n    contain(obj) {\n        return this.includes(obj);\n    }\n\n    get(index) {\n        if(typeof index == 'function') {\n            return this.find(index);\n        }\n        else {\n            return this[index];\n        }\n    }\n\n    each(cb, inverse) {\n        if(cb && typeof cb == 'function') {\n            if(inverse) {\n                for(let i = this.length - 1;i>=0; i--) {\n                    const r = cb.call(this, i, this[i]);\n                    if(r === false) break;\n                }\n            }\n            else {\n                const len = this.length;\n                for(let i = 0; i < len;i++) {\n                    const r = cb.call(this, i, this[i]);\n                    if(r === false) break;\n                }\n            }\n        }\n    }\n\n    count(handler) {\n        if(handler && typeof handler == 'function') {\n            let count = 0;\n            const len = this.length;\n            for(let i = 0; i<len;i++) {\n                if(handler(this[i])) {\n                    count++;\n                }\n            }\n            return count;\n        }\n        return this.length;\n    }\n\n    clear() {\n        this.splice(0, this.length);\n    }\n}\n\nexport { jmList };","\nimport { jmList } from './jmList.js';\n\nconst colorKeywords = {\n    aliceblue:            \"#f0f8ff\",\n    antiquewhite:         \"#faebd7\",\n    aqua:                 \"#00ffff\",\n    aquamarine:           \"#7fffd4\",\n    azure:                \"#f0ffff\",\n    beige:                \"#f5f5dc\",\n    bisque:               \"#ffe4c4\",\n    black:                \"#000000\",\n    blanchedalmond:       \"#ffebcd\",\n    blue:                 \"#0000ff\",\n    blueviolet:           \"#8a2be2\",\n    brown:                \"#a52a2a\",\n    burlywood:            \"#deb887\",\n    cadetblue:            \"#5f9ea0\",\n    chartreuse:           \"#7fff00\",\n    chocolate:            \"#d2691e\",\n    coral:                \"#ff7f50\",\n    cornflowerblue:       \"#6495ed\",\n    cornsilk:             \"#fff8dc\",\n    crimson:              \"#dc143c\",\n    cyan:                 \"#00ffff\",\n    darkblue:             \"#00008b\",\n    darkcyan:             \"#008b8b\",\n    darkgoldenrod:        \"#b8860b\",\n    darkgray:             \"#a9a9a9\",\n    darkgreen:            \"#006400\",\n    darkkhaki:            \"#bdb76b\",\n    darkmagenta:          \"#8b008b\",\n    darkolivegreen:       \"#556b2f\",\n    darkorange:           \"#ff8c00\",\n    darkorchid:           \"#9932cc\",\n    darkred:              \"#8b0000\",\n    darksalmon:           \"#e9967a\",\n    darkseagreen:         \"#8fbc8f\",\n    darkslateblue:        \"#483d8b\",\n    darkslategray:        \"#2f4f4f\",\n    darkturquoise:        \"#00ced1\",\n    darkviolet:           \"#9400d3\",\n    deeppink:             \"#ff1493\",\n    deepskyblue:          \"#00bfff\",\n    dimgray:              \"#696969\",\n    dodgerblue:           \"#1e90ff\",\n    firebrick:            \"#b22222\",\n    floralwhite:          \"#fffaf0\",\n    forestgreen:          \"#228b22\",\n    fuchsia:              \"#ff00ff\",\n    gainsboro:            \"#dcdcdc\",\n    ghostwhite:           \"#f8f8ff\",\n    gold:                 \"#ffd700\",\n    goldenrod:            \"#daa520\",\n    gray:                 \"#808080\",\n    green:                \"#008000\",\n    greenyellow:          \"#adff2f\",\n    grey:                 \"#808080\",\n    honeydew:             \"#f0fff0\",\n    hotpink:              \"#ff69b4\",\n    indianred:            \"#cd5c5c\",\n    indigo:               \"#4b0082\",\n    ivory:                \"#fffff0\",\n    khaki:                \"#f0e68c\",\n    lavender:             \"#e6e6fa\",\n    lavenderblush:        \"#fff0f5\",\n    lawngreen:            \"#7cfc00\",\n    lemonchiffon:         \"#fffacd\",\n    lightblue:            \"#add8e6\",\n    lightcoral:           \"#f08080\",\n    lightcyan:            \"#e0ffff\",\n    lightgoldenrodyellow: \"#fafad2\",\n    lightgrey:            \"#d3d3d3\",\n    lightgreen:           \"#90ee90\",\n    lightpink:            \"#ffb6c1\",\n    lightsalmon:          \"#ffa07a\",\n    lightseagreen:        \"#20b2aa\",\n    lightskyblue:         \"#87cefa\",\n    lightslategray:       \"#778899\",\n    lightsteelblue:       \"#b0c4de\",\n    lightyellow:          \"#ffffe0\",\n    lime:                 \"#00ff00\",\n    limegreen:            \"#32cd32\",\n    linen:                \"#faf0e6\",\n    magenta:              \"#ff00ff\",\n    maroon:               \"#800000\",\n    mediumaquamarine:     \"#66cdaa\",\n    mediumblue:           \"#0000cd\",\n    mediumorchid:         \"#ba55d3\",\n    mediumpurple:         \"#9370d8\",\n    mediumseagreen:       \"#3cb371\",\n    mediumslateblue:      \"#7b68ee\",\n    mediumspringgreen:    \"#00fa9a\",\n    mediumturquoise:      \"#48d1cc\",\n    mediumvioletred:      \"#c71585\",\n    midnightblue:         \"#191970\",\n    mintcream:            \"#f5fffa\",\n    mistyrose:            \"#ffe4e1\",\n    moccasin:             \"#ffe4b5\",\n    navajowhite:          \"#ffdead\",\n    navy:                 \"#000080\",\n    oldlace:              \"#fdf5e6\",\n    olive:                \"#808000\",\n    olivedrab:            \"#6b8e23\",\n    orange:               \"#ffa500\",\n    orangered:            \"#ff4500\",\n    orchid:               \"#da70d6\",\n    palegoldenrod:        \"#eee8aa\",\n    palegreen:            \"#98fb98\",\n    paleturquoise:        \"#afeeee\",\n    palevioletred:        \"#d87093\",\n    papayawhip:           \"#ffefd5\",\n    peachpuff:            \"#ffdab9\",\n    peru:                 \"#cd853f\",\n    pink:                 \"#ffc0cb\",\n    plum:                 \"#dda0dd\",\n    powderblue:           \"#b0e0e6\",\n    purple:               \"#800080\",\n    red:                  \"#ff0000\",\n    rosybrown:            \"#bc8f8f\",\n    royalblue:            \"#4169e1\",\n    saddlebrown:          \"#8b4513\",\n    salmon:               \"#fa8072\",\n    sandybrown:           \"#f4a460\",\n    seagreen:             \"#2e8b57\",\n    seashell:             \"#fff5ee\",\n    sienna:               \"#a0522d\",\n    silver:               \"#c0c0c0\",\n    skyblue:              \"#87ceeb\",\n    slateblue:            \"#6a5acd\",\n    slategray:            \"#708090\",\n    snow:                 \"#fffafa\",\n    springgreen:          \"#00ff7f\",\n    steelblue:            \"#4682b4\",\n    tan:                  \"#d2b48c\",\n    teal:                 \"#008080\",\n    thistle:              \"#d8bfd8\",\n    tomato:               \"#ff6347\",\n    turquoise:            \"#40e0d0\",\n    violet:               \"#ee82ee\",\n    wheat:                \"#f5deb3\",\n    white:                \"#ffffff\",\n    whitesmoke:           \"#f5f5f5\",\n    yellow:               \"#ffff00\",\n    yellowgreen:          \"#9acd32\",\n    transparent:          \"rgba(0,0,0,0)\"\n  };\n\n/**\n * 画图基础对象\n * 当前库的工具类\n * \n * @class jmUtils\n * @static\n */\nexport default class jmUtils {\n    /**\n     * 复制一个对象\n     * \n     * @method clone\n     * @static\n     * @param {object} source 被复制的对象\n     * @param {object} target 可选，如果指定就表示复制给这个对象，如果为boolean它就是deep参数\n     * @param {boolean} deep 是否深度复制，如果为true,数组内的每个对象都会被复制\n     * @param {function} copyHandler 复制对象回调，如果返回undefined，就走后面的逻辑，否则到这里中止\n     * @return {object} 参数source的拷贝对象\n     */\n    static clone(source, target, deep = false, copyHandler = null, deepIndex = 0) {\n        // 如果有指定回调，则用回调处理，否则走后面的复制逻辑\n        if(typeof copyHandler === 'function') {\n            const obj = copyHandler(source, deep, deepIndex);\n            if(obj) return obj;\n        }\n        deepIndex++; // 每执行一次，需要判断最大拷贝深度        \n\n        if(typeof target === 'boolean') {\n            deep = target;\n            target = undefined;\n        }\n\n        // 超过100拷贝深度，直接返回\n        if(deepIndex > 100) {\n            return target;\n        }\n\n        if(source && typeof source === 'object') {\n            target = target || {};\n\n            //如果为当前泛型，则直接new\n            if(this.isType(source, jmList)) {\n                return new jmList(source);\n            }\n            else if(Array.isArray(source)) {\n                //如果是深度复，则拷贝每个对象\n                if(deep) {\n                    let dest = [];\n                    for(let i=0; i<source.length; i++) {\n                        dest.push(this.clone(source[i], target[i], deep, copyHandler, deepIndex));\n                    }\n                    return dest;\n                }\n                return source.slice(0);\n            }\n           \n            if(source.__proto__) target.__proto__ = source.__proto__;\n            \n            for(let k in source) {\n                if(k === 'constructor') continue;\n                const v = source[k];\n                // 不复制页面元素和class对象\n                if(v && (v.tagName || v.getContext)) {\n                    target[k] = v;\n                    continue;\n                }\n\n                // 如果不是对象和空，则采用target的属性\n                if(typeof target[k] === 'object' || typeof target[k] === 'undefined') {                    \n                    target[k] = this.clone(v, target[k], deep, copyHandler, deepIndex);\n                }\n            }\n            return target;\n        }\n        else if(typeof target != 'undefined') {\n            return target;\n        }\n\n        return source;\n    }\n\n    /**\n     * 绑定事件到html对象\n     * \n     * @method bindEvent\n     * @static\n     * @param {element} html元素对象\n     * @param {string} name 事件名称\n     * @param {function} fun 事件委托\n     * @returns {name, fun, target} 返回当前绑定\n     */\n    static bindEvent(target, name, fun, opt) {\n        if(name &&  name.indexOf && name.indexOf(' ') != -1) {\n            let ns = name.split(' ');\n            for(let i=0;i<ns.length;i++) {\n                this.bindEvent(target, ns[i], fun, opt);\n            }\n        }\n        if(target.attachEvent) {\n            target.attachEvent(\"on\"+name, fun, opt);\n        }    \n        else if(target.addEventListener) {\n            target.addEventListener(name, fun, opt);\n        }\n        return {\n            name,\n            target,\n            fun\n        };\n    }\n\n    /**\n     * 从对象中移除事件到\n     * \n     * @method removeEvent\n     * @static\n     * @param {element} html元素对象\n     * @param {string} name 事件名称\n     * @param {function} fun 事件委托\n     */\n    static removeEvent(target, name, fun) {\n        if(target.removeEventListener) {\n            return target.removeEventListener(name, fun, false);\n        }    \n        else if(target.detachEvent) {\n            target.detachEvent('on' + name, fun);\n            return true;\n        }\n        else {\n            target['on' + name] = null;\n        }\n    }\n\n    /**\n     * 获取元素的绝对定位\n     *\n     * @method getElementPosition\n     * @static\n     * @param {element} el 目标元素对象\n     * @return {position} 位置对象(top,left)\n     */\n    static getElementPosition(el) {    \n        let pos = {\"top\": 0, \"left\": 0};\n        if(!el) return pos;\n\n        if (el.offsetParent) {\n            while (el.offsetParent) {\n                pos.top += el.offsetTop;\n                pos.left += el.offsetLeft;\n                el = el.offsetParent;\n            }\n        }\n        else if(el.x) {\n            pos.left += el.x;\n        }\n        else if(el.x){\n            pos.top += el.y;\n        } \n        return pos;\n    }\n    /**\n     * 获取元素事件触发的位置\n     *\n     * @method getEventPosition\n     * @static\n     * @param {eventArg} evt 当前触发事件的参数\n     * @param {point} [scale] 当前画布的缩放比例\n     * @return {point} 事件触发的位置 \n     */\n    static getEventPosition (evt, scale) {\n        evt = evt || event;\n        const isWXMiniApp = evt.isWXMiniApp;\n        let isTouch = false;\n        let touches = evt.changedTouches || evt.targetTouches || evt.touches;\n        let target = evt.target || evt.srcElement;\n        if(touches && touches.length) {\n            evt = touches[0];//兼容touch事件            \n            if(!evt.target) evt.target = target;\n            isTouch = true;\n        }\n        let px = evt.pageX || evt.x;\n        if(typeof px == 'undefined')  px = evt.clientX + (document.documentElement.scrollLeft || document.body.scrollLeft);    \n        let py = evt.pageY || evt.y;\n        if(typeof py == 'undefined')  py = evt.clientY + (document.documentElement.scrollTop || document.body.scrollTop);\n\n        let ox = evt.offsetX;\n        let oy = evt.offsetY;\n        if(typeof ox === 'undefined' && typeof oy === 'undefined') {\n            // 小程序下取x,y就是它的相对坐标\n            if(isWXMiniApp) {\n                ox = evt.x;\n                oy = evt.y;\n            }\n            else {\n                let p = this.getElementPosition(target);\n                ox= px - p.left;\n                oy = py - p.top;\n            }\n        }\n        if(scale) {\n            if(scale.x) ox = ox / scale.x;\n            if(scale.y) oy = oy / scale.y;\n        }\n\n        return {\n            pageX: px,\n            pageY: py,\n            clientX: evt.clientX,\n            clientY: evt.clientY,\n            //相对于容器偏移量\n            offsetX: ox,\n            offsetY: oy,\n            layerX: evt.layerX,\n            layerY: evt.layerY,\n            screenX: evt.screenX,\n            screenY: evt.screenY,\n            x: ox,\n            y: oy,\n            isTouch: isTouch,\n            touches,\n            isWXMiniApp\n        };\n    }\n\n    /**\n     * 检 查对象是否为指定的类型,不包括继承\n     * \n     * @method isType\n     * @static\n     * @param {object} target 需要判断类型的对象\n     * @param {class} type 对象类型\n     * @return {boolean} 返回对象是否为指定类型 \n     */\n    static isType(target, type) {\n        if(!target || typeof target !== 'object') return false;\n        if(target.constructor === type) return true;\n        /*if(target.__baseType) {        \n            return jmUtils.isType(target.__baseType.prototype,type);\n        }*/\n\n        //return target instanceof type;\n        return false;\n    }\n    /**\n     * 判断点是否在多边形内\n     * 如果一个点在多边形内部，任意角度做射线肯定会与多边形要么有一个交点，要么有与多边形边界线重叠。\n     * 如果一个点在多边形外部，任意角度做射线要么与多边形有一个交点，要么有两个交点，要么没有交点，要么有与多边形边界线重叠。\n     * 利用上面的结论，我们只要判断这个点与多边形的交点个数，就可以判断出点与多边形的位置关系了。\n     * \n     * @method pointInPolygon\n     * @static\n     * @param {point} pt 坐标对象\n     * @param {array} polygon 多边型角坐标对象数组\n     * @param {number} offset 判断可偏移值\n     * @return {integer} 0= 不在图形内和线上，1=在边上，2=在图形内部\n     */\n    static pointInPolygon(pt, polygon, offset) {\n        offset = offset || 1;\n        offset = offset / 2;\n        const n = polygon.length;\n        \n        if(!polygon || n == 0) return 0;\n        \n        if(n == 1) {\n            return Math.abs(polygon[0].x - pt.x) <= offset && Math.abs(polygon[0].y - pt.y) <= offset ? 1 : 0;\n        }\n        \n        if(n == 2) {\n            return this.pointOnLine(pt, polygon[0], polygon[1], offset);\n        }\n\n        for (let i = 0; i < n; i++) {\n            if (Math.abs(polygon[i].x - pt.x) <= offset && \n                Math.abs(polygon[i].y - pt.y) <= offset) {\n                return 1;\n            }\n        }\n\n        return this.rayCasting(pt, polygon, offset);\n    }\n\n    static pointOnLine(pt, p1, p2, offset) {\n        const minX = Math.min(p1.x, p2.x);\n        const maxX = Math.max(p1.x, p2.x);\n        const minY = Math.min(p1.y, p2.y);\n        const maxY = Math.max(p1.y, p2.y);\n\n        if (minX - pt.x > offset || pt.x - maxX > offset) {\n            return 0;\n        }\n        if (minY - pt.y > offset || pt.y - maxY > offset) {\n            return 0;\n        }\n\n        if (p1.x == p2.x) {\n            return Math.abs(p1.x - pt.x) <= offset && \n                   (pt.y - p1.y) * (pt.y - p2.y) <= 0 ? 1 : 0;\n        }\n\n        if (p1.y == p2.y) {\n            return Math.abs(p1.y - pt.y) <= offset && \n                   (pt.x - p1.x) * (pt.x - p2.x) <= 0 ? 1 : 0;\n        }\n\n        if (Math.abs(p1.x - pt.x) < offset && Math.abs(p1.y - pt.y) < offset) {\n            return 1;\n        }\n        if (Math.abs(p2.x - pt.x) < offset && Math.abs(p2.y - pt.y) < offset) {\n            return 1;\n        }\n\n        if (pt.y != p1.y && pt.y != p2.y) {\n            const f = (p2.x - p1.x) / (p2.y - p1.y) * (pt.y - p1.y);\n            const ff = (pt.y - p1.y) / Math.sqrt(f * f + (pt.y - p1.y) * (pt.y - p1.y));\n            const l = ff * (pt.x - p1.x - f);\n            \n            return Math.abs(l) <= offset ? 1 : 0;\n        }\n        return 0;\n    }\n\n    static rayCasting(pt, polygon, offset) {\n        const n = polygon.length;\n        let inside = false;\n        const testY = pt.y;\n        const testX = pt.x;\n\n        for (let i = 0, j = n - 1; i < n; j = i++) {\n            const yi = polygon[i].y;\n            const yj = polygon[j].y;\n            const xi = polygon[i].x;\n            const xj = polygon[j].x;\n\n            const intersect = ((yi > testY) !== (yj > testY)) &&\n                (testX < (xj - xi) * (testY - yi) / (yj - yi) + xi);\n\n            if (intersect) {\n                inside = !inside;\n            }\n        }\n\n        return inside ? 2 : 0;\n    }\n\n    /**\n     * @method judge 判断点是否在多边形中\n     * @param {point} dot {{x,y}} 需要判断的点\n     * @param {array} coordinates {{x,y}} 多边形点坐标的数组，为保证图形能够闭合，起点和终点必须相等。\n     *        比如三角形需要四个点表示，第一个点和最后一个点必须相同。 \n     * @param  {number} 是否为实心 1= 是\n     * @returns {boolean} 结果 true=在形状内\n     */\n    /*static judge(dot,coordinates,noneZeroMode) {\n        // 默认启动none zero mode\n        noneZeroMode=noneZeroMode||1;\n        var x = dot.x,y=dot.y;\n        var crossNum = 0;\n        // 点在线段的左侧数目\n        var leftCount = 0;\n        // 点在线段的右侧数目\n        var rightCount = 0;\n        for(var i=0;i<coordinates.length-1;i++){\n            var start = coordinates[i];\n            var end = coordinates[i+1];\n                \n            // 起点、终点斜率不存在的情况\n            if(start.x===end.x) {\n                // 因为射线向右水平，此处说明不相交\n                if(x>start.x) continue;\n                \n                // 从左侧贯穿\n                if((end.y>start.y&&y>=start.y && y<=end.y)){\n                    leftCount++;\n                    crossNum++;\n                }\n                // 从右侧贯穿\n                if((end.y<start.y&&y>=end.y && y<=start.y)) {\n                    rightCount++;\n                    crossNum++;\n                }\n                continue;\n            }\n            // 斜率存在的情况，计算斜率\n            var k=(end.y-start.y)/(end.x-start.x);\n            // 交点的x坐标\n            var x0 = (y-start.y)/k+start.x;\n            // 因为射线向右水平，此处说明不相交\n            if(x>x0) continue;\n                \n            if((end.x>start.x&&x0>=start.x && x0<=end.x)){\n                crossNum++;\n                if(k>=0) leftCount++;\n                else rightCount++;\n            }\n            if((end.x<start.x&&x0>=end.x && x0<=start.x)) {\n                crossNum++;\n                if(k>=0) rightCount++;\n                else leftCount++;\n            }\n        }\n        \n        return noneZeroMode===1?leftCount-rightCount!==0:crossNum%2===1;\n    }*/\n\n    /**\n     * 检查边界，子对象是否超出父容器边界\n     * 当对象偏移offset后是否出界\n     * 返回(left:0,right:0,top:0,bottom:0)\n     * 如果right>0表示右边出界right偏移量,left<0则表示左边出界left偏移量\n     * 如果bottom>0表示下边出界bottom偏移量,top<0则表示上边出界ltop偏移量\n     *\n     * @method checkOutSide\n     * @static\n     * @param {bound} parentBounds 父对象的边界\n     * @param {bound} targetBounds 对象的边界\n     * @param {number} offset 判断是否越界可容偏差\n     * @return {bound} 越界标识\n     */\n    static checkOutSide(parentBounds, targetBounds, offset) {\n        let result = {left:0,right:0,top:0,bottom:0};\n        if(offset.x < 0 ) {\n            result.left = targetBounds.left + offset.x - parentBounds.left;\n        }\n        else if(offset.x > 0 ) {\n            result.right = targetBounds.right + offset.x - parentBounds.right;\n        }\n\n        if(offset.y < 0 ) {\n            result.top = targetBounds.top + offset.y - parentBounds.top;\n        }\n        else if(offset.y > 0) {\n            result.bottom = targetBounds.bottom + offset.y - parentBounds.bottom;\n        }\n        return result;\n    }\n\n    /**\n     * 把一个或多个点绕某个点旋转一定角度\n     * 先把坐标原点移到旋转中心点，计算后移回\n     * @method rotatePoints\n     * @static\n     * @param {Array/object} p 一个或多个点\n     * @param {*} rp 旋转中心点\n     * @param {*} r 旋转角度\n     */\n    static rotatePoints(p, rp, r) {\n        if(!r || !p) return p;\n        let cos = Math.cos(r);\n        let sin = Math.sin(r);\n        if(Array.isArray(p)) {\n            for(let i=0;i<p.length;i++) {\n                if(!p[i]) continue;\n                let x1 = p[i].x - rp.x;\n                let y1 = p[i].y - rp.y;\n                p[i].x = x1 * cos - y1 * sin + rp.x;\n                p[i].y = x1 * sin + y1 * cos + rp.y;\n            }\n        }\n        else {\n            let x1 = p.x - rp.x;\n            let y1 = p.y - rp.y;\n            p.x = x1 * cos - y1 * sin + rp.x;\n            p.y = x1 * sin + y1 * cos + rp.y;\n        }\n        return p;\n    }\n\n    /**\n     * 去除字符串开始字符\n     * \n     * @method trimStart\n     * @static\n     * @param {string} source 需要处理的字符串\n     * @param {char} [c] 要去除字符串的前置字符\n     * @return {string} 去除前置字符后的字符串\n     */\n    static trimStart(source, c) {\n        c = c || ' ';\n        if(source && source.length > 0) {\n            let sc = source[0];\n            if(sc === c || c.indexOf(sc) >= 0) {\n                source = source.substring(1);\n                return this.trimStart(source,c);\n            }        \n        }\n        return source;\n    }\n\n    /**\n     * 去除字符串结束的字符c\n     *\n     * @method trimEnd\n     * @static\n     * @param {string} source 需要处理的字符串\n     * @param {char} [c] 要去除字符串的后置字符\n     * @return {string} 去除后置字符后的字符串\n     */\n    static trimEnd(source, c) {\n        c = c || ' ';\n        if(source && source.length > 0) {\n            let sc = source[source.length - 1];\n            if(sc === c || c.indexOf(sc) >= 0) {\n                source = source.substring(0,source.length - 1);\n                return this.trimStart(source,c);\n            }        \n        }\n        return source;\n    }\n\n    /**\n     * 去除字符串开始与结束的字符\n     *\n     * @method trim\n     * @static\n     * @param {string} source 需要处理的字符串\n     * @param {char} [c] 要去除字符串的字符\n     * @return {string} 去除字符后的字符串\n     */\n    static trim(source,c) {\n        return this.trimEnd(this.trimStart(source,c),c);\n    }\n\n    /**\n     * 检查是否为百分比参数\n     *\n     * @method checkPercent\n     * @static\n     * @param {string} 字符串参数\n     * @return {boolean} true=当前字符串为百分比参数,false=不是\n     */\n    static checkPercent(per) {\n        if(typeof per === 'string') {\n            per = this.trim(per);\n            if(per[per.length - 1] == '%') {\n                return per;\n            }\n        }\n    }\n\n    /**\n     * 转换百分数为数值类型\n     *\n     * @method percentToNumber\n     * @static\n     * @param {string} per 把百分比转为数值的参数\n     * @return {number} 百分比对应的数值\n     */\n    static percentToNumber(per) {\n        if(typeof per === 'string') {\n            let tmp = this.checkPercent(per);\n            if(tmp) {\n                per = this.trim(tmp,'% ');\n                per = per / 100;\n            }\n        }\n        return per;\n    }\n\n    /**\n     * 转换16进制为数值\n     *\n     * @method hexToNumber\n     * @static\n     * @param {string} h 16进制颜色表达\n     * @return {number} 10进制表达\n     */\n    static hexToNumber(h) {\n        if(typeof h !== 'string') return h;\n\n        h = h.toLowerCase();\n        let hex = '0123456789abcdef';\n        let v = 0;\n        let l = h.length;\n        for(let i=0;i<l;i++) {\n            let iv = hex.indexOf(h[i]);\n            if(iv == 0) continue;\n            \n            for(let j=1;j<l - i;j++) {\n                iv *= 16;\n            }\n            v += iv;\n        }\n        return v;\n    }\n\n    /**\n     * 转换数值为16进制字符串表达\n     *\n     * @method hex\n     * @static\n     * @param {number} v 数值\n     * @return {string} 16进制表达\n     */\n    static numberToHex(v) {\n        let hex = '0123456789abcdef';\n        \n        let h = '';\n        while(v > 0) {\n            let t = v % 16;\n            h = hex[t] + h;\n            v = Math.floor(v / 16);\n        }\n        return h;\n    }\n\n    /**\n     * 16进制颜色转为r g b a 对象 {r, g , b, a}\n     * @param {string}} hex 16进度的颜色\n     */\n    static hexToRGBA(hex) {\n        if(typeof hex === 'string') hex = this.trim(hex);   \n        else return hex;\n\n        // 如果缓存存在，则直接返回\n        this.__hexToRGBA_Cache = this.__hexToRGBA_Cache || {};\n        if(this.__hexToRGBA_Cache[hex]) return this.__hexToRGBA_Cache[hex];\n\n        let res = hex;\n\n        // 系统颜色\n        if(colorKeywords[res]) res = colorKeywords[res];\n\n        //当为7位时，表示需要转为带透明度的rgba\n        if(res[0] == '#') {\n            const color = {\n                a: 1\n            };\n            if(res.length >= 8) {\n                color.a = res.substr(1,2);\n                color.g = res.substr(5,2);\n                color.b = res.substr(7,2);\n                color.r = res.substr(3,2);\n                //透明度\n                color.a = Number((this.hexToNumber(color.a) / 255).toFixed(4));\n\n                color.r = this.hexToNumber(color.r||0);\n                color.g = this.hexToNumber(color.g||0);\n                color.b = this.hexToNumber(color.b||0);\n                res = color; \n            }\n            // #cccccc || #ccc\n            else if(res.length === 7 || res.length === 4) {\n                // #ccc这种情况，把每个位复制一份\n                if(res.length === 4) {\n                    color.g = res.substr(2, 1);\n                    color.g = color.g + color.g;\n                    color.b = res.substr(3, 1);\n                    color.b = color.b + color.b;\n                    color.r = res.substr(1, 1);\n                    color.r = color.r + color.r;\n                }\n                else {\n                    color.g = res.substr(3, 2);//除#号外的第二位\n                    color.b = res.substr(5, 2);\n                    color.r = res.substr(1, 2);\n                }\n\n                color.r = this.hexToNumber(color.r||0);\n                color.g = this.hexToNumber(color.g||0);\n                color.b = this.hexToNumber(color.b||0);\n                \n                res = color; \n            }\n            //如果是5位的话，# 则第2位表示A，后面依次是r,g,b\n            else if(res.length === 5) {\n                color.a = res.substr(1,1);\n                color.g = res.substr(3,1);//除#号外的第二位\n                color.b = res.substr(4,1);\n                color.r = res.substr(2,1);\n\n                color.r = this.hexToNumber(color.r||0);\n                color.g = this.hexToNumber(color.g||0);\n                color.b = this.hexToNumber(color.b||0);\n                //透明度\n                color.a = Number((this.hexToNumber(color.a) / 255).toFixed(4));\n                res = color; \n            }\n        }  \n        if(typeof res === 'string') {\n            const m = res.match(/rgb(a)?\\s*\\(\\s*([\\d\\.]+)\\s*,\\s*([\\d\\.]+)\\s*,\\s*([\\d\\.]+)\\s*(,\\s*[\\d\\.]+)?\\s*\\)/i); \n            if(m && m.length === 6) {\n                const color = {\n                    r: Number(m[2]),\n                    g: Number(m[3]),\n                    b: Number(m[4]),\n                    a: Number(this.trimStart(m[5]||'1', ','))\n                };\n                res = color;\n            }\n        }\n        return this.__hexToRGBA_Cache[hex] = res;     \n    }\n\n    /**\n     * 把255的rgb值转为0-1的值\n     * @param {rgba} color 颜色\n     */\n    static rgbToDecimal(color) {\n        color = this.clone(color);\n        color.r = this.byteToDecimal(color.r);\n        color.g = this.byteToDecimal(color.g);\n        color.b = this.byteToDecimal(color.b);\n        return color;\n    }\n\n    //255值转为0-1的小数\n    static byteToDecimal(b) {\n        return b / 255;\n    }\n\n    /**\n     * 转换颜色格式，如果输入r,g,b则转为hex格式,如果为hex则转为r,g,b格式\n     *\n     * @method toColor\n     * @static\n     * @param {string} hex 16进制颜色表达\n     * @return {string} 颜色字符串\n     */\n    static toColor(r, g, b, a) {    \n        if(typeof r === 'string' && r) {\n            r = this.trim(r); \n            // 正常的颜色表达，不需要转换\n            if(r[0] === '#' && (r.length === 4 || r.length === 7)) return r;\n\n            const color = this.hexToRGBA(r);\n            if(typeof color === 'string') return color;\n            \n            r = typeof color.r !== 'undefined'? color.r: r;\n            g = typeof color.g !== 'undefined'? color.g: g;\n            b = typeof color.b !== 'undefined'? color.b: b;\n            a = typeof color.a !== 'undefined'? color.a: a;\n        }\n        if(r && typeof r === 'object') {\n            g = r.g;\n            b = r.b;\n            a = r.a || 1;\n            r = r.r;\n        }\n        if(typeof r != 'undefined' && typeof g != 'undefined' && typeof b != 'undefined') {\n            if(typeof a != 'undefined') {            \n                return 'rgba(' + r + ',' + g + ',' + b + ',' + a + ')';\n            }\n            else {\n                return 'rgb(' + r + ',' + g + ',' + b + ')';\n            }\n        }\n        return r;\n    }\n    // window.requestAnimationFrame() 告诉浏览器——你希望执行一个动画，并且要求浏览器在下次重绘之前调用指定的回调函数更新动画。该方法需要传入一个回调函数作为参数，该回调函数会在浏览器下一次重绘之前执行\n    static requestAnimationFrame(callback, win) {\n        let fun = win && win.requestAnimationFrame? win.requestAnimationFrame: (typeof window !== 'undefined' && window.requestAnimationFrame? window.requestAnimationFrame: setTimeout);        \n\t\treturn fun(callback, 20);\n    }\n    static cancelAnimationFrame(handler, win) {\n        let fun = win && win.cancelAnimationFrame? win.cancelAnimationFrame: (typeof window !== 'undefined' && window.cancelAnimationFrame? window.cancelAnimationFrame: clearTimeout);        \n\t\treturn fun(handler);\n    }\t\n}\nexport { jmUtils };","\nimport {jmList} from \"./jmList.js\";\n\nlet control_id_counter = 0;\n\nexport default class jmObject {\n\tconstructor(g) {\n\t\tif(g && g.type == 'jmGraph') {\n\t\t\tthis.graph = g;\n\t\t}\n\t\tthis.id = ++control_id_counter;\n\t}\n\t\n\t/**\n\t * 检 查对象是否为指定类型\n\t * \n\t * @method is\n\t * @param {class} type 判断的类型\n\t * @for jmObject\n\t * @return {boolean} true=表示当前对象为指定的类型type,false=表示不是\n\t */\n\tis(type) {\n\t\tif(typeof type == 'string') {\n\t\t\treturn this.type == type;\n\t\t}\n\t\treturn this instanceof type;\n\t}\n\n\tanimate(...args) {\n\t\tif(this.is('jmGraph')) {\n\t\t\tif(args.length > 1) {\n\t\t\t\tif(!this.animateHandles) this.animateHandles = new jmList();\n\t\t\t\t\n\t\t\t\tconst params = [];\n\t\t\t\tif(args.length > 2) {\n\t\t\t\t\tfor(let i=2;i<args.length;i++) {\n\t\t\t\t\t\tparams.push(args[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.animateHandles.add({\n\t\t\t\t\tmillisec: args[1] || 20, \n\t\t\t\t\thandle: args[0], \n\t\t\t\t\tparams: params\n\t\t\t\t});\n\t\t\t}\n\t\t\tif(this.animateHandles) {\n\t\t\t\tif(this.animateHandles.count() > 0) {\n\t\t\t\t\tconst self = this;\n\t\t\t\t\tthis.dispatcher = setTimeout(function(_this) {\n\t\t\t\t\t\t_this = _this || self;\n\t\t\t\t\t\tconst overduehandles = [];\n\t\t\t\t\t\tconst curTimes = Date.now();\n\t\t\t\t\t\t_this.animateHandles.each(function(i,ani) {\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tif(ani && ani.handle && (!ani.times || curTimes - ani.times >= ani.millisec)) {\n\t\t\t\t\t\t\t\t\tconst r = ani.handle.apply(_this, ani.params);\n\t\t\t\t\t\t\t\t\tif(r === false) {\n\t\t\t\t\t\t\t\t\t\toverduehandles.push(ani);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tani.times = curTimes;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcatch(e) {\n\t\t\t\t\t\t\t\tif(ani) overduehandles.push(ani);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tfor(const i in overduehandles) {\n\t\t\t\t\t\t\t_this.animateHandles.remove(overduehandles[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t_this.animate();\n\t\t\t\t\t},10,this);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tconst graph = this.graph;\n\t\t\tif(graph) {\n\t\t\t\tgraph.animate(...args);\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport { jmObject };","\nimport {jmUtils} from \"./jmUtils.js\";\nimport { jmObject } from \"./jmObject.js\";\n\nconst PROPERTY_KEY = Symbol(\"properties\");\n\nexport default class jmProperty extends jmObject {\n\tconstructor(params) {\n\t\tsuper();\n\t\tthis[PROPERTY_KEY] = {};\n\t\tif(params && params.mode) this.mode = params.mode;\n\t}\n\n\tproperty(...pars) {\n\t\tif(pars) {\n\t\t\tconst pros = this[PROPERTY_KEY];\n\t\t\tconst name = pars[0];\n\t\t\tif(pars.length > 1) {\n\t\t\t\tconst value = pars[1];\n\t\t\t\tconst args = {oldValue: pros[name], newValue: value};\n\t\t\t\tpros[name] = pars[1];\n\t\t\t\tif(this.emit) this.emit('propertyChange', name, args);\n\t\t\t\treturn pars[1];\n\t\t\t}\n\t\t\telse if(name) {\n\t\t\t\treturn pros[name];\n\t\t\t}\n\t\t}\n\t}\n\n\tget needUpdate() {\n\t\treturn this.property('needUpdate');\n\t}\n\tset needUpdate(v) {\n\t\tthis.property('needUpdate', v);\n\t\tif(v && !this.is('jmGraph') && this.graph) {\n\t\t\tthis.graph.needUpdate = true;\n\t\t}\n\t}\n\n\tget graph() {\n\t\tlet g = this.property('graph');\n\t\tg = g || (this.property('graph', this.findParent('jmGraph')));\n\t\treturn g;\n\t}\n\tset graph(v) {\n\t\treturn this.property('graph', v);\n\t}\n\n\tget mode() {\n\t\tlet m = this.property('mode');\n\t\tif(m) return m;\n\t\telse if(this.is('jmGraph')) return this.property('mode');\n\t\treturn this.graph.mode;\n\t}\n\tset mode(v) {\n\t\treturn this.property('mode', v);\n\t}\n\n\trequestAnimationFrame(handler) {\n\t\treturn jmUtils.requestAnimationFrame(handler, this.graph? this.graph.canvas: null);\n\t}\n\n\tcancelAnimationFrame(handler) {\n\t\treturn jmUtils.cancelAnimationFrame(handler, this.graph? this.graph.canvas: null);\n\t}\n}\n\nexport { jmProperty };\n\n\n","import {jmUtils} from \"./jmUtils.js\";\n\n/**\n * 画图阴影对象表示法\n *\n * @class jmShadow\n * @param {number} x 横坐标偏移量\n * @param {number} y 纵坐标编移量\n * @param {number} blur 模糊值\n * @param {string} color 阴影的颜色\n */\n\nexport default class jmShadow {\n\tconstructor(x, y, blur, color) {\n\t\tif(typeof x == 'string' && !y && !blur && !color) {\n\t\t\tthis.fromString(x);\n\t\t}\n\t\telse {\n\t\t\tthis.x = x;\n\t\t\tthis.y = y;\n\t\t\tthis.blur = blur;\n\t\t\tthis.color = color;\n\t\t}\n\t}\n\t/**\n\t * 根据字符串格式转为阴影\n\t * @method fromString\n\t * @param {string} s 阴影字符串 x,y,blur,color\n\t */\n\tfromString(s) {\n\t\tif(!s) return;\n\t\tlet ms = s.match(/\\s*([^,]+)\\s*,\\s*([^,]+)\\s*(,[^,]+)?\\s*(,[\\s\\S]+)?\\s*/i);\n\t\tif(ms) {\n\t\t\tthis.x = ms[1]||0;\n\t\t\tthis.y = ms[2]||0;\n\t\t\tif(ms[3]) {\n\t\t\t\tms[3] = jmUtils.trim(ms[3],', ');\n\t\t\t\t//如果第三位是颜色格式，则表示为颜色\n\t\t\t\tif(ms[3].indexOf('#')===0 || /^rgb/i.test(ms[3])) {\n\t\t\t\t\tthis.color = ms[3];\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthis.blur = jmUtils.trim(ms[3],', ');\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(ms[4]) {\n\t\t\t\tthis.color = jmUtils.trim(ms[4],', ');\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t}\n\n\t/**\n\t * 转为字符串格式 x,y,blur,color\n\t * @method toString\n\t * @returns {string} 阴影字符串\n\t */\n\ttoString() {\n\t\tlet s = this.x + ',' + this.y;\n\t\tif(this.blur) s += ',' + this.blur;\n\t\tif(this.color) s += ',' + this.color;\n\t\treturn s;\n\t}\n}\n\nexport { jmShadow };","import {jmUtils} from \"./jmUtils.js\";\nimport {jmList} from \"./jmList.js\";\n\n/**\n * 渐变类\n *\n * @class jmGradient\n * @param {object} op 渐变参数,type:[linear= 线性渐变,radial=放射性渐变] \n */\nexport default class jmGradient {\n\tconstructor(opt) {\n\t\tthis.stops = new jmList();\n\n\t\tif(opt && typeof opt == 'object') {\n\t\t\tfor(let k in opt) {\n\t\t\t\tif(k === 'stops') continue;\n\t\t\t\tthis[k] = opt[k];\n\t\t\t}\n\t\t\tif(opt.stops && Array.isArray(opt.stops)) {\n\t\t\t\tthis.stops.push(...opt.stops);\n\t\t\t}\n\t\t}\n\t\t//解析字符串格式\n\t\t//linear-gradient(direction, color-stop1, color-stop2, ...);\n\t\t//radial-gradient(center, shape size, start-color, ..., last-color);\n\t\telse if(typeof opt == 'string') {\n\t\t\tthis.fromString(opt);\n\t\t}\n\t}\n\t/**\n\t * 添加渐变色\n\t * \n\t * @method addStop\n\t * @for jmGradient\n\t * @param {number} offset 放射渐变颜色偏移,可为百分比参数。\n\t * @param {string} color 当前偏移颜色值\n\t */\n\taddStop(offset, color) {\n\t\tthis.stops.add({\n\t\t\toffset: Number(offset),\n\t\t\tcolor: color\n\t\t});\n\t}\n\n\t/**\n\t * 生成为canvas的渐变对象\n\t *\n\t * @method toGradient\n\t * @for jmGradient\n\t * @param {jmControl} control 当前渐变对应的控件\n\t * @return {gradient} canvas渐变对象\n\t */\n\ttoGradient(control) {\n\t\tlet gradient;\n\t\tlet context = control.context || control;\n\t\tlet bounds = control.absoluteBounds?control.absoluteBounds:control.getAbsoluteBounds();\n\t\tlet x1 = this.x1||0;\n\t\tlet y1 = this.y1||0;\n\t\tlet x2 = this.x2;\n\t\tlet y2 = this.y2;\n\n\t\tlet location = control.getLocation();\n\n\t\tlet d = 0;\n\t\tif(location.radius) {\n\t\t\td = location.radius * 2;\t\t\t\t\n\t\t}\n\t\tif(!d) {\n\t\t\td = Math.min(location.width,location.height);\t\t\t\t\n\t\t}\n\n\t\t//let offsetLine = 1;//渐变长度或半径\n\t\t//处理百分比参数\n\t\tif(jmUtils.checkPercent(x1)) {\n\t\t\tx1 = jmUtils.percentToNumber(x1) * (bounds.width || d);\n\t\t}\n\t\tif(jmUtils.checkPercent(x2)) {\n\t\t\tx2 = jmUtils.percentToNumber(x2) * (bounds.width || d);\n\t\t}\n\t\tif(jmUtils.checkPercent(y1)) {\n\t\t\ty1 = jmUtils.percentToNumber(y1) * (bounds.height || d);\n\t\t}\n\t\tif(jmUtils.checkPercent(y2)) {\n\t\t\ty2 = jmUtils.percentToNumber(y2) * (bounds.height || d);\n\t\t}\t\n\n\t\tlet sx1 = Number(x1) + bounds.left;\n\t\tlet sy1 = Number(y1) + bounds.top;\n\t\tlet sx2 = Number(x2) + bounds.left;\n\t\tlet sy2 = Number(y2) + bounds.top;\n\t\tif(this.type === 'linear') {\n\t\t\tif(control.mode === 'webgl' && control.webglControl) {\n\t\t\t\tgradient = control.webglControl.createLinearGradient(x1, y1, x2, y2, bounds);\n\t\t\t\tgradient.key = this.toString();\n\t\t\t}\t\n\t\t\telse {\t\t\n\t\t\t\tcontext.createLinearGradient && (gradient = context.createLinearGradient(sx1, sy1, sx2, sy2));\n\t\t\t}\n\t\t}\n\t\telse if(this.type === 'radial') {\n\t\t\tlet r1 = this.r1||0;\n\t\t\tlet r2 = this.r2;\n\t\t\tif(jmUtils.checkPercent(r1)) {\n\t\t\t\tr1 = jmUtils.percentToNumber(r1);\t\t\t\n\t\t\t\tr1 = d * r1;\n\t\t\t}\n\t\t\tif(jmUtils.checkPercent(r2)) {\n\t\t\t\tr2 = jmUtils.percentToNumber(r2);\n\t\t\t\tr2 = d * r2;\n\t\t\t}\n\t\t\tif(control.mode === 'webgl' && control.webglControl) {\n\t\t\t\tgradient = control.webglControl.createRadialGradient(x1, y1, r1, x2, y2, r2, bounds);\n\t\t\t\tgradient.key = this.toString();\n\t\t\t}\t\n\t\t\t//offsetLine = Math.abs(r2 - r1);//二圆半径差\n\t\t\telse if(context.createRadialGradient) {\n\t\t\t\tgradient = context.createRadialGradient(sx1, sy1, r1, sx2, sy2, r2);\t\n\t\t\t}\n\t\t\t//小程序的接口特殊\n\t\t\telse if(context.createCircularGradient) { \n\t\t\t\tgradient = context.createCircularGradient(sx1, sy1, r2);\n\t\t\t}\n\t\t}\n\t\t\n\t\t//颜色渐变\n\t\tif(gradient) {\n\t\t\tthis.stops.each(function(i,s) {\t\n\t\t\t\tlet c = jmUtils.toColor(s.color);\n\t\t\t\t//s.offset 0.0 ~ 1.0\n\t\t\t\tgradient && gradient.addColorStop(s.offset, c);\t\t\n\t\t\t});\n\t\t}\n\t\telse {\n\t\t\tconst s = this.stops.get(0);\n\t\t\treturn (s && s.color) || '#000';\n\t\t}\n\t\t\n\t\treturn gradient;\n\t}\n\n\t/**\n\t * 变换为字条串格式\n\t * linear-gradient(x1 y1 x2 y2, color1 step, color2 step, ...);\t//radial-gradient(x1 y1 r1 x2 y2 r2, color1 step,color2 step, ...);\n\t * linear-gradient线性渐变，x1 y1表示起点，x2 y2表示结束点,color表颜色，step为当前颜色偏移\n\t * radial-gradient径向渐变,x1 y1 r1分别表示内圆中心和半径，x2 y2 r2为结束圆 中心和半径，颜色例似线性渐变 step为0-1之间\n\t *\n\t * @method fromString\n\t * @for jmGradient\n\t * @return {string} \n\t */\n\tfromString(s) {\n\t\tif(!s) return;\n\t\tlet ms = s.match(/(linear|radial)-gradient\\s*\\(\\s*([^,]+)\\s*,\\s*((.|\\s)+)\\)/i);\n\t\tif(!ms || ms.length < 3) return;\n\t\tthis.type = ms[1].toLowerCase();\t\t\n\t\t\n\t\tconst ps = jmUtils.trim(ms[2]).split(/\\s+/);\n\t\t//线性渐变\n\t\tif(this.type == 'linear') {\n\t\t\tif(ps.length <= 2) {\n\t\t\t\tthis.x2 = ps[0];\n\t\t\t\tthis.y2 = ps[1]||0;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.x1 = ps[0];\n\t\t\t\tthis.y1 = ps[1];\n\t\t\t\tthis.x2 = ps[2];\n\t\t\t\tthis.y2 = ps[3];\n\t\t\t}\n\t\t}\n\t\t//径向渐变\n\t\telse {\n\t\t\tif(ps.length <= 3) {\n\t\t\t\tthis.x2 = ps[0];\n\t\t\t\tthis.y2 = ps[1]||0;\n\t\t\t\tthis.r2 = ps[2]||0;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.x1 = ps[0];\n\t\t\t\tthis.y1 = ps[1];\n\t\t\t\tthis.r1 = ps[2];\n\t\t\t\tthis.x2 = ps[3];\n\t\t\t\tthis.y2 = ps[3];\n\t\t\t\tthis.r2 = ps[3];\n\t\t\t}\n\t\t}\n\t\t//解析颜色偏移\n\t\t//color step\n\t\tconst pars = ms[3].match(/((rgb(a)?\\s*\\([\\d,\\.\\s]+\\))|(#[a-zA-Z\\d]+))\\s+([\\d\\.]+)/ig);\n\t\tif(pars && pars.length) {\n\t\t\tfor(let i=0;i<pars.length;i++) {\n\t\t\t\tconst par = jmUtils.trim(pars[i]);\n\t\t\t\tconst spindex = par.lastIndexOf(' ');\n\t\t\t\tif(spindex > -1) {\t\t\t\n\t\t\t\t\tconst offset = Number(par.substr(spindex + 1));\t\t\n\t\t\t\t\tconst color = jmUtils.trim(par.substr(0, spindex));\n\t\t\t\t\tif(!isNaN(offset) && color) {\n\t\t\t\t\t\tthis.addStop(offset, color);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * 转换为渐变的字符串表达\n\t *\n\t * @method toString\n\t * @for jmGradient\n\t * @return {string} linear-gradient(x1 y1 x2 y2, color1 step, color2 step, ...);\t//radial-gradient(x1 y1 r1 x2 y2 r2, color1 step,color2 step, ...);\n\t */\n\ttoString() {\n\t\tlet str = this.type + '-gradient(';\n\t\tif(this.type == 'linear') {\n\t\t\tstr += this.x1 + ' ' + this.y1 + ' ' + this.x2 + ' ' + this.y2;\n\t\t}\n\t\telse {\n\t\t\tstr += this.x1 + ' ' + this.y1 + ' ' + this.r1 + ' ' + this.x2 + ' ' + this.y2 + ' ' + this.r2;\n\t\t}\n\t\t//颜色渐变\n\t\tthis.stops.each(function(i,s) {\t\n\t\t\tstr += ',' + s.color + ' ' + s.offset;\n\t\t});\n\t\treturn str + ')';\n\t}\n}\n\nexport { jmGradient };\n\n\n\n","import {jmUtils} from \"./jmUtils.js\";\n\nexport default class jmEvents {\n\n\tconstructor(container, target) {\n\t\tthis.container = container;\n\t\tthis.target = target || container;\n\t\tthis.mouseHandler = new jmMouseEvent(this, container, target);\n\t\tthis.keyHandler = new jmKeyEvent(this, container, target);\n\t}\n\n\ttouchStart(evt) {\n\t\tevt = evt || window.event;\n\t\tevt.eventName = 'touchstart';\n\t\tthis.container.raiseEvent('touchstart',evt);\n\t\tconst t = evt.target || evt.srcElement;\n\t\tif(t == this.target) {\n\t\t\treturn false;\n\t\t}\n\t};\n\n\ttouchMove(evt) {\n\t\tevt = evt || window.event;\n\t\tevt.eventName = 'touchmove';\n\t\tthis.container.raiseEvent('touchmove',evt);\n\t\tconst t = evt.target || evt.srcElement;\n\t\tif(t == this.target) {\n\t\t\treturn false;\n\t\t}\n\t};\n\n\ttouchEnd(evt) {\n\t\tevt = evt || window.event;\n\t\tevt.eventName = 'touchend';\n\t\t\n\t\tthis.container.raiseEvent('touchend',evt);\n\t\tconst t = evt.target || evt.srcElement;\n\t\tif(t == this.target) {\n\t\t\treturn false;\n\t\t}\n\t};\n\n\ttouchCancel(evt) {\n\t\tevt = evt || window.event;\n\t\tevt.eventName = 'touchcancel';\n\t\t\n\t\tthis.container.raiseEvent('touchcancel',evt);\n\t\tconst t = evt.target || evt.srcElement;\n\t\tif(t == this.target) {\n\t\t\treturn false;\n\t\t}\n\t};\n\n\ttap(evt) {\n\t\tevt = evt || window.event;\n\t\tevt.eventName = 'tap';\n\t\t\n\t\tthis.container.raiseEvent('tap',evt);\n\t\tconst t = evt.target || evt.srcElement;\n\t\tif(t == this.target) {\n\t\t\treturn false;\n\t\t}\n\t};\n\n\tdestroy() {\n\t\tthis.mouseHandler.destroy();\n\t\tthis.keyHandler.destroy();\n\t}\n}\n\nclass jmMouseEvent {\n\tconstructor(instance, container, target) {\n\t\tthis.instance = instance;\n\t\tthis.container = container;\n\t\tthis.target = target || container;\n\n\t\tthis.eventEvents = {};\n\n\t\tthis.init(instance, container, target);\n\t}\n\t\n\tinit(instance, container, target) {\n\t\tconst canvas = this.target;\n\t\tconst doc = typeof document != 'undefined'? document: null;\n\n\t\tthis.eventEvents['mousedown'] = jmUtils.bindEvent(this.target,'mousedown',function(evt) {\n\t\t\tevt = evt || window.event;\n\t\t\tevt.eventName = 'mousedown';\n\t\t\tcontainer.raiseEvent('mousedown',evt);\n\t\t});\n\t\t\n\t\tthis.eventEvents['mousemove'] = jmUtils.bindEvent(this.target,'mousemove',function(evt) {\n\t\t\tevt = evt || window.event;\n\t\t\tevt.eventName = 'mousemove';\n\t\t\tconst target = evt.target || evt.srcElement;\n\t\t\tif(target == canvas) {\n\t\t\t\tcontainer.raiseEvent('mousemove',evt);\n\t\t\t\tif(evt.preventDefault) evt.preventDefault();\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.eventEvents['mouseover'] = jmUtils.bindEvent(this.target,'mouseover',function(evt) {\n\t\t\tevt = evt || window.event;\n\t\t\tevt.eventName = 'mouseover';\n\t\t\tcontainer.raiseEvent('mouseover',evt);\n\t\t});\n\t\tthis.eventEvents['mouseleave'] = jmUtils.bindEvent(this.target,'mouseleave',function(evt) {\n\t\t\tevt = evt || window.event;\n\t\t\tevt.eventName = 'mouseleave';\n\t\t\tcontainer.raiseEvent('mouseleave',evt);\n\t\t});\n\t\tthis.eventEvents['mouseout'] = jmUtils.bindEvent(this.target,'mouseout',function(evt) {\n\t\t\tevt = evt || window.event;\n\t\t\tevt.eventName = 'mouseout';\n\t\t\tcontainer.raiseEvent('mouseout',evt);\n\t\t});\n\t\tdoc && (this.eventEvents['mouseup'] = jmUtils.bindEvent(doc,'mouseup',function(evt) {\n\t\t\tevt = evt || window.event;\n\t\t\tevt.eventName = 'mouseup';\n\t\t\tconst r = container.raiseEvent('mouseup',evt);\n\t\t\tif(r === false) {\n\t\t\t\tif(evt.preventDefault) evt.preventDefault();\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}));\n\t\t\n\t\tthis.eventEvents['dblclick'] = jmUtils.bindEvent(this.target,'dblclick',function(evt) {\n\t\t\tevt = evt || window.event;\n\t\t\tevt.eventName = 'dblclick';\n\t\t\tcontainer.raiseEvent('dblclick',evt);\n\t\t});\n\t\tthis.eventEvents['click'] = jmUtils.bindEvent(this.target,'click',function(evt) {\n\t\t\tevt = evt || window.event;\n\t\t\tevt.eventName = 'click';\n\t\t\tcontainer.raiseEvent('click',evt);\n\t\t});\n\n\t\tdoc && (this.eventEvents['resize'] = jmUtils.bindEvent(doc,'resize',function(evt) {\n\t\t\tevt = evt || window.event;\n\t\t\tevt.eventName = 'resize';\n\t\t\treturn container.raiseEvent('resize',evt);\n\t\t}));\n\n\t\tthis.eventEvents['touchstart'] = jmUtils.bindEvent(this.target,'touchstart', function(evt) {\n\t\t\tevt.eventName = 'touchstart';\n\t\t\treturn instance.touchStart(evt);\n\t\t},{ passive: false });\n\n\t\tthis.eventEvents['touchmove'] = jmUtils.bindEvent(this.target,'touchmove', function(evt) {\n\t\t\tevt.eventName = 'touchmove';\n\t\t\treturn instance.touchMove(evt);\n\t\t},{ passive: false });\n\n\t\tdoc && (this.eventEvents['touchend'] = jmUtils.bindEvent(doc,'touchend', function(evt) {\n\t\t\tevt.eventName = 'touchend';\n\t\t\treturn instance.touchEnd(evt);\n\t\t},{ passive: false }));\n\n\t\tdoc && (this.eventEvents['touchcancel'] = jmUtils.bindEvent(doc,'touchcancel', function(evt) {\n\t\t\tevt.eventName = 'touchcancel';\n\t\t\treturn instance.touchCancel(evt);\n\t\t},{ passive: false }));\n\t}\n\n\tdestroy() {\n\t\tfor(const name in this.eventEvents) {\n\t\t\tconst event = this.eventEvents[name];\n\t\t\tif(!event || !event.fun) continue;\n\t\t\tjmUtils.removeEvent(event.target, name, event.fun);\n\t\t}\n\t}\n}\n\nclass jmKeyEvent {\n\tconstructor(instance, container,target) {\n\t\tthis.instance = instance;\n\t\tthis.container = container;\n\t\tthis.target = target || container;\n\n\t\tthis.eventEvents = {};\n\n\t\tthis.init(container, target);\n\t}\n\n\tinit(container, target) {\n\t\tconst doc = typeof document != 'undefined'? document: null;\n\n\t\tconst checkKeyEvent = (evt) => {\n\t\t\tconst target = evt.srcElement || evt.target;\n\t\t\tif(target && (target.tagName == 'INPUT' \n\t\t\t\t|| target.tagName == 'TEXTAREA'\n\t\t\t\t|| target.tagName == 'ANCHOR' \n\t\t\t\t|| target.tagName == 'FORM' \n\t\t\t\t|| target.tagName == 'FILE'\n\t\t\t\t|| target.tagName == 'IMG'\n\t\t\t\t|| target.tagName == 'HIDDEN'\n\t\t\t\t|| target.tagName == 'RADIO'\n\t\t\t\t|| target.tagName == 'TEXT'\t)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\n\t\tdoc && (this.eventEvents['keypress'] = jmUtils.bindEvent(doc,'keypress',function(evt) {\n\t\t\tevt = evt || window.event;\n\t\t\tif(!checkKeyEvent(evt)) return;\n\t\t\tconst r = container.raiseEvent('keypress',evt);\n\t\t\tif(r === false && evt.preventDefault) \n\t\t\t\tevt.preventDefault();\n\t\t\treturn r;\n\t\t}));\n\t\tdoc && (this.eventEvents['keydown'] = jmUtils.bindEvent(doc,'keydown',function(evt) {\n\t\t\tevt = evt || window.event;\n\t\t\tif(!checkKeyEvent(evt)) return;\n\t\t\tconst r = container.raiseEvent('keydown',evt);\n\t\t\tif(r === false && evt.preventDefault) \n\t\t\t\tevt.preventDefault();\n\t\t\treturn r;\n\t\t}));\n\t\tdoc && (this.eventEvents['keyup'] = jmUtils.bindEvent(doc,'keyup',function(evt) {\n\t\t\tevt = evt || window.event;\n\t\t\tif(!checkKeyEvent(evt)) return;\n\t\t\tconst r = container.raiseEvent('keyup',evt);\n\t\t\tif(r === false && evt.preventDefault) \n\t\t\t\tevt.preventDefault();\n\t\t\treturn r;\n\t\t}));\n\t}\n\n\tdestroy() {\n\t\tfor(const name in this.eventEvents) {\n\t\t\tconst event = this.eventEvents[name];\n\t\t\tif(!event || !event.fun) continue;\n\t\t\tjmUtils.removeEvent(event.target, name, event.fun);\n\t\t}\n\t}\n}\n\nexport { jmEvents };\n","'use strict';\n\nexport default earcut;\n\nfunction earcut(data, holeIndices, dim) {\n\n    dim = dim || 2;\n\n    var hasHoles = holeIndices && holeIndices.length,\n        outerLen = hasHoles ? holeIndices[0] * dim : data.length,\n        outerNode = linkedList(data, 0, outerLen, dim, true),\n        triangles = [];\n\n    if (!outerNode || outerNode.next === outerNode.prev) return triangles;\n\n    var minX, minY, maxX, maxY, x, y, invSize;\n\n    if (hasHoles) outerNode = eliminateHoles(data, holeIndices, outerNode, dim);\n\n    // if the shape is not too simple, we'll use z-order curve hash later; calculate polygon bbox\n    if (data.length > 80 * dim) {\n        minX = maxX = data[0];\n        minY = maxY = data[1];\n\n        for (var i = dim; i < outerLen; i += dim) {\n            x = data[i];\n            y = data[i + 1];\n            if (x < minX) minX = x;\n            if (y < minY) minY = y;\n            if (x > maxX) maxX = x;\n            if (y > maxY) maxY = y;\n        }\n\n        // minX, minY and invSize are later used to transform coords into integers for z-order calculation\n        invSize = Math.max(maxX - minX, maxY - minY);\n        invSize = invSize !== 0 ? 32767 / invSize : 0;\n    }\n\n    earcutLinked(outerNode, triangles, dim, minX, minY, invSize, 0);\n\n    return triangles;\n}\n\n// create a circular doubly linked list from polygon points in the specified winding order\nfunction linkedList(data, start, end, dim, clockwise) {\n    var i, last;\n\n    if (clockwise === (signedArea(data, start, end, dim) > 0)) {\n        for (i = start; i < end; i += dim) last = insertNode(i, data[i], data[i + 1], last);\n    } else {\n        for (i = end - dim; i >= start; i -= dim) last = insertNode(i, data[i], data[i + 1], last);\n    }\n\n    if (last && equals(last, last.next)) {\n        removeNode(last);\n        last = last.next;\n    }\n\n    return last;\n}\n\n// eliminate colinear or duplicate points\nfunction filterPoints(start, end) {\n    if (!start) return start;\n    if (!end) end = start;\n\n    var p = start,\n        again;\n    do {\n        again = false;\n\n        if (!p.steiner && (equals(p, p.next) || area(p.prev, p, p.next) === 0)) {\n            removeNode(p);\n            p = end = p.prev;\n            if (p === p.next) break;\n            again = true;\n\n        } else {\n            p = p.next;\n        }\n    } while (again || p !== end);\n\n    return end;\n}\n\n// main ear slicing loop which triangulates a polygon (given as a linked list)\nfunction earcutLinked(ear, triangles, dim, minX, minY, invSize, pass) {\n    if (!ear) return;\n\n    // interlink polygon nodes in z-order\n    if (!pass && invSize) indexCurve(ear, minX, minY, invSize);\n\n    var stop = ear,\n        prev, next;\n\n    // iterate through ears, slicing them one by one\n    while (ear.prev !== ear.next) {\n        prev = ear.prev;\n        next = ear.next;\n\n        if (invSize ? isEarHashed(ear, minX, minY, invSize) : isEar(ear)) {\n            // cut off the triangle\n            triangles.push(prev.i / dim | 0);\n            triangles.push(ear.i / dim | 0);\n            triangles.push(next.i / dim | 0);\n\n            removeNode(ear);\n\n            // skipping the next vertex leads to less sliver triangles\n            ear = next.next;\n            stop = next.next;\n\n            continue;\n        }\n\n        ear = next;\n\n        // if we looped through the whole remaining polygon and can't find any more ears\n        if (ear === stop) {\n            // try filtering points and slicing again\n            if (!pass) {\n                earcutLinked(filterPoints(ear), triangles, dim, minX, minY, invSize, 1);\n\n            // if this didn't work, try curing all small self-intersections locally\n            } else if (pass === 1) {\n                ear = cureLocalIntersections(filterPoints(ear), triangles, dim);\n                earcutLinked(ear, triangles, dim, minX, minY, invSize, 2);\n\n            // as a last resort, try splitting the remaining polygon into two\n            } else if (pass === 2) {\n                splitEarcut(ear, triangles, dim, minX, minY, invSize);\n            }\n\n            break;\n        }\n    }\n}\n\n// check whether a polygon node forms a valid ear with adjacent nodes\nfunction isEar(ear) {\n    var a = ear.prev,\n        b = ear,\n        c = ear.next;\n\n    if (area(a, b, c) >= 0) return false; // reflex, can't be an ear\n\n    // now make sure we don't have other points inside the potential ear\n    var ax = a.x, bx = b.x, cx = c.x, ay = a.y, by = b.y, cy = c.y;\n\n    // triangle bbox; min & max are calculated like this for speed\n    var x0 = ax < bx ? (ax < cx ? ax : cx) : (bx < cx ? bx : cx),\n        y0 = ay < by ? (ay < cy ? ay : cy) : (by < cy ? by : cy),\n        x1 = ax > bx ? (ax > cx ? ax : cx) : (bx > cx ? bx : cx),\n        y1 = ay > by ? (ay > cy ? ay : cy) : (by > cy ? by : cy);\n\n    var p = c.next;\n    while (p !== a) {\n        if (p.x >= x0 && p.x <= x1 && p.y >= y0 && p.y <= y1 &&\n            pointInTriangle(ax, ay, bx, by, cx, cy, p.x, p.y) &&\n            area(p.prev, p, p.next) >= 0) return false;\n        p = p.next;\n    }\n\n    return true;\n}\n\nfunction isEarHashed(ear, minX, minY, invSize) {\n    var a = ear.prev,\n        b = ear,\n        c = ear.next;\n\n    if (area(a, b, c) >= 0) return false; // reflex, can't be an ear\n\n    var ax = a.x, bx = b.x, cx = c.x, ay = a.y, by = b.y, cy = c.y;\n\n    // triangle bbox; min & max are calculated like this for speed\n    var x0 = ax < bx ? (ax < cx ? ax : cx) : (bx < cx ? bx : cx),\n        y0 = ay < by ? (ay < cy ? ay : cy) : (by < cy ? by : cy),\n        x1 = ax > bx ? (ax > cx ? ax : cx) : (bx > cx ? bx : cx),\n        y1 = ay > by ? (ay > cy ? ay : cy) : (by > cy ? by : cy);\n\n    // z-order range for the current triangle bbox;\n    var minZ = zOrder(x0, y0, minX, minY, invSize),\n        maxZ = zOrder(x1, y1, minX, minY, invSize);\n\n    var p = ear.prevZ,\n        n = ear.nextZ;\n\n    // look for points inside the triangle in both directions\n    while (p && p.z >= minZ && n && n.z <= maxZ) {\n        if (p.x >= x0 && p.x <= x1 && p.y >= y0 && p.y <= y1 && p !== a && p !== c &&\n            pointInTriangle(ax, ay, bx, by, cx, cy, p.x, p.y) && area(p.prev, p, p.next) >= 0) return false;\n        p = p.prevZ;\n\n        if (n.x >= x0 && n.x <= x1 && n.y >= y0 && n.y <= y1 && n !== a && n !== c &&\n            pointInTriangle(ax, ay, bx, by, cx, cy, n.x, n.y) && area(n.prev, n, n.next) >= 0) return false;\n        n = n.nextZ;\n    }\n\n    // look for remaining points in decreasing z-order\n    while (p && p.z >= minZ) {\n        if (p.x >= x0 && p.x <= x1 && p.y >= y0 && p.y <= y1 && p !== a && p !== c &&\n            pointInTriangle(ax, ay, bx, by, cx, cy, p.x, p.y) && area(p.prev, p, p.next) >= 0) return false;\n        p = p.prevZ;\n    }\n\n    // look for remaining points in increasing z-order\n    while (n && n.z <= maxZ) {\n        if (n.x >= x0 && n.x <= x1 && n.y >= y0 && n.y <= y1 && n !== a && n !== c &&\n            pointInTriangle(ax, ay, bx, by, cx, cy, n.x, n.y) && area(n.prev, n, n.next) >= 0) return false;\n        n = n.nextZ;\n    }\n\n    return true;\n}\n\n// go through all polygon nodes and cure small local self-intersections\nfunction cureLocalIntersections(start, triangles, dim) {\n    var p = start;\n    do {\n        var a = p.prev,\n            b = p.next.next;\n\n        if (!equals(a, b) && intersects(a, p, p.next, b) && locallyInside(a, b) && locallyInside(b, a)) {\n\n            triangles.push(a.i / dim | 0);\n            triangles.push(p.i / dim | 0);\n            triangles.push(b.i / dim | 0);\n\n            // remove two nodes involved\n            removeNode(p);\n            removeNode(p.next);\n\n            p = start = b;\n        }\n        p = p.next;\n    } while (p !== start);\n\n    return filterPoints(p);\n}\n\n// try splitting polygon into two and triangulate them independently\nfunction splitEarcut(start, triangles, dim, minX, minY, invSize) {\n    // look for a valid diagonal that divides the polygon into two\n    var a = start;\n    do {\n        var b = a.next.next;\n        while (b !== a.prev) {\n            if (a.i !== b.i && isValidDiagonal(a, b)) {\n                // split the polygon in two by the diagonal\n                var c = splitPolygon(a, b);\n\n                // filter colinear points around the cuts\n                a = filterPoints(a, a.next);\n                c = filterPoints(c, c.next);\n\n                // run earcut on each half\n                earcutLinked(a, triangles, dim, minX, minY, invSize, 0);\n                earcutLinked(c, triangles, dim, minX, minY, invSize, 0);\n                return;\n            }\n            b = b.next;\n        }\n        a = a.next;\n    } while (a !== start);\n}\n\n// link every hole into the outer loop, producing a single-ring polygon without holes\nfunction eliminateHoles(data, holeIndices, outerNode, dim) {\n    var queue = [],\n        i, len, start, end, list;\n\n    for (i = 0, len = holeIndices.length; i < len; i++) {\n        start = holeIndices[i] * dim;\n        end = i < len - 1 ? holeIndices[i + 1] * dim : data.length;\n        list = linkedList(data, start, end, dim, false);\n        if (list === list.next) list.steiner = true;\n        queue.push(getLeftmost(list));\n    }\n\n    queue.sort(compareX);\n\n    // process holes from left to right\n    for (i = 0; i < queue.length; i++) {\n        outerNode = eliminateHole(queue[i], outerNode);\n    }\n\n    return outerNode;\n}\n\nfunction compareX(a, b) {\n    return a.x - b.x;\n}\n\n// find a bridge between vertices that connects hole with an outer ring and and link it\nfunction eliminateHole(hole, outerNode) {\n    var bridge = findHoleBridge(hole, outerNode);\n    if (!bridge) {\n        return outerNode;\n    }\n\n    var bridgeReverse = splitPolygon(bridge, hole);\n\n    // filter collinear points around the cuts\n    filterPoints(bridgeReverse, bridgeReverse.next);\n    return filterPoints(bridge, bridge.next);\n}\n\n// David Eberly's algorithm for finding a bridge between hole and outer polygon\nfunction findHoleBridge(hole, outerNode) {\n    var p = outerNode,\n        hx = hole.x,\n        hy = hole.y,\n        qx = -Infinity,\n        m;\n\n    // find a segment intersected by a ray from the hole's leftmost point to the left;\n    // segment's endpoint with lesser x will be potential connection point\n    do {\n        if (hy <= p.y && hy >= p.next.y && p.next.y !== p.y) {\n            var x = p.x + (hy - p.y) * (p.next.x - p.x) / (p.next.y - p.y);\n            if (x <= hx && x > qx) {\n                qx = x;\n                m = p.x < p.next.x ? p : p.next;\n                if (x === hx) return m; // hole touches outer segment; pick leftmost endpoint\n            }\n        }\n        p = p.next;\n    } while (p !== outerNode);\n\n    if (!m) return null;\n\n    // look for points inside the triangle of hole point, segment intersection and endpoint;\n    // if there are no points found, we have a valid connection;\n    // otherwise choose the point of the minimum angle with the ray as connection point\n\n    var stop = m,\n        mx = m.x,\n        my = m.y,\n        tanMin = Infinity,\n        tan;\n\n    p = m;\n\n    do {\n        if (hx >= p.x && p.x >= mx && hx !== p.x &&\n                pointInTriangle(hy < my ? hx : qx, hy, mx, my, hy < my ? qx : hx, hy, p.x, p.y)) {\n\n            tan = Math.abs(hy - p.y) / (hx - p.x); // tangential\n\n            if (locallyInside(p, hole) &&\n                (tan < tanMin || (tan === tanMin && (p.x > m.x || (p.x === m.x && sectorContainsSector(m, p)))))) {\n                m = p;\n                tanMin = tan;\n            }\n        }\n\n        p = p.next;\n    } while (p !== stop);\n\n    return m;\n}\n\n// whether sector in vertex m contains sector in vertex p in the same coordinates\nfunction sectorContainsSector(m, p) {\n    return area(m.prev, m, p.prev) < 0 && area(p.next, m, m.next) < 0;\n}\n\n// interlink polygon nodes in z-order\nfunction indexCurve(start, minX, minY, invSize) {\n    var p = start;\n    do {\n        if (p.z === 0) p.z = zOrder(p.x, p.y, minX, minY, invSize);\n        p.prevZ = p.prev;\n        p.nextZ = p.next;\n        p = p.next;\n    } while (p !== start);\n\n    p.prevZ.nextZ = null;\n    p.prevZ = null;\n\n    sortLinked(p);\n}\n\n// Simon Tatham's linked list merge sort algorithm\n// http://www.chiark.greenend.org.uk/~sgtatham/algorithms/listsort.html\nfunction sortLinked(list) {\n    var i, p, q, e, tail, numMerges, pSize, qSize,\n        inSize = 1;\n\n    do {\n        p = list;\n        list = null;\n        tail = null;\n        numMerges = 0;\n\n        while (p) {\n            numMerges++;\n            q = p;\n            pSize = 0;\n            for (i = 0; i < inSize; i++) {\n                pSize++;\n                q = q.nextZ;\n                if (!q) break;\n            }\n            qSize = inSize;\n\n            while (pSize > 0 || (qSize > 0 && q)) {\n\n                if (pSize !== 0 && (qSize === 0 || !q || p.z <= q.z)) {\n                    e = p;\n                    p = p.nextZ;\n                    pSize--;\n                } else {\n                    e = q;\n                    q = q.nextZ;\n                    qSize--;\n                }\n\n                if (tail) tail.nextZ = e;\n                else list = e;\n\n                e.prevZ = tail;\n                tail = e;\n            }\n\n            p = q;\n        }\n\n        tail.nextZ = null;\n        inSize *= 2;\n\n    } while (numMerges > 1);\n\n    return list;\n}\n\n// z-order of a point given coords and inverse of the longer side of data bbox\nfunction zOrder(x, y, minX, minY, invSize) {\n    // coords are transformed into non-negative 15-bit integer range\n    x = (x - minX) * invSize | 0;\n    y = (y - minY) * invSize | 0;\n\n    x = (x | (x << 8)) & 0x00FF00FF;\n    x = (x | (x << 4)) & 0x0F0F0F0F;\n    x = (x | (x << 2)) & 0x33333333;\n    x = (x | (x << 1)) & 0x55555555;\n\n    y = (y | (y << 8)) & 0x00FF00FF;\n    y = (y | (y << 4)) & 0x0F0F0F0F;\n    y = (y | (y << 2)) & 0x33333333;\n    y = (y | (y << 1)) & 0x55555555;\n\n    return x | (y << 1);\n}\n\n// find the leftmost node of a polygon ring\nfunction getLeftmost(start) {\n    var p = start,\n        leftmost = start;\n    do {\n        if (p.x < leftmost.x || (p.x === leftmost.x && p.y < leftmost.y)) leftmost = p;\n        p = p.next;\n    } while (p !== start);\n\n    return leftmost;\n}\n\n// check if a point lies within a convex triangle\nfunction pointInTriangle(ax, ay, bx, by, cx, cy, px, py) {\n    return (cx - px) * (ay - py) >= (ax - px) * (cy - py) &&\n           (ax - px) * (by - py) >= (bx - px) * (ay - py) &&\n           (bx - px) * (cy - py) >= (cx - px) * (by - py);\n}\n\n// check if a diagonal between two polygon nodes is valid (lies in polygon interior)\nfunction isValidDiagonal(a, b) {\n    return a.next.i !== b.i && a.prev.i !== b.i && !intersectsPolygon(a, b) && // dones't intersect other edges\n           (locallyInside(a, b) && locallyInside(b, a) && middleInside(a, b) && // locally visible\n            (area(a.prev, a, b.prev) || area(a, b.prev, b)) || // does not create opposite-facing sectors\n            equals(a, b) && area(a.prev, a, a.next) > 0 && area(b.prev, b, b.next) > 0); // special zero-length case\n}\n\n// signed area of a triangle\nfunction area(p, q, r) {\n    return (q.y - p.y) * (r.x - q.x) - (q.x - p.x) * (r.y - q.y);\n}\n\n// check if two points are equal\nfunction equals(p1, p2) {\n    return p1.x === p2.x && p1.y === p2.y;\n}\n\n// check if two segments intersect\nfunction intersects(p1, q1, p2, q2) {\n    var o1 = sign(area(p1, q1, p2));\n    var o2 = sign(area(p1, q1, q2));\n    var o3 = sign(area(p2, q2, p1));\n    var o4 = sign(area(p2, q2, q1));\n\n    if (o1 !== o2 && o3 !== o4) return true; // general case\n\n    if (o1 === 0 && onSegment(p1, p2, q1)) return true; // p1, q1 and p2 are collinear and p2 lies on p1q1\n    if (o2 === 0 && onSegment(p1, q2, q1)) return true; // p1, q1 and q2 are collinear and q2 lies on p1q1\n    if (o3 === 0 && onSegment(p2, p1, q2)) return true; // p2, q2 and p1 are collinear and p1 lies on p2q2\n    if (o4 === 0 && onSegment(p2, q1, q2)) return true; // p2, q2 and q1 are collinear and q1 lies on p2q2\n\n    return false;\n}\n\n// for collinear points p, q, r, check if point q lies on segment pr\nfunction onSegment(p, q, r) {\n    return q.x <= Math.max(p.x, r.x) && q.x >= Math.min(p.x, r.x) && q.y <= Math.max(p.y, r.y) && q.y >= Math.min(p.y, r.y);\n}\n\nfunction sign(num) {\n    return num > 0 ? 1 : num < 0 ? -1 : 0;\n}\n\n// check if a polygon diagonal intersects any polygon segments\nfunction intersectsPolygon(a, b) {\n    var p = a;\n    do {\n        if (p.i !== a.i && p.next.i !== a.i && p.i !== b.i && p.next.i !== b.i &&\n                intersects(p, p.next, a, b)) return true;\n        p = p.next;\n    } while (p !== a);\n\n    return false;\n}\n\n// check if a polygon diagonal is locally inside the polygon\nfunction locallyInside(a, b) {\n    return area(a.prev, a, a.next) < 0 ?\n        area(a, b, a.next) >= 0 && area(a, a.prev, b) >= 0 :\n        area(a, b, a.prev) < 0 || area(a, a.next, b) < 0;\n}\n\n// check if the middle point of a polygon diagonal is inside the polygon\nfunction middleInside(a, b) {\n    var p = a,\n        inside = false,\n        px = (a.x + b.x) / 2,\n        py = (a.y + b.y) / 2;\n    do {\n        if (((p.y > py) !== (p.next.y > py)) && p.next.y !== p.y &&\n                (px < (p.next.x - p.x) * (py - p.y) / (p.next.y - p.y) + p.x))\n            inside = !inside;\n        p = p.next;\n    } while (p !== a);\n\n    return inside;\n}\n\n// link two polygon vertices with a bridge; if the vertices belong to the same ring, it splits polygon into two;\n// if one belongs to the outer ring and another to a hole, it merges it into a single ring\nfunction splitPolygon(a, b) {\n    var a2 = new Node(a.i, a.x, a.y),\n        b2 = new Node(b.i, b.x, b.y),\n        an = a.next,\n        bp = b.prev;\n\n    a.next = b;\n    b.prev = a;\n\n    a2.next = an;\n    an.prev = a2;\n\n    b2.next = a2;\n    a2.prev = b2;\n\n    bp.next = b2;\n    b2.prev = bp;\n\n    return b2;\n}\n\n// create a node and optionally link it with previous one (in a circular doubly linked list)\nfunction insertNode(i, x, y, last) {\n    var p = new Node(i, x, y);\n\n    if (!last) {\n        p.prev = p;\n        p.next = p;\n\n    } else {\n        p.next = last.next;\n        p.prev = last;\n        last.next.prev = p;\n        last.next = p;\n    }\n    return p;\n}\n\nfunction removeNode(p) {\n    p.next.prev = p.prev;\n    p.prev.next = p.next;\n\n    if (p.prevZ) p.prevZ.nextZ = p.nextZ;\n    if (p.nextZ) p.nextZ.prevZ = p.prevZ;\n}\n\nfunction Node(i, x, y) {\n    // vertex index in coordinates array\n    this.i = i;\n\n    // vertex coordinates\n    this.x = x;\n    this.y = y;\n\n    // previous and next vertex nodes in a polygon ring\n    this.prev = null;\n    this.next = null;\n\n    // z-order curve value\n    this.z = 0;\n\n    // previous and next nodes in z-order\n    this.prevZ = null;\n    this.nextZ = null;\n\n    // indicates whether this is a steiner point\n    this.steiner = false;\n}\n\n// return a percentage difference between the polygon area and its triangulation area;\n// used to verify correctness of triangulation\nearcut.deviation = function (data, holeIndices, dim, triangles) {\n    var hasHoles = holeIndices && holeIndices.length;\n    var outerLen = hasHoles ? holeIndices[0] * dim : data.length;\n\n    var polygonArea = Math.abs(signedArea(data, 0, outerLen, dim));\n    if (hasHoles) {\n        for (var i = 0, len = holeIndices.length; i < len; i++) {\n            var start = holeIndices[i] * dim;\n            var end = i < len - 1 ? holeIndices[i + 1] * dim : data.length;\n            polygonArea -= Math.abs(signedArea(data, start, end, dim));\n        }\n    }\n\n    var trianglesArea = 0;\n    for (i = 0; i < triangles.length; i += 3) {\n        var a = triangles[i] * dim;\n        var b = triangles[i + 1] * dim;\n        var c = triangles[i + 2] * dim;\n        trianglesArea += Math.abs(\n            (data[a] - data[c]) * (data[b + 1] - data[a + 1]) -\n            (data[a] - data[b]) * (data[c + 1] - data[a + 1]));\n    }\n\n    return polygonArea === 0 && trianglesArea === 0 ? 0 :\n        Math.abs((trianglesArea - polygonArea) / polygonArea);\n};\n\nfunction signedArea(data, start, end, dim) {\n    var sum = 0;\n    for (var i = start, j = end - dim; i < end; i += dim) {\n        sum += (data[j] - data[i]) * (data[i + 1] + data[j + 1]);\n        j = i;\n    }\n    return sum;\n}\n\n// turn a polygon in a multi-dimensional array form (e.g. as in GeoJSON) into a form Earcut accepts\nearcut.flatten = function (data) {\n    var dim = data[0][0].length,\n        result = {vertices: [], holes: [], dimensions: dim},\n        holeIndex = 0;\n\n    for (var i = 0; i < data.length; i++) {\n        for (var j = 0; j < data[i].length; j++) {\n            for (var d = 0; d < dim; d++) result.vertices.push(data[i][j][d]);\n        }\n        if (i > 0) {\n            holeIndex += data[i - 1].length;\n            result.holes.push(holeIndex);\n        }\n    }\n    return result;\n};\n","const WebglGradientTextureCache = {};\n// 渐变\nclass WebglGradient {\n    // type:[linear= 线性渐变,radial=放射性渐变] \n    constructor(type='linear', params={}) {\n        this.type = type || 'linear';\n\n        this.x1 = params.x1 || 0;\n        this.y1 = params.y1 || 0;\n        this.r1 = params.r1 || 0;\n        this.x2 = params.x2 || 0;\n        this.y2 = params.y2 || 0;\n        this.r2 = params.r2 || 0;\n\n        this.bounds = params.bounds || {\n            left: 0,\n            top: 0,\n            width: 0,\n            height: 0\n        }\n\n        this.control = params.control;\n\n        this.stops = [];\n        this.init();\n    }\n\n    init() {\n        const dx = this.x2 - this.x1;\n        const dy = this.y2 - this.y1;\n\n        if(this.type === 'radial') {\n            this.length = this.r2 - this.r1;\n        }\n        else if(dx === 0 && dy === 0) {\n            this.length = 0;\n        }\n        else {\n            // 渐变中心的距离\n            this.length = Math.sqrt(Math.pow(dx, 2), Math.pow(dy, 2));\n            this.sin = dy / this.length;\n            this.cos = dx / this.length;\n        }\n    }\n\n    // 渐变颜色\n    addColorStop(offset, color) {\n        this.stops.push({\n            offset,\n            color\n        });\n    }\n\n    // 转为渐变为纹理\n    toImageData(control, bounds, points=null) {\n        //const key = this.key || this.toString();\n        //if(WebglGradientTextureCache[key]) return WebglGradientTextureCache[key];\n        if(!control.textureContext) {\n            return null;\n        }\n        let gradient = null;\n        if(this.type === 'linear') {\n            gradient = control.textureContext.createLinearGradient(this.x1, this.y1, this.x2, this.y2);\n        }\n        else {\n            gradient = control.textureContext.createRadialGradient(this.x1, this.y1, this.r1, this.x2, this.y2, this.r2);\n        }\n        this.stops.forEach(function(s, i) {\t\n            const c = control.graph.utils.toColor(s.color);\n            gradient && gradient.addColorStop(s.offset, c);\t\t\n        });\n        \n        const data = control.toFillTexture(gradient, bounds, points);\n\n        //WebglGradientTextureCache[key] = data;\n\n        return data;\n    }\n\n    // 根据绘制图形的坐标计算出对应点的颜色\n    /*\n    toPointColors(points) {\n        const stops = this.getStops();\n        const colors = [];\n        for(let i=0; i<points.length; i+=2) {\n            const p = {\n                x: points[i],\n                y: points[i+1]\n            }\n            if(this.type === 'radial') {\n                const dx = p.x - this.x1;\n                const dy = p.y - this.y1;\n                const len = Math.sqrt(Math.pow(dx, 2) + Math.pow(dy, 2));\n                const rang = this.getStopRange(len, stops);\n                if(!rang.start && rang.end) {\n                    colors.push(rang.end.color);\n                }\n                else if(!rang.end && rang.start) {\n                    colors.push(rang.start.color);\n                }\n                else {\n                    const rangLength = rang.end.length - rang.start.length;\n                    const offlen = len - rang.start.length;\n                    const per = offlen / rangLength;\n                    const color = {\n                        r: rang.start.color.r + (rang.end.color.r - rang.start.color.r) * per,\n                        g: rang.start.color.g + (rang.end.color.g - rang.start.color.g) * per,\n                        b: rang.start.color.b + (rang.end.color.b - rang.start.color.b) * per,\n                        a: rang.start.color.a + (rang.end.color.a - rang.start.color.a) * per,\n                    };\n                    colors.push(color);\n                }\n            }\n        }\n        return colors;\n    }\n*/\n    // 根据起点距离获取边界stop\n    /*\n    getStopRange(len, stops) {\n        const res = {};\n        for(const s of stops) {\n            if(s.length <= len) {\n                res.start = s;\n            }\n            else {\n                res.end = s;\n            }\n        }\n        return res;\n    }\n\n    // 根据stop计算offset长度\n    getStops() {\n        const stops = this.stops.sort((p1, p2) => p1.offset - p2.offset); // 渐变色排序从小于大\n        for(const s of stops) {\n            \n            const color = typeof s.color === 'string'? this.control.graph.utils.hexToRGBA(s.color) : s.color;\n            console.log(s, color);\n            s.color = this.control.graph.utils.rgbToDecimal(color);\n            s.length = s.offset * this.length;\n        }\n        return stops;\n    }\n*/\n    /**\n\t * 转换为渐变的字符串表达\n\t *\n\t * @method toString\n\t * @for jmGradient\n\t * @return {string} linear-gradient(x1 y1 x2 y2, color1 step, color2 step, ...);\t//radial-gradient(x1 y1 r1 x2 y2 r2, color1 step,color2 step, ...);\n\t */\n\ttoString() {\n\t\tlet str = this.type + '-gradient(';\n\t\tif(this.type == 'linear') {\n\t\t\tstr += this.x1 + ' ' + this.y1 + ' ' + this.x2 + ' ' + this.y2;\n\t\t}\n\t\telse {\n\t\t\tstr += this.x1 + ' ' + this.y1 + ' ' + this.r1 + ' ' + this.x2 + ' ' + this.y2 + ' ' + this.r2;\n\t\t}\n\t\t//颜色渐变\n\t\tthis.stops.forEach(function(s) {\t\n\t\t\tstr += ',' + s.color + ' ' + s.offset;\n\t\t});\n\t\treturn str + ')';\n\t}\n}\n\nexport default WebglGradient;","// 生成着色器\n// type: gl.VERTEX_SHADER 顶点着色器  , gl.FRAGMENT_SHADER  片段着色器\n// src: 着色器代码\nfunction createShader(gl, type, src) {\n    const shader = gl.createShader(type) // 创建一个顶点着色器\n    gl.shaderSource(shader, src); // 编写顶点着色器代码\n    gl.compileShader(shader); // 编译着色器\n\n    return shader;\n}\n\nexport  {\n    createShader\n}","\nconst GLSL_TO_SIZE = {\n    'float':    1,\n    'vec2':     2,\n    'vec3':     3,\n    'vec4':     4,\n\n    'int':      1,\n    'ivec2':    2,\n    'ivec3':    3,\n    'ivec4':    4,\n\n    'bool':     1,\n    'bvec2':    2,\n    'bvec3':    3,\n    'bvec4':    4,\n\n    'mat2':     4,\n    'mat3':     9,\n    'mat4':     16,\n\n    'sampler2D':  1\n};\n\n/**\n * @class\n * @memberof PIXI.glCore.shader\n * @param type {String}\n * @return {Number}\n */\nconst mapSize = function(type) { \n    return GLSL_TO_SIZE[type];\n};\n\n\n\n\nexport {\n    mapSize\n}\n","\nvar GL_TABLE = null;\n\nconst GL_TO_GLSL_TYPES = {\n  'FLOAT':       'float',\n  'FLOAT_VEC2':  'vec2',\n  'FLOAT_VEC3':  'vec3',\n  'FLOAT_VEC4':  'vec4',\n\n  'INT':         'int',\n  'INT_VEC2':    'ivec2',\n  'INT_VEC3':    'ivec3',\n  'INT_VEC4':    'ivec4',\n  \n  'BOOL':        'bool',\n  'BOOL_VEC2':   'bvec2',\n  'BOOL_VEC3':   'bvec3',\n  'BOOL_VEC4':   'bvec4',\n  \n  'FLOAT_MAT2':  'mat2',\n  'FLOAT_MAT3':  'mat3',\n  'FLOAT_MAT4':  'mat4',\n  \n  'SAMPLER_2D':  'sampler2D'  \n};\n\nconst mapType = function(gl, type) {\n    if(!GL_TABLE) {\n        const typeNames = Object.keys(GL_TO_GLSL_TYPES);\n        GL_TABLE = {};\n        for(let i = 0; i < typeNames.length; ++i) {\n            const tn = typeNames[i];\n            GL_TABLE[ gl[tn] ] = GL_TO_GLSL_TYPES[tn];\n        }\n    }\n\n  return GL_TABLE[type];\n};\n\n\nexport {\n  mapType\n}\n","import {\n    createShader\n} from './shader.js';\nimport {\n    mapSize\n} from './mapSize.js';\nimport {\n    mapType\n} from './mapType.js';\n\n// 创建程序\nfunction createProgram(gl, vertexSrc, fragmentSrc) {\n    // 创建顶点着色器\n    const vertexShader = createShader(gl, gl.VERTEX_SHADER, vertexSrc);\n    // 创建片段着色器\n    const fragmentShader = createShader(gl, gl.FRAGMENT_SHADER, fragmentSrc);\n\n    const program = gl.createProgram() // 创建一个程序\n    gl.attachShader(program, vertexShader) // 添加顶点着色器\n    gl.attachShader(program, fragmentShader) // 添加片元着色器\n    gl.linkProgram(program) // 连接 program 中的着色器\n\n    // 检查程序链接状态\n    if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {\n        console.error('PError: Could not initialize shader.');\n        console.error('gl.VALIDATE_STATUS', gl.getProgramParameter(program, gl.VALIDATE_STATUS));\n        console.error('gl.getError()', gl.getError());\n\n        // if there is a program info log, log it\n        if (gl.getProgramInfoLog(program) !== '') {\n            console.warn('Warning: gl.getProgramInfoLog()', gl.getProgramInfoLog(program));\n        }\n\n        gl.deleteProgram(program);\n    }\n\n    useProgram(gl, program);\n\n    // clean up some shaders\n    gl.deleteShader(vertexShader);\n    gl.deleteShader(fragmentShader);\n\n    const attrs = extractAttributes(gl, program);\n    const uniforms = extractUniforms(gl, program);\n    \n    return {\n        program,\n        attrs,\n        uniforms\n    };\n}\n\n// 采用program\nfunction useProgram(gl, program) {\n    return gl.useProgram(program); // 告诉 webgl 用这个 program 进行渲染\n}\n\nfunction extractAttributes(gl, program) {\n    const attributes = {};\n\n    const count = gl.getProgramParameter(program, gl.ACTIVE_ATTRIBUTES);\n\n    for (let i = 0; i < count; i++){\n        const attribData = gl.getActiveAttrib(program, i);\n        const type = mapType(gl, attribData.type);\n        attributes[attribData.name] = {\n            attribData,\n            size: mapSize(type),\n            type,\n            location: gl.getAttribLocation(program, attribData.name),            \n        };\n    }\n\n    return attributes;\n}\n\nfunction extractUniforms(gl, program) {\n\tconst uniforms = {};\n\n    const count = gl.getProgramParameter(program, gl.ACTIVE_UNIFORMS);\n\n    for (let i = 0; i < count; i++) {\n    \tconst uniformData = gl.getActiveUniform(program, i);\n    \tconst name = uniformData.name.replace(/\\[.*?\\]/, \"\");\n        const type = mapType(gl, uniformData.type );\n\n    \tuniforms[name] = {\n            uniformData,\n    \t\ttype: type,\n    \t\tsize: uniformData.size,\n    \t\tlocation: gl.getUniformLocation(program, name),\n    \t};\n    }\n\n\treturn uniforms;\n};\n\n\n// 把缓冲区的值写入变量\n// size: 组成数量，必须是1，2，3或4.  每个单元由多少个数组成\n// strip: 步长 数组中一行长度，0 表示数据是紧密的没有空隙，让OpenGL决定具体步长\n// offset: 字节偏移量，必须是类型的字节长度的倍数。\n// dataType: 每个元素的数据类型\nfunction writeVertexAttrib(gl, buffer, attr, size=2, strip=0, offset=0, dataType=gl.FLOAT) {\n    gl.bindBuffer(buffer.type, buffer.buffer);\n    gl.vertexAttribPointer( // 告诉 OpenGL 如何从 Buffer 中获取数据\n            attr.location, // 顶点属性的索引\n            size, // 组成数量，必须是1，2，3或4。我们只提供了 x 和 y\n            dataType,\n            false, // 是否归一化到特定的范围，对 FLOAT 类型数据设置无效\n            strip * buffer.unitSize,\n            offset\n        );\n    gl.enableVertexAttribArray(attr.location);\n    return buffer;\n}\n\nfunction disableVertexAttribArray(gl, attr) {\n    return gl.disableVertexAttribArray(attr.location);\n}\n\nfunction getAttribLocation(gl, program, name) {\n    return gl.getAttribLocation(program, name);\n}\n\nfunction getUniformLocation(gl, program, name) {\n    return gl.getUniformLocation(program, name);\n}\n\nexport {\n    createProgram,\n    useProgram,\n    getAttribLocation,\n    getUniformLocation,\n    extractAttributes,\n    extractUniforms,\n    writeVertexAttrib,\n    disableVertexAttribArray\n}","\n// 创建缓冲区\nfunction createBuffer(gl, data, type=gl.ARRAY_BUFFER, drawType=gl.STATIC_DRAW) {\n    //先创建一个缓存对象\n    const buffer = gl.createBuffer();\n    if(!buffer) {\n        throw Error('创建缓冲区对象失败');\n    }\n    //说明缓存对象保存的类型\n    gl.bindBuffer(type, buffer);\n    //写入坐标数据\n    // 因为会将数据发送到 GPU，为了省去数据解析，这里使用 Float32Array 直接传送数据\n    // data.buffer这里要使用data.buffer，否则在edge下可能导至数据发生较大的改变\n    gl.bufferData(type, data.buffer || data, drawType); // 表示缓冲区的内容不会经常更改\n    return {\n        type,\n        drawType,\n        buffer,\n        // 获取到数组中单个元素的字节数\n        unitSize: data.BYTES_PER_ELEMENT\n    };\n}\n\n// 创建float32的buffer\nfunction createFloat32Buffer(gl, data, type=gl.ARRAY_BUFFER, drawType=gl.STATIC_DRAW) {\n    const vertices = new Float32Array(data);\n    const buffer = createBuffer(gl, vertices, type, drawType);\n    return buffer;\n}\n\n// 创建uint16的bugger\nfunction createUint16Buffer(gl, data, type=gl.ARRAY_BUFFER, drawType=gl.STATIC_DRAW) {\n    const vertices = new Uint16Array(data);\n    const buffer = createBuffer(gl, vertices, type, drawType);\n    return buffer;\n}\n\n// 释放\nfunction deleteBuffer(gl, buffer) {\n    gl.deleteBuffer(buffer.buffer || buffer);\n}\n\n\nexport {\n    createBuffer,\n    createUint16Buffer,\n    createFloat32Buffer,\n    deleteBuffer,\n}","\n// 生成纹理\nfunction create2DTexture(gl) {\n    const texture = gl.createTexture();\n    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, 1); // 图像反转Y轴\n    gl.activeTexture(gl.TEXTURE0); // 激活纹理单元\n    gl.bindTexture(gl.TEXTURE_2D, texture); // 绑定纹理对象\n    \n    //gl.generateMipmap(gl.TEXTURE_2D);\n    gl.texParameterf(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST); // 放大处理方式  // LINEAR  / NEAREST\n    gl.texParameterf(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST); // 缩小处理方式\n    gl.texParameterf(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE); // 水平平铺方式\n    gl.texParameterf(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE); // 竖直平铺方式\n\n    \n    return texture;\n}\n\n// 创建图片纹理\nfunction createImgTexture(gl, img) {\n    const texture = create2DTexture(gl);\n\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, img) // 配置纹理图像\n    return {\n        texture\n    };\n}\n\n// 用像素值来绘制纹理\nfunction createDataTexture(gl, pixels) {\n    const data = new Uint8Array(pixels.data || pixels);\n\n    const texture = create2DTexture(gl);\n\n    gl.texImage2D(\n        gl.TEXTURE_2D, // 纹理目标\n        0, // 细节级别,指定详细级别。0 级是基本图像等级，n 级是第 n 个金字塔简化级。\n        gl.RGBA, // 纹理内部格式\n        pixels.width || 1, // 指定纹理的宽度\n        pixels.height || 1, // 指定纹理的高度\n        0, // 指定纹理的边框宽度。必须为 0。\n        gl.RGBA, // 源图像数据格式\n        gl.UNSIGNED_BYTE, // 纹理数据类型\n        data // 数据\n      );\n    return {\n        texture\n    };\n}\n\n// 删除纹理\nfunction deleteTexture(gl, texture) {\n    return gl.deleteTexture(texture);\n}\n\nexport {\n    create2DTexture,\n    createImgTexture,\n    createDataTexture,\n    deleteTexture\n}","\nimport earcut from '../earcut.js';\nimport webglGradient from './gradient.js';\nimport {\n    createProgram,\n    useProgram,\n    writeVertexAttrib,\n    disableVertexAttribArray\n} from './core/program.js';\n\nimport {\n    createFloat32Buffer,\n    createUint16Buffer,\n    deleteBuffer,\n} from './core/buffer.js';\n\nimport {\n    create2DTexture,\n    createImgTexture,\n    createDataTexture,\n    deleteTexture\n} from './core/texture.js';\n\n// 把canvas坐标转为webgl坐标系\nconst convertPointSource = `\n    vec4 translatePosition(vec4 point, float x, float y) {\n        point.x = (point.x-x)/x;\n        point.y = (y-point.y)/y;\n        return point;\n    }`;\n// 把纹理的canvas坐标转为纹理的坐标系\nconst convertTexturePosition = `\n    vec2 translateTexturePosition(in vec2 point, vec4 bounds) {\n        point.x = (point.x-bounds.x)/bounds.z; // 离左上角位置的X长比上纹理宽 0-1\n        point.y = 1.0-(point.y-bounds.y)/bounds.w; // 离左上角位置的Y长比上高，因为纹理坐标是左下角起，所以要用1-\n        return point;\n    }`;\n\n// path顶点着色器源码\nconst pathVertexSource = `\n    attribute vec4 a_position;\n    attribute vec4 a_color;\n    attribute vec2 a_text_coord;\n    uniform vec2 a_center_point; // 当前canvas的中心位置\n    uniform float a_point_size; // 点的大小\n    uniform int a_type;\n    varying vec4 v_color;\n    varying vec2 v_text_coord;\n    varying float v_type;\n\n    ${convertPointSource}\n\n    void main() {\n        gl_PointSize = a_point_size == 0.0? 1.0 : a_point_size;\n        v_type = float(a_type);\n        vec4 pos = translatePosition(a_position, a_center_point.x, a_center_point.y);\n        gl_Position = pos;\n        v_color = a_color;\n        if(a_type == 2) {\n            v_text_coord = a_text_coord;\n        }\n    }\n`;\n// path 片段着色器源码\nconst pathFragmentSource = `\n    precision mediump float;\n    uniform sampler2D u_sample;\n    uniform vec4 v_texture_bounds; // 纹理的左上坐标和大小 x,y,z,w\n    uniform vec4 v_single_color;\n    varying float v_type;\n    varying vec4 v_color;\n    varying vec2 v_text_coord;\n\n    ${convertTexturePosition}\n\n    void main() {\n        // 如果是fill，则直接填充颜色\n        if(v_type == 1.0) {\n            gl_FragColor = v_single_color;\n        }\n        // 渐变色\n        else if(v_type == 3.0) {\n            gl_FragColor = v_color;\n        }\n        else if(v_type == 2.0) {\n            vec2 pos = translateTexturePosition(v_text_coord, v_texture_bounds);\n            gl_FragColor = texture2D(u_sample, pos);\n        }\n        else {\n            float r = distance(gl_PointCoord, vec2(0.5, 0.5));\n            //根据距离设置片元\n            if(r <= 0.5){\n                // 方形区域片元距离几何中心半径小于0.5，像素颜色设置红色\n                gl_FragColor = v_single_color;\n            }else {\n                // 方形区域距离几何中心半径不小于0.5的片元剪裁舍弃掉：\n                discard;\n            }\n        }\n    }\n`;\n\nclass WeblBase {\n    constructor(graph, option) {\n        this.graph = graph;\n        this.option = option || {};\n        this.style = {\n            globalAlpha: 1\n        };\n    }\n\n    get context() {\n        if(this.graph) return this.graph.context;\n    }\n\n    // 纹理绘制canvas\n    get textureCanvas() {\n        let canvas = this.graph.textureCanvas;\n        if(!canvas) {\n            if(typeof document === 'undefined') return null;\n            canvas = this.graph.textureCanvas = document.createElement('canvas');\n        }\n        return canvas;\n    }\n    // 纹理绘制canvas ctx\n    get textureContext() {\n        const ctx = this.textureCanvas.ctx || (this.textureCanvas.ctx = this.textureCanvas.getContext('2d', {\n            willReadFrequently: true\n        }));\n        return ctx;\n    }\n\n    // i当前程序\n    get program() {\n        // 默认所有path用同一个编译好的program\n        return this.graph.context.pathProgram || (this.graph.context.pathProgram=this.createProgram(pathVertexSource, pathFragmentSource));\n    }\n\n    // 设置样式\n    setStyle(style = this.style, value = '') {\n\n        if(typeof style === 'string') {\n            const obj = {};\n            obj[style] = value;\n            style = obj;\n        }\n       /*\n        // 设置线条颜色或填充色\n        if(style.strokeStyle) {\n            let color = style.strokeStyle;\n            if(typeof color === 'string') color = this.graph.utils.hexToRGBA(color);\n            this.style.strokeStyle = this.graph.utils.rgbToDecimal(color);\n            delete style.strokeStyle;\n        }\n        else if(style.fillStyle) {\n            let color = style.fillStyle;\n            if(this.isGradient(color)) {\n                this.style.fillStyle = color;\n            }\n            else {\n                if(typeof color === 'string') color = this.graph.utils.hexToRGBA(color);\n                this.style.fillStyle =  this.graph.utils.rgbToDecimal(color);\n            }\n            delete style.fillStyle;\n        } */       \n\n        this.style = {\n            ...this.style,\n            ...style\n        }\n    }\n\n    // 把传统颜色转为webgl识别的\n    convertColor(color) {\n        if(this.isGradient(color)) return color;\n        if(typeof color === 'string') color = this.graph.utils.hexToRGBA(color);\n        return this.graph.utils.rgbToDecimal(color);\n    }\n\n    setTextureStyle(style, value='') {\n        \n        if(typeof style === 'string') {\n            if(['fillStyle', 'strokeStyle', 'shadowColor'].indexOf(style) > -1) {\n                value = this.graph.utils.toColor(value);\n            }\n            this.textureContext[style] = value;\n        }\n        else {\n            for(const name in style) {\n                if(name === 'constructor') continue;\n                this.setTextureStyle(name, style[name]);\n            }\n        }\n    }\n\n    // 创建程序\n    createProgram(vertexSrc, fragmentSrc) {        \n        this.context.lineWidth(1);\n        return createProgram(this.context, vertexSrc, fragmentSrc);\n    }\n\n    // 指定使用某个程序\n    useProgram(program=this.program) {\n        program = program.program || program;\n        if(this.context.__curent_program === program) return program;\n        useProgram(this.context, program.program || program);\n        this.context.__curent_program = program;\n        return program;\n    }\n\n    getAttribLocation(name) {\n        return this.context.getAttribLocation(this.program.program, name);\n    }\n    \n    getUniformLocation(name) {\n        return this.context.getUniformLocation(this.program.program, name);\n    }\n\n    // 把缓冲区的值写入变量\n    // buffer: 缓冲区\n    // size: 组成数量，必须是1，2，3或4.  每个单元由多少个数组成\n    // strip: 步长 数组中一行长度，0 表示数据是紧密的没有空隙，让OpenGL决定具体步长\n    // offset: 字节偏移量，必须是类型的字节长度的倍数。\n    // dataType: 每个元素的数据类型\n    writeVertexAttrib(buffer, attr, size=2, strip=0, offset=0, dataType=this.context.FLOAT) {\n        buffer.attr = attr;\n        return writeVertexAttrib(this.context, buffer, attr, size, strip, offset, dataType);\n    }\n\n    // 禁用attri\n    disableVertexAttribArray(attr) {\n        try{\n            if(!attr) return attr;\n            return disableVertexAttribArray(this.context, attr);\n        }\n        catch(e) {\n            console.error(e);\n        }\n        return attr;\n    }\n\n    // 创建float32的buffer\n    createFloat32Buffer(data, type=this.context.ARRAY_BUFFER, drawType=this.context.STATIC_DRAW) {\n        const buffer = createFloat32Buffer(this.context, data, type, drawType);\n        return {\n            data,\n            ...buffer\n        };\n    }\n\n    createUint16Buffer(data, type=this.context.ARRAY_BUFFER, drawType=this.context.STATIC_DRAW) {\n        const buffer = createUint16Buffer(this.context, data, type, drawType);\n        return {\n            data,\n            ...buffer\n        };\n    }\n\n    // 释放\n    deleteBuffer(buffer) {\n        try {\n            if(!buffer) return;\n            const bufferHandler = buffer.buffer || buffer;\n            if(bufferHandler) return deleteBuffer(this.context, bufferHandler);\n        }\n        catch(e) {\n            console.log(buffer);\n            console.error(e);\n        }\n        return buffer;\n    }\n\n    // 生成纹理\n    create2DTexture() { \n        return create2DTexture(this.context);\n    }\n\n    // 创建图片纹理\n    createImgTexture(img) {\n        return createImgTexture(this.context, img);\n    }\n\n    // 根根像素值生成纹理\n    createDataTexture(data) {\n        return createDataTexture(this.context, data);\n    }\n\n    // 删除纹理\n    deleteTexture(texture) {\n        try {\n            return deleteTexture(this.context, texture.texture || texture);\n        }\n        catch(e) {\n            console.error(e);\n        }\n        return texture;\n    }\n\n    // 多边切割, 得到三角形顶点索引数组\n    // polygonIndices 顶点索引，\n    earCutPoints(points) {\n        const arr = this.pointsToArray(points);\n        const ps = earcut(arr);// 切割得到3角色顶点索引，\n        return ps;\n    }\n\n    // 多边切割, 得到三角形顶点\n    // polygonIndices 顶点索引，\n    earCutPointsToTriangles(points) {\n        const ps = this.earCutPoints(points);// 切割得到3角色顶点索引，\n        const triangles = [];\n        // 用顶点索引再组合成坐标数组\n        for(let i=0;i<ps.length; i+=3) {\n            const p1 = points[ps[i]];\n            const p2 = points[ps[i+1]];\n            const p3 = points[ps[i+2]];\n\n            triangles.push([p1, p2, p3]);// 每三个顶点构成一个三角\n        }\n        return triangles;\n    }\n\n    // 点坐标数组转为一维数组\n    pointsToArray(points) {\n        return [].concat(...points.map(p=>[p.x,p.y]));// 把x,y转为数组元素\n    }\n    // 每2位表示坐标x,y转为坐标点对象\n    arrayToPoints(arr) {\n        const points = [];\n        for(let i=0;i<arr.length; i+=2) {\n            points.push({\n                x: arr[i],\n                y: arr[i+1]\n            });\n        }\n        return points;\n    }\n\n    // 创建线性渐变\n    createLinearGradient(x1, y1, x2, y2, bounds) {\n        return new webglGradient('linear', {\n            x1, y1, x2, y2, bounds,\n            control: this\n        });\n    }\n    // 创建放射性渐变\n    createRadialGradient(x1, y1, r1, x2, y2, r2, bounds) {\n        return new webglGradient('radial', {\n            x1, y1, r1,\n            x2, y2, r2,\n            bounds,\n            control: this\n        });\n    }\n    // 判断是否是一个渐变对象\n    isGradient(obj) {\n        return obj && obj instanceof webglGradient;\n    }\n\n    /**\n\t * 测试获取文本所占大小\n\t *\n\t * @method testSize\n\t * @return {object} 含文本大小的对象\n\t */\n\ttestSize(text, style=this.style) {\n\t\t\n\t\tthis.textureContext.save && this.textureContext.save();\n\t\t// 修改字体，用来计算\n\t\tif(style.font || style.fontSize) this.textureContext.font = style.font || (style.fontSize + 'px ' + style.fontFamily);\n\t\t\n\t\t//计算宽度\n\t\tconst size = this.textureContext.measureText?\n                        this.textureContext.measureText(text):\n\t\t\t\t\t\t\t{width:15};\n        this.textureContext.restore &&this.textureContext.restore();\n\t\tsize.height = this.style.fontSize? this.style.fontSize: 15;\n\t\treturn size;\n\t}\n\n    // 使用纹理canvas生成图，\n    // 填充可以是颜色或渐变对象\n    // 如果指定了points，则表明要绘制不规则的图形\n    toFillTexture(fillStyle, bounds, points=null) {\n        const canvas = this.textureCanvas;\n        if(!canvas) {\n            return fillStyle;\n        }\n        canvas.width = bounds.width;\n        canvas.height = bounds.height;\n\n        if(!canvas.width || !canvas.height) {\n            return fillStyle;\n        }\n\n        this.textureContext.clearRect(0, 0, canvas.width, canvas.height);\n\n        this.textureContext.fillStyle = fillStyle;\n\n        this.textureContext.beginPath();\n        if(!points || !points.length) {\n            points = [];\n            points.push({\n                x: bounds.left,\n                y: bounds.top\n            });\n            points.push({\n                x: bounds.left + bounds.width,\n                y: bounds.top\n            });\n            points.push({\n                x: bounds.left + bounds.width,\n                y: bounds.top + bounds.height\n            });\n            points.push({\n                x: bounds.left,\n                y: bounds.top + bounds.height\n            });\n            points.push({\n                x: bounds.left,\n                y: bounds.top\n            });\n        }\n        if(points && points.length) {\n            for(const p of points) {\n                //移至当前坐标\n                if(p.m) {\n                    this.textureContext.moveTo(p.x - bounds.left, p.y - bounds.top);\n                }\n                else {\n                    this.textureContext.lineTo(p.x - bounds.left, p.y - bounds.top);\n                }\t\t\t\n            }\t\n        }\n        else {\n            this.textureContext.moveTo(0, 0);\n            this.textureContext.lineTo(bounds.width, 0);\n            this.textureContext.lineTo(bounds.width, bounds.height);\n            this.textureContext.lineTo(0, bounds.height);\n            this.textureContext.lineTo(0, 0);\n        }\n        this.textureContext.closePath();\n        this.textureContext.fill();\n\n        const data = this.textureContext.getImageData(0, 0, canvas.width, canvas.height);\n        return {\n            data,\n            points\n        };\n    }\n}\n\nexport default WeblBase;","import WebglBase from './base.js';\n\n// path 绘制类\nclass WebglPath extends WebglBase {\n    constructor(graph, option) {\n        super(graph, option);\n        // 是否是规则的，不规则的处理方式更为复杂和耗性能\n        this.isRegular = option.isRegular || false;\n        this.needCut = option.needCut || false;\n        this.control = option.control;\n        this.points = [];\n    }\n\n    setParentBounds(parentBounds = this.parentAbsoluteBounds) {\n\n        //this.useProgram();\n\n        if(parentBounds) this.parentAbsoluteBounds = parentBounds;\n        // 写入当前canvas大小\n        this.context.uniform2f(this.program.uniforms.a_center_point.location, this.graph.width / 2, this.graph.height / 2);\n    }\n\n    setFragColor(color) {\n        \n        if(!Array.isArray(color)) {\n            color = this.convertColor(color);\n            if(typeof color.a === 'undefined') color.a = 1;\n            this.context.uniform4f(this.program.uniforms.v_single_color.location, color.r, color.g, color.b, color.a * this.style.globalAlpha);\n            return null;\n        }\n\n        const colorData = [];\n        for(let c of color) {\n            c = this.convertColor(c);\n            if(typeof c.a === 'undefined') c.a = 1;\n            colorData.push(c.r, c.g, c.b, c.a * this.style.globalAlpha);\n        }\n        \n        const colorBuffer = this.createFloat32Buffer(colorData); \n        this.writeVertexAttrib(colorBuffer, this.program.attrs.a_color, 4, 0, 0);\n        colorBuffer.attr = this.program.attrs.a_color;\n        return colorBuffer;\n    }\n\n    beginDraw() {\n        this.useProgram();\n    }\n\n    // 开始绘制\n    draw(points, parentBounds = this.parentAbsoluteBounds) {\n        //this.useProgram();\n\n        this.setParentBounds(parentBounds);\n        \n        this.points = points;\n    }\n\n    endDraw() {\n        if(this.points) delete this.points;\n        if(this.pathPoints) delete this.pathPoints;\n    }\n\n    // 图形封闭\n    closePath() {\n        if(this.points && this.points.length > 2 && this.points[0] !== this.points[this.points.length-1]) {\n            const start = this.points[0];\n            const end = this.points[this.points.length-1];\n            if(start != end && !(start.x === end.x && start.y === end.y)) this.points.push(start);\n        }\n    }\n\n    // 绘制点数组\n    writePoints(points, attr = this.program.attrs.a_position) {\n       \n        const fixedPoints = [];\n        for(const p of points) {\n            fixedPoints.push(\n                p.x + this.parentAbsoluteBounds.left,\n                p.y + this.parentAbsoluteBounds.top\n            );\n        }\n        const vertexBuffer = this.createFloat32Buffer(fixedPoints); \n        this.writeVertexAttrib(vertexBuffer, attr, 2, 0, 0);\n        vertexBuffer.attr = attr;\n        return vertexBuffer;\n    }\n\n    // 连接二个点\n    genLinePoints(start, end) {\n        const points = [start];\n        const dx = end.x - start.x;\n        const dy = end.y - start.y;\n        if(dx !== 0 || dy !== 0) {\n            const len = Math.sqrt(Math.pow(dx, 2) + Math.pow(dy, 2));\n            const cos = dx / len;\n            const sin = dy / len;\n            const step = 0.5;\n            for(let l=step; l<len; l+=step) {\n                const x = start.x + cos * l;\n                const y = start.y + sin * l;\n                points.push({\n                    x, \n                    y\n                });\n            }\n        }\n        points.push(end);\n        return points;\n    }\n\n    // 把path坐标集合分解成一个个点，并且处理moveTo线段能力\n    pathToPoints(points=this.points) {\n        let start = null;\n        const res = [];\n        for(let i=0; i<points.length; i++) {\n            const p = points[i];\n            if(start && !p.m) {\n                const linePoints = this.genLinePoints(start, p);\n                res.push(...linePoints);\n            }\n            else if(start && !res.includes(start)) {\n                res.push(start);\n            }\n            start = p;\n        }\n        if(!res.includes(start)) res.push(start);\n        return res;\n    }\n    // 二点是否重合\n    equalPoint(p1, p2) {\n        return p1.x === p2.x && p1.y === p2.y;\n    }\n    // 把path坐标集合转为线段集\n    pathToLines(points) {\n        let start = null;\n        const res = [];\n        for(let i=0; i<points.length; i++) {\n            const p = points[i];\n            // 不重合的二个点，组成线段\n            if(start && !p.m && !(start.x == p.x && start.y == p.y)) {\n                const line = {\n                    start,\n                    end: p,\n                };\n                res.push(line);\n            }\n            start = p;\n        }\n        return res;\n    }\n\n    // 裁剪线段，如果二段线段有交点，则分割成四段， 端头相交的线段不用分割\n    cutLines(lines, index1=0, index2=0) {\n        if(lines && lines.length < 3) return lines;\n        \n        index2 = Math.max(index1 + 1, index2); //如果指定了比下一个更大的索引，则用更大的，说明前面的已经处理过了，不需要重复\n\n        // 找出线段相交的点，并切割线段\n        while(index1 < lines.length) {\n            const line1 = lines[index1];\n\n            while(index2 < lines.length) {\n                const line2 = lines[index2];\n                // 如果二条线顶点有重合，则不用处理\n                if(this.equalPoint(line1.start, line2.start) || this.equalPoint(line1.end, line2.end) || \n                this.equalPoint(line1.start, line2.end) || this.equalPoint(line1.end, line2.start)) {\n                    index2++;\n                    continue;\n                }\n                let cuted = false;\n                const intersection = this.getIntersection(line1, line2);// 计算交点\n                if(intersection) {\n                    // 如果交点不是线段的端点，则分割成二条线段\n                    if(!this.equalPoint(line1.start, intersection) && !this.equalPoint(line1.end, intersection)) {\n                        const sub1 = {\n                            start: line1.start,\n                            end: intersection\n                        };\n                        const sub2 = {\n                            start: intersection,\n                            end: line1.end\n                        };\n                        // 从原数组中删除当前线段，替换成新的线段\n                        lines.splice(index1, 1, sub1, sub2);\n                        // 当前线段被重新替换，需要重新从它开始处理\n                        cuted = true;\n                        index2 ++;// 因为多加入了一个线段，则对比线索引需要加1\n                    }\n                    // 如果交点不是线段的端点，则分割成二条线段\n                    if(!this.equalPoint(line2.start, intersection) && !this.equalPoint(line2.end, intersection)) {\n                        const sub1 = {\n                            start: line2.start,\n                            end: intersection\n                        };\n                        const sub2 = {\n                            start: intersection,\n                            end: line2.end\n                        };\n                        // 从原数组中删除当前线段，替换成新的线段\n                        lines.splice(index2, 1, sub1, sub2);\n                        index2 ++; // 线段2也切成了二段，对比索引要继续加1\n                    }\n                }\n                index2++;\n                // 如果已经分割了起始线段，则第一个子线段开始，重新对比后面还未对比完的。直接所有对比完成返回\n                if(cuted) return this.cutLines(lines, index1, index2);\n            }\n            index1++;\n            index2 = index1 + 1;\n        }\n        return lines;\n    }\n\n    // 计算二个线段的交点\n    getIntersection(line1, line2) {\n        // 如果首尾相接，也认为是有交点\n        if(this.equalPoint(line1.start, line2.start) || this.equalPoint(line1.start, line2.end)) return line1.start;\n        if(this.equalPoint(line1.end, line2.start) || this.equalPoint(line1.end, line2.end)) return line1.end;\n\n        // 三角形abc 面积的2倍\n        const area_abc = (line1.start.x - line2.start.x) * (line1.end.y - line2.start.y) - (line1.start.y - line2.start.y) * (line1.end.x - line2.start.x);\n        \n        // 三角形abd 面积的2倍\n        const area_abd = (line1.start.x - line2.end.x) * (line1.end.y - line2.end.y) - (line1.start.y - line2.end.y) * (line1.end.x - line2.end.x);\n        \n        // 面积符号相同则两点在线段同侧,不相交 (=0表示在线段顶点上);\n        if (area_abc * area_abd > 0) {\n            return null;\n        }\n        \n        // 三角形cda 面积的2倍\n        const area_cda = (line2.start.x - line1.start.x) * (line2.end.y - line1.start.y) - (line2.start.y - line1.start.y) * (line2.end.x - line1.start.x);\n        // 三角形cdb 面积的2倍\n        // 注意: 这里有一个小优化.不需要再用公式计算面积,而是通过已知的三个面积加减得出.\n        const area_cdb = area_cda + area_abc - area_abd ;\n        if(area_cda * area_cdb > 0) {\n            return null ;\n        }\n        if(area_abd === area_abc) return null;\n\n        //计算交点坐标\n        const t = area_cda / (area_abd - area_abc);\n        const dx= t * (line1.end.x - line1.start.x);\n        const dy= t * (line1.end.y - line1.start.y);\n\n        return { \n            x: line1.start.x + dx, \n            y: line1.start.y + dy\n        };\n    }\n\n    // 找出跟当前线段尾部相交的所有线段\n    getIntersectionLines(line, lines, index, point=line.end, points=[], root=null) {\n        const res = {\n            line,\n            polygons: []\n        };\n        \n        points.push(point);\n        \n        if(root && this.equalPoint(root.line.start, point)) {\n            points.unshift(root.line.start); // 把起始地址加入进去\n            root.polygons.push(points);\n            return res;\n        }\n\n        for(;index<lines.length; index++) {\n            const l = lines[index];\n            if(this.equalPoint(point, l.start)) {      \n                if(points.includes(l.end)) continue;          \n                this.getIntersectionLines(l, lines, index+1, l.end, [...points], root||res);\n            }\n            else if(this.equalPoint(point, l.end)) {\n                if(points.includes(l.start)) continue;     \n                this.getIntersectionLines(l, lines, index+1, l.start, [...points], root||res);\n            }\n        }\n        return res;\n    }\n\n    // 根据路径点坐标，切割出封闭的多边形\n    getPolygon(points) {\n        let polygons = [];\n        let lines = this.pathToLines(points); // 分解得到线段\n        if(lines && lines.length > 2) {\n            lines = this.cutLines(lines); // 把所有相交点切割线段找出来\n            for(let i=0; i<lines.length-1; i++) {\n                const line1 = lines[i];\n                let polygon = [];// 当前图形\n\n                const treeLine = this.getIntersectionLines(line1, lines, i+1);\n                \n                if(treeLine.polygons.length) polygons.push(...treeLine.polygons);\n                continue;\n                let lastLine = line1; // 下一个还在连接状态的线\n                for(let j=i+1; j<lines.length; j++) {\n                    const line2 = lines[j];\n                    // 如果跟下一条线相接，则表示还在形成图形中\n                    if(this.equalPoint(lastLine.end, line2.start)) {\n                        polygon.push(lastLine.end);\n                        lastLine = line2;\n                        if(i === j+1) continue; //下一条相连 则不需要处理相交情况\n                    }\n                    else {\n                        polygon = [];\n                    }  \n                    // 因为前面进行了分割线段，则里只有处理端点相连的情况\n                    const intersection = this.equalPoint(line1.start, line2.end)? line1.start: null;//this.getIntersection(line1, line2);// 计算交点\n                    if(intersection) {\n                        polygon.push(intersection);// 交叉点为图形顶点\n                        // 如果上一个连接线不是当前交叉线，则表示重新开始闭合\n                        // 如果上一个连接线是当前交叉线，形成了封闭的图形\n                        if(lastLine === line2 && polygon.length > 1) {\n                            polygons.push(polygon);\n                            \n                            // 封闭后，下一个起始线条就是从交点开始计算起\n                            /*lastLine = {\n                                start: intersection,\n                                end: line2.end\n                            };*/\n                            polygon = [];// 重新开始新一轮找图形\n\n                            /*\n                            // 如果交点是上一条线的终点，则新图形为空\n                            if(this.equalPoint(line2.end, intersection)) {\n                                polygon = [];// 重新开始新一轮找图形\n                            }\n                            else {\n                                // 同时交点也要加到上一个图形中第一个点，形成封闭\n                                polygon.unshift(intersection);\n\n                                polygon = [ intersection ];// 重新开始新一轮找图形\n                            }*/\n                        }\n                        else {\n                            lastLine = line2;\n                        }\n                    }\n                }\n            }\n        }\n        \n        // 当有多个封闭图形时，再弟归一下，里面是不是有封闭图形内还有子封闭图形\n        /*if(polygons.length > 1) {\n            const newPolygons = [];\n            for(const polygon of polygons) {\n                // 只有大于4才有可能有子封闭图形\n                if(polygon.length > 4) {\n                    const childPolygons = this.getPolygon(polygon);\n                    // 当有多个子图形时，表示它不是最终封闭图形，跳过，\n                    // 因为它的子图形之前有加入的，不需要重复加入\n                    if(childPolygons.length > 1) {\n                        //newPolygons.push(...childPolygons);\n                        continue;\n                    }\n                }\n                newPolygons.push(polygon);\n            }\n            polygons = newPolygons;\n        }*/\n        return polygons;\n    }\n\n    // 分割成一个个规则的三角形，不规则的多边形不全割的话纹理就会没法正确覆盖\n    getTriangles(points) {\n        \n        //this.trianglesCache = this.trianglesCache||(this.trianglesCache={});\n        //const key = JSON.stringify(points);\n        //if(this.trianglesCache[key]) return this.trianglesCache[key];\n\n        const res = [];\n        const polygons = this.getPolygon(points);                \n        if(polygons.length) {            \n            for(const polygon of polygons) {\n                // 需要分割三角形，不然填充会有问题\n                const triangles = this.earCutPointsToTriangles(polygon);\n                res.push(...triangles);\n            }   \n        }\n        //this.trianglesCache[key] = res;\n        return res;\n    }\n\n    // 画线条\n    stroke(points = this.points, color = this.style.strokeStyle, lineWidth = this.style.lineWidth) {\n        if(!points || !points.length) return;\n       // this.useProgram();\n\n        let colorBuffer = null;\n        if(color) {\n            colorBuffer = this.setFragColor(color);\n        }\n        // 线宽\n        if(lineWidth) {\n            this.context.uniform1f(this.program.uniforms.a_point_size.location, lineWidth);// * this.graph.devicePixelRatio\n        }\n        // 标注为stroke\n        if(this.program.uniforms.a_type) {\n            // 4表示单画一个圆点，1表示方块形成的线条\n            this.context.uniform1i(this.program.uniforms.a_type.location, points.length === 1? 4 :1);\n        }\n        if(points && points.length) {\n            const regular = lineWidth <= 1.2;\n            points = regular? points : this.pathToPoints(points);\n            const buffer = this.writePoints(points);\n            this.context.drawArrays(regular? this.context.LINE_LOOP: this.context.POINTS, 0, points.length);\n            this.deleteBuffer(buffer);\n        }\n        colorBuffer && this.deleteBuffer(colorBuffer);\n        colorBuffer && this.disableVertexAttribArray(colorBuffer.attr);\n    }\n\n    // 填充图形\n    fill(bounds = {left: 0, top: 0, width: 0, height: 0}, type = 1) {\n       \n        if(this.points && this.points.length) {            \n            // 如果是颜色rgba\n            if(this.style.fillStyle) {            \n                this.fillColor(this.style.fillStyle, this.points, bounds, type);\n            }\n            if(this.style.fillImage) {            \n                this.fillImage(this.style.fillImage, this.points, bounds, type); \n            }\n        }\n    }\n\n    fillColor(color, points, bounds, type=1) {\n        \n        // 如果是渐变色，则需要计算偏移量的颜色\n        if(this.isGradient(color)) {\n            const imgData = color.toImageData(this, bounds, points);\n            return this.fillImage(imgData.data, imgData.points, bounds);\n        }\n        \n        // 标注为fill\n        this.context.uniform1i(this.program.uniforms.a_type.location, type);\n        const colorBuffer = this.setFragColor(color);\n\n        this.fillPolygons(points);                \n\n        colorBuffer && this.deleteBuffer(colorBuffer);\n        colorBuffer && this.disableVertexAttribArray(colorBuffer.attr);\n\n    }\n\n    // 区域填充图片\n    // points绘制的图形顶点\n    // 图片整体绘制区域\n    fillImage(img, points, bounds) {\n        if(!img) return;\n\n        // 设置纹理\n        const texture = img instanceof ImageData? this.createDataTexture(img) : this.createImgTexture(img);\n        this.context.uniform1i(this.program.uniforms.u_sample.location, 0); // 纹理单元传递给着色器\n\n        // 指定纹理区域尺寸\n        this.context.uniform4f(this.program.uniforms.v_texture_bounds.location, \n            bounds.left + this.parentAbsoluteBounds.left,\n            bounds.top + this.parentAbsoluteBounds.top,\n            bounds.width,\n            bounds.height,\n        ); // 纹理单元传递给着色器\n\n        this.fillTexture(points);\n        \n        this.deleteTexture(texture);\n    }\n\n    fillTexture(points) {        \n        if(points && points.length) {  // 标注为纹理对象\n            this.context.uniform1i(this.program.uniforms.a_type.location, 2);  \n            // 纹理坐标\n            //const coordBuffer = this.writePoints(points, this.program.attrs.a_text_coord);\n            this.fillPolygons(points, true);\n            //this.deleteBuffer(coordBuffer);  \n            this.disableVertexAttribArray(this.program.attrs.a_text_coord);   \n        } \n    }\n\n    // 进行多边形填充\n    fillPolygons(points, isTexture = false) {   \n        //const indexBuffer = this.createUint16Buffer(triangles, this.context.ELEMENT_ARRAY_BUFFER);\n        //this.context.drawElements(this.context.TRIANGLES, triangles.length, this.context.UNSIGMED_SHORT, 0);\n        //this.deleteBuffer(indexBuffer);\n        /*if(points.length > 3 && (!regular || this.needCut)) {\n            const triangles = regular && this.needCut? this.earCutPointsToTriangles(points): this.getTriangles(points);                \n            if(triangles.length) {   \n                for(const triangle of triangles) {\n                    this.fillPolygons(triangle, isTexture);// 这里就变成了规则的图形了\n                }\n            }\n        }\n        else {*/\n            const buffer = this.writePoints(points);\n            // 纹理坐标\n            const coordBuffer = isTexture? this.writePoints(points, this.program.attrs.a_text_coord): null;\n\n            this.context.drawArrays(this.context.TRIANGLE_FAN, 0, points.length);\n            this.deleteBuffer(buffer);\n            coordBuffer && this.deleteBuffer(coordBuffer);    \n        //}\n    }\n\n    // 填充图形\n    drawImage(img, left=0, top=0, width=img.width, height=img.height) {\n        width = width || img.width;\n        height = height || img.height;\n\n        this.fillImage(img, this.points, {\n            left,\n            top,\n            width, \n            height\n        });\n    }\n\n    drawText(text, x, y, bounds) {\n        let canvas = this.textureCanvas;\n        if(!canvas) {\n            return null;\n        }\n        canvas.width = bounds.width;\n        canvas.height = bounds.height;\n\n        if(!canvas.width || !canvas.height) {\n            return null;\n        }\n\n        this.textureContext.clearRect(0, 0, canvas.width, canvas.height);\n        // 修改字体\n\t\tthis.textureContext.font = this.style.font || (this.style.fontSize + 'px ' + this.style.fontFamily);\n\n        x -= bounds.left;\n        y -= bounds.top;\n\n        this.setTextureStyle(this.style);\n\n        if(this.style.fillStyle && this.textureContext.fillText) {\n\n            if(this.style.maxWidth) {\n                this.textureContext.fillText(text, x, y, this.style.maxWidth);\n            }\n            else {\n                this.textureContext.fillText(text, x, y);\n            }\n        }\n        if(this.textureContext.strokeText) {\n\n            if(this.style.maxWidth) {\n                this.textureContext.strokeText(text, x, y, this.style.maxWidth);\n            }\n            else {\n                this.textureContext.strokeText(text, x, y);\n            }\n        }\n        // 用纹理图片代替文字\n        const data = this.textureContext.getImageData(0, 0, canvas.width, canvas.height);\n        this.fillImage(data, this.points, bounds);\n    }\n}\n\nexport default WebglPath;","\nimport {jmUtils} from \"./jmUtils.js\";\nimport {jmList} from \"./jmList.js\";\nimport {jmGradient} from \"./jmGradient.js\";\nimport {jmShadow} from \"./jmShadow.js\";\nimport {jmProperty} from \"./jmProperty.js\";\nimport WebglPath from \"../lib/webgl/path.js\";\n\nconst jmStyleMap = {\n\t'fill':'fillStyle',\n\t'fillImage':'fillImage',\n\t'stroke':'strokeStyle',\n\t'shadow.blur':'shadowBlur',\n\t'shadow.x':'shadowOffsetX',\n\t'shadow.y':'shadowOffsetY',\n\t'shadow.color':'shadowColor',\n\t'lineWidth' : 'lineWidth',\n\t'miterLimit': 'miterLimit',\n\t'fillStyle' : 'fillStyle',\n\t'strokeStyle' : 'strokeStyle',\n\t'font' : 'font',\n\t'opacity' : 'globalAlpha',\n\t'textAlign' : 'textAlign',\n\t'textBaseline' : 'textBaseline',\n\t'shadowBlur' : 'shadowBlur',\n\t'shadowOffsetX' : 'shadowOffsetX',\n\t'shadowOffsetY' : 'shadowOffsetY',\n\t'shadowColor' : 'shadowColor',\n\t'lineJoin': 'lineJoin',\n\t'lineCap':'lineCap'\n};\n\nexport default class jmControl extends jmProperty {\n\n\tconstructor(params, t) {\n\t\tparams = params||{};\n\t\tsuper(params);\n\t\tthis.property('type', t || new.target.name);\n\t\tthis.style = params && params.style ? params.style : {};\n\t\tthis.width = params.width || 0;\n\t\tthis.height = params.height  || 0;\n\t\tthis.hitArea = params.hitArea || null;\n\n\t\tif(params.position) {\n\t\t\tthis.position = params.position;\n\t\t}\n\n\t\tthis.graph = params.graph || null;\n\t\tthis.zIndex = params.zIndex || 0;\n\t\tthis.interactive = typeof params.interactive == 'undefined'? false : params.interactive;\n\n\t\tif(this.mode === 'webgl') {\n\t\t\tthis.webglControl = new WebglPath(this.graph, {\n\t\t\t\tstyle: this.style,\n\t\t\t\tcontrol: this,\n\t\t\t\tisRegular: params.isRegular,\n\t\t\t\tneedCut: params.needCut\n\t\t\t});\n\t\t}\n\n\t\tthis.initializing();\n\t\t\n\t\tthis.on = this.bind;\n\t\t\n\t\tthis.option = params;\n\t}\n\n\tget type() {\n\t\treturn this.property('type');\n\t}\n\n\tget context() {\n\t\tlet s = this.property('context');\n\t\tif(s) return s;\n\t\telse if(this.is('jmGraph') && this.canvas && this.canvas.getContext) {\n\t\t\treturn this.context = this.canvas.getContext(this.mode || '2d');\n\t\t}\n\t\tconst g = this.graph;\n\t\tif(g) return g.context;\n\t\treturn g.canvas.getContext(this.mode || '2d');\n\t}\n\tset context(v) {\n\t\treturn this.property('context', v);\n\t}\n\n\tget style() {\n\t\tlet s = this.property('style');\n\t\tif(!s) s = this.property('style', {});\n\t\treturn s;\n\t}\n\tset style(v) {\n\t\tthis.needUpdate = true;\n\t\treturn this.property('style', v);\n\t}\n\n\tget visible() {\n\t\tlet s = this.property('visible');\n\t\tif(typeof s == 'undefined') s = this.property('visible', true);\n\t\treturn s;\n\t}\n\tset visible(v) {\n\t\tthis.needUpdate = true;\n\t\treturn this.property('visible', v);\n\t}\n\n\tget interactive() {\n\t\tconst s = this.property('interactive');\n\t\treturn s;\n\t}\n\tset interactive(v) {\n\t\treturn this.property('interactive', v);\n\t}\n\n\tget hitArea() {\n\t\tconst s = this.property('hitArea');\n\t\treturn s;\n\t}\n\tset hitArea(v) {\n\t\treturn this.property('hitArea', v);\n\t}\n\t\t\n\tget children() {\n\t\tlet s = this.property('children');\n\t\tif(!s) s = this.property('children', new jmList());\n\t\treturn s;\n\t}\n\tset children(v) {\n\t\tthis.needUpdate = true;\n\t\treturn this.property('children', v);\n\t}\n\n\tget width() {\n\t\tlet s = this.property('width');\n\t\tif(typeof s == 'undefined') s = this.property('width', 0);\n\t\treturn s;\n\t}\n\tset width(v) {\n\t\tthis.needUpdate = true;\n\t\treturn this.property('width', v);\n\t}\n\n\tget height() {\n\t\tlet s = this.property('height');\n\t\tif(typeof s == 'undefined') s = this.property('height', 0);\n\t\treturn s;\n\t}\n\tset height(v) {\n\t\tthis.needUpdate = true;\n\t\treturn this.property('height', v);\n\t}\n\n\tget zIndex() {\n\t\tlet s = this.property('zIndex');\n\t\tif(!s) s = this.property('zIndex', 0);\n\t\treturn s;\n\t}\n\tset zIndex(v) {\n\t\tthis.property('zIndex', v);\n\t\tthis.children.sort();\n\t\tthis.needUpdate = true;\n\t\treturn v;\n\t}\n\n\tset cursor(cur) {\n\t\tconst graph = this.graph;\n\t\tif(graph) {\n\t\t\tgraph.css('cursor',cur);\n\t\t}\n\t}\n\tget cursor() {\n\t\tconst graph = this.graph;\n\t\tif(graph) {\n\t\t\treturn graph.css('cursor');\n\t\t}\n\t}\n\n\tinitializing() {\n\n\t\tconst self = this;\n\t\tthis.children = this.children || new jmList();\n\t\tconst oadd = this.children.add;\n\t\t\n\t\tthis.children.add = function(obj) {\n\t\t\tif(typeof obj === 'object') {\n\t\t\t\tif(obj.parent && obj.parent != self && obj.parent.children) {\n\t\t\t\t\tobj.parent.children.remove(obj);\n\t\t\t\t}\n\t\t\t\tobj.parent = self;\n\t\t\t\tif(this.contain(obj)) {\n\t\t\t\t\tthis.oremove(obj);\n\t\t\t\t}\n\t\t\t\toadd.call(this, obj);\n\t\t\t\tobj.emit('add', obj);\n\n\t\t\t\tself.needUpdate = true;\n\t\t\t\tif(self.graph) obj.graph = self.graph;\n\t\t\t\tthis.sort();\n\t\t\t\treturn obj;\n\t\t\t}\n\t\t};\n\t\tthis.children.oremove= this.children.remove;\n\t\t\n\t\tthis.children.remove = function(obj) {\n\t\t\tif(typeof obj === 'object') {\n\t\t\t\tobj.parent = null;\n\t\t\t\tobj.graph = null;\n\t\t\t\tobj.remove(true);\n\t\t\t\tthis.oremove(obj);\n\t\t\t\tself.needUpdate = true;\n\t\t\t}\n\t\t};\n\t\t\n\t\tthis.children.sort = function() {\n\t\t\tconst levelItems = {};\n\t\t\tthis.each(function(i, obj) {\n\t\t\t\tif(!obj) return;\n\t\t\t\tlet zindex = obj.zIndex;\n\t\t\t\tif(!zindex && obj.style && obj.style.zIndex) {\n\t\t\t\t\tzindex = Number(obj.style.zIndex);\n\t\t\t\t\tif(isNaN(zindex)) zindex=obj.style.zIndex||0;\n\t\t\t\t}\n\t\t\t\tlet items = levelItems[zindex] || (levelItems[zindex] = []);\n\t\t\t\titems.push(obj);\n\t\t\t});\n\n\t\t\tthis.splice(0, this.length);\n\t\t\t\n\t\t\tfor(let index in levelItems) {\n\t\t\t\toadd.call(this, levelItems[index]);\n\t\t\t}\n\t\t}\n\t\tthis.children.clear = function() {\n\t\t\tthis.each(function(i,obj) {\n\t\t\t\tthis.remove(obj);\n\t\t\t},true);\n\t\t}\n\t\tthis.needUpdate = true;\n\t} \n\n\tsetStyle(style) {\n\t\tstyle = style || jmUtils.clone(this.style, true);\n\t\tif(!style) return;\n\n\t\tconst __setStyle = (style, name, mpkey) => {\n\t\t\tif(style) {\n\t\t\t\tlet styleValue = style;\n\t\t\t\tif(typeof styleValue === 'function') {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tstyleValue = styleValue.call(this);\n\t\t\t\t\t}\n\t\t\t\t\tcatch(e) {\n\t\t\t\t\t\tconsole.warn(e);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tlet t = typeof styleValue;\n\t\t\t\tlet mpname = jmStyleMap[mpkey || name];\n\n\t\t\t\tif((styleValue instanceof jmGradient) || (t == 'string' && styleValue.indexOf('-gradient') > -1)) {\n\t\t\t\t\tif(t == 'string' && styleValue.indexOf('-gradient') > -1) {\n\t\t\t\t\t\tstyleValue = new jmGradient(styleValue);\n\t\t\t\t\t}\n\t\t\t\t\t__setStyle(styleValue.toGradient(this), mpname||name);\n\t\t\t\t}\n\t\t\t\telse if(mpname) {\n\t\t\t\t\tif(this.webglControl) {\n\t\t\t\t\t\tthis.webglControl.setStyle(mpname, styleValue);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tif(t == 'string' && ['fillStyle', 'strokeStyle', 'shadowColor'].indexOf(mpname) > -1) {\n\t\t\t\t\t\t\tstyleValue = jmUtils.toColor(styleValue);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.context[mpname] = styleValue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tswitch(name) {\n\t\t\t\t\t\tcase 'shadow' : {\n\t\t\t\t\t\t\tif(t == 'string') {\n\t\t\t\t\t\t\t\t__setStyle(new jmShadow(styleValue), name);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tfor(let k in styleValue) {\n\t\t\t\t\t\t\t\t__setStyle(styleValue[k], k, name + '.' + k);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcase 'translate' : {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcase 'rotation' : {\n\t\t\t\t\t\t\tif(typeof styleValue.angle === 'undefined' || isNaN(styleValue.angle)) break;\n\t\t\t\t\t\t\tstyleValue = this.getRotation(styleValue);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tthis.__translateAbsolutePosition = this.toAbsolutePoint({\n\t\t\t\t\t\t\t\tx: styleValue.x,\n\t\t\t\t\t\t\t\ty: styleValue.y\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tthis.context.translate && this.context.translate(this.__translateAbsolutePosition.x, this.__translateAbsolutePosition.y);\n\t\t\t\t\t\t\tthis.context.rotate && this.context.rotate(styleValue.angle);\n\t\t\t\t\t\t\tthis.context.translate && this.context.translate(-this.__translateAbsolutePosition.x, -this.__translateAbsolutePosition.y);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcase 'transform' : {\n\t\t\t\t\t\t\tif(!this.context.transform) break;\n\t\t\t\t\t\t\tif(Array.isArray(styleValue)) {\n\t\t\t\t\t\t\t\tthis.context.transform.apply(this.context, styleValue);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(typeof styleValue == 'object') {\n\t\t\t\t\t\t\t\tthis.context.transform(\n\t\t\t\t\t\t\t\t\tstyleValue.scaleX || 1,\n\t\t\t\t\t\t\t\t\tstyleValue.skewX || 0,\n\t\t\t\t\t\t\t\t\tstyleValue.skewY || 0,\n\t\t\t\t\t\t\t\t\tstyleValue.scaleY || 1,\n\t\t\t\t\t\t\t\t\tstyleValue.offsetX || 0,\n\t\t\t\t\t\t\t\t\tstyleValue.offsetY || 0\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcase 'cursor' : {\n\t\t\t\t\t\t\tthis.cursor = styleValue;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif(this.translate) {\n\t\t\t__setStyle(this.translate, 'translate');\n\t\t}\n\t\tif(this.transform) {\n\t\t\t__setStyle(this.transform, 'transform');\n\t\t}\n\t\tfor(let k in style) {\n\t\t\tif(k === 'constructor') continue;\n\t\t\tlet t = typeof style[k];\n\t\t\tif(t == 'string' && style[k].indexOf('-gradient') > -1) {\n\t\t\t\tstyle[k] = new jmGradient(style[k]);\n\t\t\t}\n\t\t\telse if(t == 'string' && k == 'shadow') {\n\t\t\t\tstyle[k] = new jmShadow(style[k]);\n\t\t\t}\n\t\t\t__setStyle(style[k], k);\n\t\t}\n\t}\n\n\t/**\n\t * 获取当前控件的边界\n\t * 通过分析控件的描点或位置加宽高得到为方形的边界\n\t *\n\t * @method getBounds\n\t * @for jmControl\n\t * @param {boolean} [isReset=false] 是否强制重新计算\n\t * @return {object} 控件的边界描述对象(left,top,right,bottom,width,height)\n\t */\n\tgetBounds(isReset) {\n\t\t//如果当次计算过，则不重复计算\n\t\tif(this.bounds && !isReset) return this.bounds;\n\n\t\tconst rect = {}; // left top\n\t\t//jmGraph，特殊处理\n\t\tif(this.type == 'jmGraph' && this.canvas) {\n\t\t\tif(typeof this.canvas.width === 'function') {\n\t\t\t\trect.right = this.canvas.width(); \n\t\t\t}\n\t\t\telse if(this.width) {\n\t\t\t\trect.right = this.width;\n\t\t\t}\n\t\t\t\n\t\t\tif(typeof this.canvas.height === 'function') {\n\t\t\t\trect.bottom = this.canvas.height(); \n\t\t\t}\n\t\t\telse if(this.height) {\n\t\t\t\trect.bottom = this.height;\n\t\t\t}\n\t\t}\n\t\telse if(this.points && this.points.length > 0) {\t\t\n\t\t\tfor(const p of this.points) {\n\t\t\t\tif(typeof rect.left === 'undefined' || rect.left > p.x) {\n\t\t\t\t\trect.left = p.x;\n\t\t\t\t}\n\t\t\t\tif(typeof rect.top === 'undefined'  || rect.top > p.y) {\n\t\t\t\t\trect.top = p.y;\n\t\t\t\t}\n\n\t\t\t\tif(typeof rect.right === 'undefined'  || rect.right < p.x) {\n\t\t\t\t\trect.right = p.x;\n\t\t\t\t}\n\t\t\t\tif(typeof rect.bottom === 'undefined' || rect.bottom < p.y) {\n\t\t\t\t\trect.bottom = p.y;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse if(this.getLocation) {\n\t\t\tlet p = this.getLocation();\n\t\t\tif(p) {\n\t\t\t\trect.left = p.left;\n\t\t\t\trect.top = p.top;\n\t\t\t\trect.right = p.left + p.width;\n\t\t\t\trect.bottom = p.top + p.height;\n\t\t\t}\t\t\n\t\t}\n\t\tif(!rect.left) rect.left = 0; \n\t\tif(!rect.top) rect.top = 0; \n\t\tif(!rect.right) rect.right = 0; \n\t\tif(!rect.bottom) rect.bottom = 0; \n\t\trect.width = rect.right - rect.left;\n\t\trect.height = rect.bottom - rect.top;\n\t\t\n\t\treturn this.bounds=rect;\n\t}\n\n\t/**\n\t * 获取被旋转后的边界\n\t */\n\tgetRotationBounds(rotation=null) {\n\t\trotation = rotation || this.getRotation();\n\t\tconst bounds = this.getBounds();\n\t\tif(!rotation || !rotation.angle) return bounds;\n\n\t\tconst rect = {\n\t\t\twidth: 0,\n\t\t\theight: 0,\n\t\t\toldBounds: bounds\n\t\t}; // left top\n\t\tlet points = [];\n\t\tif(this.points && this.points.length > 0) {\t\n\t\t\tpoints = jmUtils.clone(this.points, true); // 深度拷贝\t\t\t\n\t\t}\n\t\telse if(this.getLocation) {\n\t\t\tconst local = this.getLocation();\n\t\t\tif(local) {\n\t\t\t\tpoints.push({\n\t\t\t\t\tx: local.left,\n\t\t\t\t\ty: local.top\n\t\t\t\t},{\n\t\t\t\t\tx: local.left + local.width,\n\t\t\t\t\ty: local.top\n\t\t\t\t},{\n\t\t\t\t\tx: local.left + local.width,\n\t\t\t\t\ty: local.top + local.height\n\t\t\t\t},{\n\t\t\t\t\tx: local.left,\n\t\t\t\t\ty: local.top + local.height\n\t\t\t\t});\n\t\t\t}\t\t\n\t\t}\n\t\tpoints = jmUtils.rotatePoints(points, {\n\t\t\tx: rotation.x + bounds.left,\n\t\t\ty: rotation.y + bounds.top\n\t\t}, rotation.angle);// 对现在点进行旋转\n\n\t\tfor(const p of points) {\n\t\t\tif(typeof rect.left === 'undefined' || rect.left > p.x) {\n\t\t\t\trect.left = p.x;\n\t\t\t}\n\t\t\tif(typeof rect.top === 'undefined'  || rect.top > p.y) {\n\t\t\t\trect.top = p.y;\n\t\t\t}\n\n\t\t\tif(typeof rect.right === 'undefined'  || rect.right < p.x) {\n\t\t\t\trect.right = p.x;\n\t\t\t}\n\t\t\tif(typeof rect.bottom === 'undefined' || rect.bottom < p.y) {\n\t\t\t\trect.bottom = p.y;\n\t\t\t}\n\t\t}\n\n\t\tif(!rect.left) rect.left = 0; \n\t\tif(!rect.top) rect.top = 0; \n\t\tif(!rect.right) rect.right = 0; \n\t\tif(!rect.bottom) rect.bottom = 0; \n\n\t\trect.width = rect.right - rect.left;\n\t\trect.height = rect.bottom - rect.top;\n\n\t\treturn rect;\n\t}\n\n\t/**\n\t * 获取当前控件的位置相关参数\n\t * 解析百分比和margin参数\n\t *\n\t * @method getLocation\n\t * @return {object} 当前控件位置参数，包括中心点坐标，右上角坐标，宽高\n\t */\n\tgetLocation(clone=true) {\n\t\t//如果已经计算过则直接返回\n\t\t//在开画之前会清空此对象\n\t\t//if(reset !== true && this.location) return this.location;\n\n\t\tlet local = this.location = {left: 0,top: 0,width: 0,height: 0};\n\t\tlocal.position = typeof this.position == 'function'? this.position(): jmUtils.clone(this.position);\t\n\t\tlocal.center = this.center && typeof this.center === 'function'?this.center(): jmUtils.clone(this.center);//中心\n\t\tlocal.start = this.start && typeof this.start === 'function'?this.start(): jmUtils.clone(this.start);//起点\n\t\tlocal.end = this.end && typeof this.end === 'function'?this.end(): jmUtils.clone(this.end);//起点\n\t\tlocal.radius = this.radius;//半径\n\t\tlocal.width = this.width;\n\t\tlocal.height = this.height;\n\n\t\tconst margin = jmUtils.clone(this.style.margin, {});\n\t\tmargin.left = (margin.left || 0);\n\t\tmargin.top = (margin.top || 0);\n\t\tmargin.right = (margin.right || 0);\n\t\tmargin.bottom = (margin.bottom || 0);\n\t\t\n\t\t//如果没有指定位置，但指定了margin。则位置取margin偏移量\n\t\tif(local.position) {\n\t\t\tlocal.left = local.position.x;\n\t\t\tlocal.top = local.position.y;\n\t\t}\n\t\telse {\n\t\t\tlocal.left = margin.left;\n\t\t\tlocal.top = margin.top;\n\t\t}\n\n\t\tif(this.parent) {\n\t\t\tconst parentBounds = this.parent.getBounds();\t\n\n\t\t\t//处理百分比参数\n\t\t\tif(jmUtils.checkPercent(local.left)) {\n\t\t\t\tlocal.left = jmUtils.percentToNumber(local.left) * parentBounds.width;\n\t\t\t}\n\t\t\tif(jmUtils.checkPercent(local.top)) {\n\t\t\t\tlocal.top = jmUtils.percentToNumber(local.top) * parentBounds.height;\n\t\t\t}\n\t\t\t\n\t\t\t//如果没有指定宽度或高度，则按百分之百计算其父宽度或高度\n\t\t\tif(jmUtils.checkPercent(local.width)) {\n\t\t\t\tlocal.width = jmUtils.percentToNumber(local.width) * parentBounds.width;\n\t\t\t}\n\t\t\tif(jmUtils.checkPercent(local.height)) {\n\t\t\t\tlocal.height = jmUtils.percentToNumber(local.height) * parentBounds.height;\n\t\t\t}\n\t\t\t//处理中心点\n\t\t\tif(local.center) {\n\t\t\t\t//处理百分比参数\n\t\t\t\tif(jmUtils.checkPercent(local.center.x)) {\n\t\t\t\t\tlocal.center.x = jmUtils.percentToNumber(local.center.x) * parentBounds.width;\n\t\t\t\t}\n\t\t\t\tif(jmUtils.checkPercent(local.center.y)) {\n\t\t\t\t\tlocal.center.y = jmUtils.percentToNumber(local.center.y) * parentBounds.height;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(local.radius) {\n\t\t\t\t//处理百分比参数\n\t\t\t\tif(jmUtils.checkPercent(local.radius)) {\n\t\t\t\t\tlocal.radius = jmUtils.percentToNumber(local.radius) * Math.min(parentBounds.width, parentBounds.height);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn local;\n\t}\n\n\t/**\n\t * 获取当前控制的旋转信息\n\t * @returns {object} 旋转中心和角度\n\t */\n\tgetRotation(rotation, bounds = null) {\n\t\trotation = rotation || jmUtils.clone(this.style.rotation);\n\n\t\tif(!rotation) {\n\t\t\t//如果本身没有，则可以继承父级的\n\t\t\trotation = this.parent && this.parent.getRotation?this.parent.getRotation():null;\n\t\t\t//如果父级有旋转，则把坐标转换为当前控件区域\n\t\t\tif(rotation) {\n\t\t\t\tbounds = bounds || this.getBounds();\n\t\t\t\trotation.x -= bounds.left;\n\t\t\t\trotation.y -= bounds.top;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tbounds = bounds || this.getBounds();\n\t\t\tif(typeof rotation.x === 'undefined') rotation.x = '50%';\n\t\t\tif(typeof rotation.y === 'undefined') rotation.y = '50%';\n\t\t\tif(jmUtils.checkPercent(rotation.x)) {\n\t\t\t\trotation.x  = jmUtils.percentToNumber(rotation.x) * bounds.width;\n\t\t\t}\n\t\t\tif(jmUtils.checkPercent(rotation.y)) {\n\t\t\t\trotation.y  = jmUtils.percentToNumber(rotation.y) * bounds.height;\n\t\t\t}\n\t\t}\n\t\treturn {\n\t\t\t...rotation,\n\t\t\tbounds\n\t\t};\n\n\t}\n\n\t// 计算位移偏移量\n\tgetTranslate(translate, bounds = null) {\n\t\ttranslate = translate || this.style.translate;\n\t\tif(!translate) return {x: 0, y: 0};\n\t\tconst result = {\n\t\t\tx: translate.x || 0,\n\t\t\ty: translate.y || 0\n\t\t}\n\t\t\n\t\tif(jmUtils.checkPercent(result.x)) {\n\t\t\tif(!bounds && this.parent) bounds = this.parent.getBounds();\n\t\t\tresult.x  = jmUtils.percentToNumber(result.x) * bounds.width;\n\t\t}\n\t\tif(jmUtils.checkPercent(result.y)) {\n\t\t\tif(!bounds && this.parent) bounds = this.parent.getBounds();\n\t\t\tresult.y  = jmUtils.percentToNumber(result.y) * bounds.height;\n\t\t}\n\t\treturn result;\n\t}\n\n\t/**\n\t * 移除当前控件\n\t * 如果是VML元素，则调用其删除元素\n\t *\n\t * @method remove \n\t */\n\tremove() {\t\n\t\tif(this.parent) {\n\t\t\tthis.parent.children.remove(this);\n\t\t}\n\t}\n\n\t/**\n\t * 对控件进行平移\n\t * 遍历控件所有描点或位置，设置其偏移量。\n\t *\n\t * @method offset\n\t * @param {number} x x轴偏移量\n\t * @param {number} y y轴偏移量\n\t * @param {boolean} [trans] 是否传递,监听者可以通过此属性是否决定是否响应移动事件,默认=true\n\t * @param {object} [evt] 如果是事件触发，则传递move事件参数\n\t */\n\toffset(x, y, trans, evt) {\n\t\ttrans = trans === false?false:true;\t\n\t\tlet local = this.getLocation(true);\t\t\n\t\tlet offseted = false;\n\t\t\n\t\tif(local.position) {\n\t\t\tlocal.left += x;\n\t\t\tlocal.top += y;\n\t\t\t// 由于local是clone出来的对象，为了保留位移，则要修改原属性\n\t\t\tthis.position.x = local.left;\n\t\t\tthis.position.y = local.top;\n\t\t\toffseted = true;\n\t\t}\n\n\t\tif(local.center) {\t\t\n\t\t\tthis.center.x = local.center.x + x;\n\t\t\tthis.center.y = local.center.y + y;\n\t\t\toffseted = true;\n\t\t}\n\n\t\tif(local.start && typeof local.start == 'object') {\t\n\t\t\tthis.start.x = local.start.x + x;\n\t\t\tthis.start.y = local.start.y + y;\n\t\t\toffseted = true;\n\t\t}\n\n\t\tif(local.end && typeof local.end == 'object') {\t\t\n\t\t\tthis.end.x = local.end.x + x;\n\t\t\tthis.end.y = local.end.y + y;\n\t\t\toffseted = true;\n\t\t}\n\n\n\t\tif(offseted == false && this.cpoints) {\n\t\t\tlet p = typeof this.cpoints == 'function'?this.cpoints:this.cpoints;\n\t\t\tif(p) {\t\t\t\n\t\t\t\tlet len = p.length;\n\t\t\t\tfor(let i=0; i < len;i++) {\n\t\t\t\t\tp[i].x += x;\n\t\t\t\t\tp[i].y += y;\n\t\t\t\t}\t\t\n\t\t\t\toffseted = true;\n\t\t\t}\t\t\t\n\t\t}\n\t\t\n\t\tif(offseted == false && this.points) {\n\t\t\tlet len = this.points.length;\n\t\t\tfor(let i=0; i < len;i++) {\n\t\t\t\tthis.points[i].x += x;\n\t\t\t\tthis.points[i].y += y;\n\t\t\t}\n\t\t\toffseted = true;\n\t\t}\n\t\t\n\t\t//触发控件移动事件\t\n\t\tthis.emit('move',{\n\t\t\toffsetX: x,\n\t\t\toffsetY: y,\n\t\t\ttrans: trans,\n\t\t\tevt: evt\n\t\t});\n\n\t\tthis.needUpdate = true;\n\t}\n\n\t/**\n\t * 获取控件相对于画布的绝对边界，\n\t * 与getBounds不同的是：getBounds获取的是相对于父容器的边界.\n\t *\n\t * @method getAbsoluteBounds\n\t * @return {object} 边界对象(left,top,right,bottom,width,height)\n\t */\n\tgetAbsoluteBounds() {\n\t\t//当前控件的边界，\n\t\tlet rec = this.getBounds();\n\t\tif(this.parent && this.parent.absoluteBounds) {\n\t\t\t//父容器的绝对边界\n\t\t\tlet prec = this.parent.absoluteBounds || this.parent.getAbsoluteBounds();\n\t\t\t\n\t\t\treturn {\n\t\t\t\tleft : prec.left + rec.left,\n\t\t\t\ttop : prec.top + rec.top,\n\t\t\t\tright : prec.left + rec.right,\n\t\t\t\tbottom : prec.top + rec.bottom,\n\t\t\t\twidth : rec.width,\n\t\t\t\theight : rec.height\n\t\t\t};\n\t\t}\n\t\treturn rec;\n\t}\n\n\t/**\n\t * 把当前控制内部坐标转为canvas绝对定位坐标\n\t * \n\t * @method toAbsolutePoint\n\t * @param {x: number, y: number} 内部坐标\n\t */\n\ttoAbsolutePoint(point) {\n\t\tif(point.x || point.y) {\n\t\t\tconst bounds = this.absoluteBounds?this.absoluteBounds:this.getAbsoluteBounds();\n\t\t\t\n\t\t\tpoint.x = (point.x||0) + bounds.left;\n\t\t\tpoint.y = (point.y||0) + bounds.top;\t\n\t\t}\n\t\treturn point;\n\t}\n\n\t/**\n\t * 把绝对定位坐标转为当前控件坐标系内\n\t * @param {*} point \n\t */\n\ttoLocalPosition(point) {\n\t\t\n\t\tconst bounds = this.absoluteBounds?this.absoluteBounds:this.getAbsoluteBounds();\n\t\tif(!bounds) return false;\t\n\t\treturn { \n\t\t\tx: point.x - bounds.left,\n\t\t\ty: point.y - bounds.top\n\t\t};\n\t}\n\n\t/**\n\t * 画控件前初始化\n\t * 执行beginPath开始控件的绘制\n\t * \n\t * @method beginDraw\n\t */\n\tbeginDraw() {\t\n\t\tthis.getLocation(true);//重置位置信息\n\t\tthis.context.beginPath && this.context.beginPath();\t\t\n\t\tif(this.webglControl && this.webglControl.beginDraw) this.webglControl.beginDraw();\n\t}\n\n\t/**\n\t * 结束控件绘制\n\t *\n\t * @method endDraw\n\t */\n\tendDraw() {\n\t\t//如果当前为封闭路径\n\t\tif(this.style.close) {\n\t\t\tif(this.webglControl) this.webglControl.closePath();\n\t\t\tthis.context.closePath && this.context.closePath();\n\t\t}\n\t\t\n\t\tconst fill = this.style['fill'] || this.style['fillStyle'];\n\t\tif(fill) {\n\t\t\tif(this.webglControl) {\n\t\t\t\tconst bounds = this.getBounds();\n\t\t\t\tthis.webglControl.fill(bounds);\n\t\t\t}\n\t\t\tthis.context.fill && this.context.fill();\n\t\t}\n\t\tif(this.style['stroke'] || (!fill && !this.is('jmGraph'))) {\n\t\t\tif(this.webglControl) this.webglControl.stroke();\n\t\t\tthis.context.stroke && this.context.stroke();\n\t\t}\n\n\t\tif(this.webglControl && this.webglControl.endDraw) this.webglControl.endDraw();\n\n\t\tthis.needUpdate = false;\n\t}\n\n\t/**\n\t * 绘制控件\n\t * 在画布上描点\n\t * \n\t * @method draw\n\t */\n\tdraw() {\t\n\t\tif(this.points && this.points.length > 0) {\n\t\t\t//获取当前控件的绝对位置\n\t\t\tconst bounds = this.parent && this.parent.absoluteBounds?this.parent.absoluteBounds:this.absoluteBounds;\n\t\t\tif(this.webglControl) {\n\t\t\t\tthis.webglControl.setParentBounds(bounds);\n\t\t\t\tthis.webglControl.draw([\n\t\t\t\t\t...this.points\n\t\t\t\t]);\n\t\t\t}\n\t\t\telse if(this.context && this.context.moveTo) {\n\t\t\t\tthis.context.moveTo(this.points[0].x + bounds.left,this.points[0].y + bounds.top);\n\t\t\t\tlet len = this.points.length;\t\t\t\n\t\t\t\tfor(let i=1; i < len;i++) {\n\t\t\t\t\tlet p = this.points[i];\n\t\t\t\t\t//移至当前坐标\n\t\t\t\t\tif(p.m) {\n\t\t\t\t\t\tthis.context.moveTo(p.x + bounds.left,p.y + bounds.top);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tthis.context.lineTo(p.x+ bounds.left,p.y + bounds.top);\n\t\t\t\t\t}\t\t\t\n\t\t\t\t}\t\n\t\t\t}\t\n\t\t}\t\n\t}\n\n\t/**\n\t * 绘制当前控件\n\t * 协调控件的绘制，先从其子控件开始绘制，再往上冒。\n\t *\n\t * @method paint\n\t */\n\tpaint(v) {\n\t\tif(v !== false && this.visible !== false) {\t\t\n\t\t\tif(this.initPoints) this.initPoints();\n\t\t\t//计算当前边界\n\t\t\tthis.bounds = null;\n\t\t\tthis.absoluteBounds = this.getAbsoluteBounds();\n\t\t\tlet needDraw = true;//是否需要绘制\n\t\t\tif(!this.is('jmGraph') && this.graph) {\n\t\t\t\tif(this.absoluteBounds.left >= this.graph.width) needDraw = false;\n\t\t\t\telse if(this.absoluteBounds.top >= this.graph.height) needDraw = false;\n\t\t\t\telse if(this.absoluteBounds.right <= 0) needDraw = false;\n\t\t\t\telse if(this.absoluteBounds.bottom <= 0) needDraw = false;\n\t\t\t}\n\t\t\t\n\t\t\tthis.context.save && this.context.save();\n\n\t\t\tthis.emit('beginDraw', this);\n\t\t\t\n\t\t\tthis.setStyle();//设定样式\n\n\t\t\tif(needDraw && this.beginDraw) this.beginDraw();\n\t\t\tif(needDraw && this.draw) this.draw();\t\n\t\t\tif(needDraw && this.endDraw) this.endDraw();\n\n\t\t\tif(this.children) {\n\t\t\t\tthis.children.each(function(i,item) {\n\t\t\t\t\tif(item && item.paint) item.paint();\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.emit('endDraw',this);\t\n\t\t\tthis.context.restore && this.context.restore();\n\t\t\t\n\t\t\tthis.needUpdate = false;\n\t\t}\n\t}\n\n\t/**\n\t * 获取指定事件的集合\n\t * 比如mousedown,mouseup等\n\t *\n\t * @method getEvent\n\t * @param {string} name 事件名称\n\t * @return {list} 事件委托的集合\n\t */\n\tgetEvent(name) {\t\t\n\t\treturn this.__events?this.__events[name]:null;\n\t}\n\n\t/**\n\t * 绑定控件的事件\n\t *\n\t * @method bind\n\t * @param {string} name 事件名称\n\t * @param {function} handle 事件委托\n\t */\n\tbind(name, handle) {\t\n\t\tif(name && name.indexOf(' ') > -1) {\n\t\t\tname = name.split(' ');\n\t\t\tfor(let n of name) {\n\t\t\t\tn && this.bind(n, handle);\n\t\t\t}\n\t\t\treturn;\n\t\t}\t\n\t\t/**\n\t\t * 添加事件的集合\n\t\t *\n\t\t * @method _setEvent\n\t\t * @private\n\t\t */\n\t\tfunction _setEvent(name, events) {\n\t\t\tif(!this.__events) this.__events = {};\n\t\t\treturn this.__events[name] = events;\n\t\t}\n\t\tlet eventCollection = this.getEvent(name) || _setEvent.call(this, name, new jmList());\n\t\tif(!eventCollection.contain(handle)) {\n\t\t\teventCollection.add(handle);\n\t\t}\n\t}\n\n\t/**\n\t * 移除控件的事件\n\t *\n\t * @method unbind \n\t * @param {string} name 事件名称\n\t * @param {function} handle 从控件中移除事件的委托\n\t */\n\tunbind(name, handle) {\t\n\t\tif(name && name.indexOf(' ') > -1) {\n\t\t\tname = name.split(' ');\n\t\t\tfor(let n of name) {\n\t\t\t\tn && this.unbind(n, handle);\n\t\t\t}\n\t\t\treturn;\n\t\t}\t\n\t\tlet eventCollection = this.getEvent(name) ;\t\t\n\t\tif(eventCollection) {\n\t\t\tif(handle) eventCollection.remove(handle);\n\t\t\telse eventCollection.clear();\n\t\t}\n\t}\n\n\n\t/**\n\t * 执行监听回调\n\t * \n\t * @method emit\n\t * @for jmControl\n\t * @param {string} name 触发事件的名称\n\t * @param {array} args 事件参数数组\n\t */\n\temit(...args) {\t\t\t\n\t\tthis.runEventHandle(args[0], args.slice(1));\n\t\treturn this;\n\t}\n\n\t/**\n\t * 独立执行事件委托\n\t *\n\t * @method runEventHandle\n\t * @param {string} 将执行的事件名称\n\t * @param {object} 事件执行的参数，包括触发事件的对象和位置\n\t */\n\trunEventHandle(name, args) {\n\t\tlet events = this.getEvent(name);\t\t\n\t\tif(events) {\n\t\t\tvar self = this;\n\t\t\tif(!Array.isArray(args)) args = [args];\t\n\t\t\tevents.each(function(i, handle) {\n\t\t\t\t//只要有一个事件被阻止，则不再处理同级事件，并设置冒泡被阻断\n\t\t\t\tif(false === handle.apply(self, args)) {\n\t\t\t\t\targs.cancel = true;\n\t\t\t\t}\n\t\t\t});\t\t\n\t\t}\t\n\t\treturn args.cancel;\n\t}\n\n\t/**\n\t * 检 查坐标是否落在当前控件区域中..true=在区域内\n\t *\n\t * @method checkPoint\n\t * @param {point} p 位置参数\n\t * @param {number} [pad] 可选参数，表示线条多远内都算在线上\n\t * @return {boolean} 当前位置如果在区域内则为true,否则为false。\n\t */\n\tcheckPoint(p, pad) {\n\t\t//jmGraph 需要判断dom位置\n\t\tif(this.type == 'jmGraph') {\n\t\t\t//获取dom位置\n\t\t\tlet position = this.getPosition();\n\t\t\t// 由于高清屏会有放大坐标，所以这里用pagex就只能用真实的canvas大小\n\t\t\tconst right = position.left + this.width;\n\t\t\tconst bottom = position.top + this.height;\n\t\t\tif(p.x > right || p.x < position.left) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif(p.y > bottom || p.y < position.top) {\n\t\t\t\treturn false;\n\t\t\t}\t\n\t\t\treturn true;\n\t\t}\n\t\t\n\t\tconst bounds = this.getBounds();\t\n\t\t// 如果指定了合中区域，则以命中区域为准\n\t\tif(this.hitArea) {\n\t\t\tconst hitArea = {\n\t\t\t\tleft: this.hitArea.x + bounds.left,\n\t\t\t\ttop: this.hitArea.y + bounds.top,\n\t\t\t\tright: this.hitArea.width + bounds.left,\n\t\t\t\tbottom: this.hitArea.height + bounds.top,\n\t\t\t};\n\t\t\tif(p.x > hitArea.right || p.x < hitArea.left) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif(p.y > hitArea.bottom || p.y < hitArea.top) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\t\n\t\tlet ps = this.points;\n\t\t//如果不是路径组成，则采用边界做为顶点\n\t\tif(!ps || !ps.length) {\n\t\t\tps = [];\n\t\t\tps.push({x: bounds.left, y: bounds.top}); //左上角\n\t\t\tps.push({x: bounds.right, y: bounds.top});//右上角\n\t\t\tps.push({x: bounds.right, y: bounds.bottom});//右下角\n\t\t\tps.push({x: bounds.left, y: bounds.bottom}); //左下\n\t\t\tps.push({x: bounds.left, y: bounds.top}); //左上角   //闭合\n\t\t}\n\t\t//如果有指定padding 表示接受区域加宽，命中更易\n\t\tpad = Number(pad || this.style['touchPadding'] || this.style['lineWidth'] || 1);\n\t\tif(ps && ps.length) {\n\t\t\tconst rotation = this.getRotation(null, bounds);//获取当前旋转参数\n\t\t\t//如果有旋转参数，则需要转换坐标再处理\n\t\t\tif(rotation && rotation.angle) {\n\t\t\t\tps = jmUtils.clone(ps, true);//拷贝一份数据\n\t\t\t\t//rotateX ,rotateY 是相对当前控件的位置\n\t\t\t\tps = jmUtils.rotatePoints(ps, {\n\t\t\t\t\tx: rotation.x + bounds.left,\n\t\t\t\t\ty: rotation.y + bounds.top\n\t\t\t\t}, rotation.angle || 0);\n\t\t\t}\n\t\t\t//如果当前路径不是实心的\n\t\t\t//就只用判断点是否在边上即可\t\n\t\t\tif(ps.length > 2 && (!this.style['fill'] || this.style['stroke'])) {\n\t\t\t\tlet i = 0;\n\t\t\t\tconst count = ps.length;\n\t\t\t\tfor(let j = i+1; j <= count; j = (++i + 1)) {\n\t\t\t\t\t//如果j超出最后一个\n\t\t\t\t\t//则当为封闭图形时跟第一点连线处理.否则直接返回false\n\t\t\t\t\tif(j == count) {\n\t\t\t\t\t\tif(this.style.close) {\n\t\t\t\t\t\t\tconst r = jmUtils.pointInPolygon(p,[ps[i],ps[0]], pad);\n\t\t\t\t\t\t\tif(r) return true;\n\t\t\t\t\t\t}\n\t\t\t\t\t} \n\t\t\t\t\telse {\n\t\t\t\t\t\t//判断是否在点i,j连成的线上\n\t\t\t\t\t\tconst s = jmUtils.pointInPolygon(p,[ps[i],ps[j]], pad);\n\t\t\t\t\t\tif(s) return true;\n\t\t\t\t\t}\t\t\t\n\t\t\t\t}\n\t\t\t\t//不是封闭的图形，则直接返回\n\t\t\t\tif(!this.style['fill']) return false;\n\t\t\t}\n\n\t\t\tconst r = jmUtils.pointInPolygon(p,ps, pad);\t\t\n\t\t\treturn r;\n\t\t}\n\n\t\tif(p.x > bounds.right || p.x < bounds.left) {\n\t\t\treturn false;\n\t\t}\n\t\tif(p.y > bounds.bottom || p.y < bounds.top) {\n\t\t\treturn false;\n\t\t}\n\t\t\n\t\treturn true;\n\t}\n\n\n\t/**\n\t * 触发控件事件，组合参数并按控件层级关系执行事件冒泡。\n\t *\n\t * @method raiseEvent\n\t * @param {string} name 事件名称\n\t * @param {object} args 事件执行参数\n\t * @return {boolean} 如果事件被组止冒泡则返回false,否则返回true\n\t */\n\traiseEvent(name, args) {\n\t\tif(this.visible === false) return ;//如果不显示则不响应事件\t\n\t\tif(!args.position) {\t\t\n\t\t\tconst graph = this.graph;\n\t\t\targs.isWXMiniApp = graph.isWXMiniApp;\n\n\t\t\tconst srcElement = args.srcElement || args.target;\t\t\t\n\t\t\t\n\t\t\tconst position = jmUtils.getEventPosition(args);//初始化事件位置\n\t\t\n\t\t\targs = {\n\t\t\t\tposition: position,\n\t\t\t\tbutton: args.button == 0 || position.isTouch? 1: args.button,\n\t\t\t\tkeyCode: args.keyCode || args.charCode || args.which,\n\t\t\t\tctrlKey: args.ctrlKey,\n\t\t\t\tcancel : false,\n\t\t\t\tevent: args, // 原生事件\n\t\t\t\tsrcElement : srcElement,\n\t\t\t\tisWXMiniApp: graph.isWXMiniApp,\n\t\t\t};\t\t\n\t\t}\n\t\targs.path = args.path||[]; //事件冒泡路径\n\n\t\t//先执行子元素事件，如果事件没有被阻断，则向上冒泡\n\t\tlet stoped = false;\n\t\tif(this.children) {\n\t\t\tthis.children.each(function(j, el) {\n\t\t\t\t//未被阻止才执行\t\t\t\n\t\t\t\tif(args.cancel !== true) {\n\t\t\t\t\t//如果被阻止冒泡，\n\t\t\t\t\tstoped = el.raiseEvent(name, args) === false? true: stoped;\n\t\t\t\t\t// 不再响应其它元素\n\t\t\t\t\tif(stoped) return false;\n\t\t\t\t}\n\t\t\t}, true);//按逆序处理\n\t\t}\n\t\t// 如果已被阻止，不再响应上级事件\n\t\tif(stoped) return false;\n\t\t\n\t\t//获取当前对象的父元素绝对位置\n\t\t//生成当前坐标对应的父级元素的相对位置\n\t\tlet abounds = this.parent && this.parent.absoluteBounds?this.parent.absoluteBounds : this.absoluteBounds;\n\t\tif(!abounds) return false;\t\n\t\t//args = jmUtils.clone(args);//参数副本\n\t\targs.position.x = args.position.offsetX - abounds.left;\n\t\targs.position.y = args.position.offsetY - abounds.top;\n\n\t\t// 是否在当前控件内操作\n\t\tconst inpos = this.interactive !== false && this.checkPoint(args.position);\n\t\t\n\t\t//事件发生在边界内或健盘事件发生在画布中才触发\n\t\tif(inpos) {\n\t\t\t//如果没有指定触发对象，则认为当前为第一触发对象\n\t\t\tif(!args.target) {\n\t\t\t\targs.target = this;\n\t\t\t}\n\t\t\t\n\t\t\tthis.runEventAndPopEvent(name, args);\n\n\t\t\tif(!this.focused && (name === 'mousemove' || name === 'touchmove')) {\n\t\t\t\tthis.focused = true;//表明当前焦点在此控件中\n\t\t\t\tthis.raiseEvent(name === 'mousemove'? 'mouseover': 'touchover', args);\n\t\t\t}\t\n\t\t}\n\t\telse {\n\t\t\t//如果焦点不在，且原焦点在，则触发mouseleave事件\n\t\t\tif(this.interactive !== false && !inpos &&\n\t\t\t\tthis.focused && \n\t\t\t\t(name === 'mousemove' || name === 'touchmove')) {\n\n\t\t\t\tthis.focused = false;//表明当前焦点离开\n\t\t\t\tthis.runEventHandle(name === 'mousemove'? 'mouseleave' : 'touchleave', args);//执行事件\t\n\t\t\t}\t\n\t\t}\n\t\t\t\n\t\treturn args.cancel === false;//如果被阻止则返回false,否则返回true\n\t}\n\n\t/**\n\t * 执行事件，并进行冒泡\n\t * @param {string} name 事件名称 \n\t * @param {object} args 事件参数\n\t */\n\trunEventAndPopEvent(name, args) {\t\n\n\t\tif(args.cancel !== true) {\n\t\t\t// 添加到触发路径\n\t\t\targs.path.push(this);\n\n\t\t\t//如果返回true则阻断冒泡\n\t\t\tthis.runEventHandle(name, args);//执行事件\n\n\t\t\t// // 向父节点冒泡事件\t\t\n\t\t\t// if(args.cancel !== true && this.parent && this.parent.runEventAndPopEvent) {\n\t\t\t// \t// 相对位置需要改为父节点的\n\t\t\t// \tif(args.position) {\n\t\t\t// \t\tlet bounds = this.parent.getBounds();\n\t\t\t// \t\targs.position.x += bounds.left;\n\t\t\t// \t\targs.position.y += bounds.top;\n\t\t\t// \t}\n\t\t\t// \tthis.parent.runEventAndPopEvent(name, args);\n\t\t\t// }\t\t\n\t\t}\n\t}\n\n\t/**\n\t * 清空控件指定事件\n\t *\n\t * @method clearEvents\n\t * @param {string} name 需要清除的事件名称\n\t */\n\tclearEvents(name) {\n\t\tvar eventCollection = this.getEvent(name) ;\t\t\n\t\tif(eventCollection) {\n\t\t\teventCollection.clear;\n\t\t}\n\t}\n\n\t/**\n\t * 查找其父级类型为type的元素，直到找到指定的对象或到最顶级控件后返回空。\n\t *\n\t * @method findParent \n\t * @param {object} 类型名称或类型对象\n\t * @return {object} 指定类型的实例\n\t */\n\tfindParent(type) {\n\t\t//如果为类型名称，则返回名称相同的类型对象\n\t\tif(typeof type === 'string') {\n\t\t\tif(this.type == type)\n\t\t\t\treturn this;\n\t\t}\n\t\telse if(this.is(type)) {\n\t\t\treturn this;\n\t\t}\n\t\tif(this.parent) {\n\t\t\treturn this.parent.findParent(type);\n\t\t}\n\t\treturn null;\n\t}\n\n\t/**\n\t * 设定是否可以移动\n\t * 此方法需指定jmgraph或在控件添加到jmgraph后再调用才能生效。\n\t *\n\t * @method canMove\n\t * @param {boolean} m true=可以移动，false=不可移动或清除移动。\n\t * @param {jmGraph} [graph] 当前画布，如果为空的话必需是已加入画布的控件，否则得指定画布。\n\t */\n\tcanMove(m, graph) {\n\t\tif(!this.__mvMonitor) {\n\t\t\t/**\n\t\t\t * 控制控件移动对象\n\t\t\t * \n\t\t\t * @property __mvMonitor\n\t\t\t * @private\n\t\t\t */\n\t\t\tthis.__mvMonitor = {};\n\t\t\tthis.__mvMonitor.mouseDown = false;\n\t\t\tthis.__mvMonitor.curposition={x:0,y:0};\n\t\t\tvar self = this;\n\t\t\t/**\n\t\t\t * 控件移动鼠标事件\n\t\t\t *\n\t\t\t * @method mv\n\t\t\t * @private\n\t\t\t */\n\t\t\tthis.__mvMonitor.mv = function(evt) {\n\t\t\t\tlet _this = self;\n\t\t\t\t//如果鼠标经过当前可移动控件，则显示可移动指针\n\t\t\t\t//if(evt.path && evt.path.indexOf(_this)>-1) {\n\t\t\t\t//\t_this.cursor('move');\t\n\t\t\t\t//}\n\n\t\t\t\tif(_this.__mvMonitor.mouseDown) {\n\t\t\t\t\t_this.parent.bounds = null;\n\t\t\t\t\t//let parentbounds = _this.parent.getAbsoluteBounds();\t\t\n\t\t\t\t\tlet offsetx = evt.position.offsetX - _this.__mvMonitor.curposition.x;\n\t\t\t\t\tlet offsety = evt.position.offsetY - _this.__mvMonitor.curposition.y;\t\t\t\t\n\t\t\t\t\t//console.log(offsetx + ',' + offsety);\n\t\t\t\t\t//如果锁定边界\n\t\t\t\t\tif(_this.option.lockSide) {\n\t\t\t\t\t\tlet thisbounds = _this.bounds || _this.getAbsoluteBounds();\t\t\t\t\t\n\t\t\t\t\t\t//检查边界出界\n\t\t\t\t\t\tlet outside = jmUtils.checkOutSide(_this.option.lockSide, thisbounds, { x: offsetx, y: offsety });\n\t\t\t\t\t\tif(outside.left < 0 && offsetx < 0) {\n\t\t\t\t\t\t\t//offsetx -= outside.left;\n\t\t\t\t\t\t\toffsetx = 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(outside.right > 0 && offsetx > 0) {\n\t\t\t\t\t\t\t//offsetx -= outside.right;\n\t\t\t\t\t\t\toffsetx = 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(outside.top < 0 && offsety < 0) {\n\t\t\t\t\t\t\t//offsety -= outside.top;\n\t\t\t\t\t\t\toffsety = 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(outside.bottom > 0 && offsety > 0) {\n\t\t\t\t\t\t\t//offsety -= outside.bottom;\n\t\t\t\t\t\t\toffsety = 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif(offsetx || offsety) {\n\t\t\t\t\t\t_this.offset(offsetx, offsety, true, evt);\n\t\t\t\t\t\tif(offsetx) _this.__mvMonitor.curposition.x = evt.position.offsetX;\n\t\t\t\t\t\tif(offsety) _this.__mvMonitor.curposition.y = evt.position.offsetY;\t\n\t\t\t\t\t\t//console.log(offsetx + '.' + offsety);\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\t/**\n\t\t\t * 控件移动鼠标松开事件\n\t\t\t *\n\t\t\t * @method mu\n\t\t\t * @private\n\t\t\t */\n\t\t\tthis.__mvMonitor.mu = function(evt) {\n\t\t\t\tlet _this = self;\n\t\t\t\tif(_this.__mvMonitor.mouseDown) {\n\t\t\t\t\t_this.__mvMonitor.mouseDown = false;\n\t\t\t\t\t//_this.cursor('default');\n\t\t\t\t\t_this.emit('moveend',{position:_this.__mvMonitor.curposition});\t\n\t\t\t\t\t//return false;\n\t\t\t\t}\t\t\t\n\t\t\t}\n\t\t\t/**\n\t\t\t * 控件移动鼠标离开事件\n\t\t\t *\n\t\t\t * @method ml\n\t\t\t * @private\n\t\t\t */\n\t\t\tthis.__mvMonitor.ml = function() {\n\t\t\t\tlet _this = self;\n\t\t\t\tif(_this.__mvMonitor.mouseDown) {\n\t\t\t\t\t_this.__mvMonitor.mouseDown = false;\n\t\t\t\t\t//_this.cursor('default');\t\n\t\t\t\t\t_this.emit('moveend',{position:_this.__mvMonitor.curposition});\n\t\t\t\t\treturn false;\n\t\t\t\t}\t\n\t\t\t}\n\t\t\t/**\n\t\t\t * 控件移动鼠标按下事件\n\t\t\t *\n\t\t\t * @method md\n\t\t\t * @private\n\t\t\t */\n\t\t\tthis.__mvMonitor.md = function(evt) {\n\t\t\t\t\n\t\t\t\tif(this.__mvMonitor.mouseDown) return;\n\t\t\t\tif(evt.button == 0 || evt.button == 1) {\n\t\t\t\t\tthis.__mvMonitor.mouseDown = true;\n\t\t\t\t\t//this.cursor('move');\n\t\t\t\t\t//var parentbounds = this.parent.absoluteBounds || this.parent.getAbsoluteBounds();\t\n\t\t\t\t\tthis.__mvMonitor.curposition.x = evt.position.offsetX;//evt.position.x + parentbounds.left;\n\t\t\t\t\tthis.__mvMonitor.curposition.y = evt.position.offsetY;//evt.position.y + parentbounds.top;\n\t\t\t\t\t//触发控件移动事件\n\t\t\t\t\tthis.emit('movestart',{position:this.__mvMonitor.curposition});\n\t\t\t\t\t\n\t\t\t\t\tevt.cancel = true;\n\t\t\t\t\treturn false;\n\t\t\t\t}\t\t\t\n\t\t\t}\n\t\t}\n\t\tgraph = graph || this.graph ;//获取最顶级元素画布\n\t\t\n\t\tif(m !== false) {\t\t\t\n\t\t\tgraph.bind('mousemove',this.__mvMonitor.mv);\n\t\t\tgraph.bind('mouseup',this.__mvMonitor.mu);\n\t\t\tgraph.bind('mouseleave',this.__mvMonitor.ml);\n\t\t\tthis.bind('mousedown',this.__mvMonitor.md);\n\t\t\tgraph.bind('touchmove',this.__mvMonitor.mv);\n\t\t\tgraph.bind('touchend',this.__mvMonitor.mu);\n\t\t\tthis.bind('touchstart',this.__mvMonitor.md);\n\t\t}\n\t\telse {\t\t\t\n\t\t\tgraph.unbind('mousemove',this.__mvMonitor.mv);\n\t\t\tgraph.unbind('mouseup',this.__mvMonitor.mu);\n\t\t\tgraph.unbind('mouseleave',this.__mvMonitor.ml);\n\t\t\tthis.unbind('mousedown',this.__mvMonitor.md);\n\t\t\tgraph.unbind('touchmove',this.__mvMonitor.mv);\n\t\t\tgraph.unbind('touchend',this.__mvMonitor.mu);\n\t\t\tthis.unbind('touchstart',this.__mvMonitor.md);\t\n\t\t}\n\n\t\tthis.interactive = true;// 如果可以移动，则响应事件\n\t\treturn this;\n\t}\n};\n\nexport { jmControl };","import {jmControl} from \"./jmControl.js\";\n/**\n * 基础路径,大部分图型的基类\n * 指定一系列点，画出图形\n *\n * @class jmPath\n * @extends jmControl\n * @param {object} params 路径参数 points=所有描点\n */\n\nexport default class jmPath extends jmControl {\t\n\n\tconstructor(params, t='jmPath') {\n\t\tsuper(params, t);\t\t\n\t\tthis.points = params && params.points ? params.points : [];\t\n\t}\n\t\n\t/**\n\t * 描点集合\n\t * point格式：{x:0,y:0,m:true}\n\t * @property points\n\t * @type {array}\n\t */\n\tget points() {\n\t\tlet s = this.property('points');\n\t\treturn s;\n\t}\n\tset points(v) {\n\t\tthis.needUpdate = true;\n\t\treturn this.property('points', v);\n\t}\t\n\t\n}\n\nexport { jmPath };\n","import {jmUtils} from \"./jmUtils.js\";\nimport {jmList} from \"./jmList.js\";\nimport {jmProperty} from './jmProperty.js';\nimport {jmShadow} from \"./jmShadow.js\";\nimport {jmGradient} from \"./jmGradient.js\";\nimport {jmEvents} from \"./jmEvents.js\";\nimport {jmControl} from \"./jmControl.js\";\nimport {jmPath} from \"./jmPath.js\";\n\n/**\n * jmGraph画图类库\n * 对canvas画图api进行二次封装，使其更易调用，省去很多重复的工作。\n *\n * @module jmGraph\n * @class jmGraph\n * @extends jmControl\n * @param {element} canvas 标签canvas\n * @param {object} option 参数：{width:宽,height:高}\n * @param {function} callback 初始化后的回调\n */\nexport default class jmGraph extends jmControl {\n\n\tconstructor(canvas, option, callback) {\n\t\tif(typeof option == 'function') {\n\t\t\tcallback = option;\n\t\t\toption = {};\n\t\t}\n\t\n\t\toption = option || {};\n\t\t//option.mode = '2d'; // webgl | 2d 暂不支持webgl\n\t\toption.interactive = true;\n\t\toption.isRegular = true;// 规则的\n\n\t\tsuper(option, 'jmGraph');\n\n\t\tthis.option = option || {};\n\t\t\n\t\tthis.devicePixelRatio = 1; // 根据屏幕的缩放倍数\n\n\t\t/**\n\t\t * 工具类\n\t\t * @property utils/util\n\t\t * @type {jmUtils}\n\t\t */\n\t\tthis.util = this.utils = jmUtils;\t\n\t\t// 模式 webgl | 2d\n\t\tthis.mode = option.mode || '2d';\n\n\t\t//如果是小程序\n\t\tif(typeof wx != 'undefined' && wx.canIUse && wx.canIUse('canvas')) {\t\t\t\n\t\t\tif(typeof canvas === 'string') canvas = wx.createSelectorQuery().select('#' + canvas);\n\t\t\tthis.isWXMiniApp = true;// 微信小程序平台\n\t\t\tthis.container = canvas;\n\t\t}\n\t\telse {\n\t\t\tif(typeof canvas === 'string' && typeof document != 'undefined') {\n\t\t\t\tcanvas = document.getElementById(canvas);\n\t\t\t}\n\t\t\telse if(canvas.length) {\n\t\t\t\tcanvas = canvas[0];\n\t\t\t}\n\n\t\t\tif(!canvas.getContext && typeof document != 'undefined') {\n\t\t\t\tthis.container = canvas;\n\t\t\t\tlet cn = document.createElement('canvas');\n\t\t\t\tcanvas.appendChild(cn);\n\t\t\t\tcn.width = canvas.offsetWidth||canvas.clientWidth;\n\t\t\t\tcn.height = canvas.offsetHeight||canvas.clientHeight;\n\t\t\t\tcanvas = cn;\n\t\t\t}\t\n\t\t\telse {\n\t\t\t\tthis.container = canvas.parentElement;\n\t\t\t}\n\t\t}\t\n\t\tthis.canvas = canvas;\t\n\t\tthis.context = canvas.getContext(this.mode);\n\n\t\tthis.textureCanvas = option.textureCanvas || null;\n\t\t\n\t\t// webgl模式\n\t\tif(this.mode === 'webgl') {\n\n\t\t\tthis.context.enable(this.context.BLEND);// 开启混合功能：（注意，它不可和gl.DEPTH_TEST一起使用）\n\t\t\tthis.context.blendFunc(this.context.SRC_ALPHA, this.context.ONE_MINUS_SRC_ALPHA); // 指定混合函数：\n\t\t\t// webglcontextlost webglcontextrestored\n\t\t\tjmUtils.bindEvent(canvas, 'webglcontextlost', (e)=> {\n\t\t\t\tconsole.log('canvas webglcontextlost', e);\n\t\t\t\tthis.emit('webglcontextlost', e);\n\t\t\t});\n\t\t\tjmUtils.bindEvent(canvas, 'webglcontextrestored', (e)=> {\n\t\t\t\tconsole.log('canvas webglcontextrestored', e);\n\t\t\t\tthis.emit('webglcontextrestored', e);\n\t\t\t});\n\t\t} \n\t\tthis.__init(callback);\n\t}\n\n\t/**\n\t * 初始化画布\n\t * @method init\n\t */\n\t__init(callback) {\n\t\t/**\n\t\t * 当前所有图形类型\n\t\t * @property shapes\n\t\t * @type {object}\n\t\t */\n\t\tthis.shapes = Object.assign({\n\t\t\t\"path\": jmPath,\n\t\t}, this.option.shapes);\n\t\t\n\t\t/**\n\t\t * 画控件前初始化\n\t\t * 为了解决一像素线条问题\n\t\t */\n\t\tthis.on('beginDraw', function() {\t\n\t\t\tthis.context.translate && this.context.translate(0.5, 0.5);\n\t\t});\n\t\t/**\n\t\t * 结束控件绘制 为了解决一像素线条问题\n\t\t */\n\t\tthis.on('endDraw', function() {\t\n\t\t\tthis.context.translate && this.context.translate(-0.5, -0.5);\t\t\n\t\t});\n\n\t\t// devicePixelRatio初始化\n\t\tlet dpr = typeof window != 'undefined' && window.devicePixelRatio > 1? window.devicePixelRatio : 1;\n\t\tif(this.isWXMiniApp) {\n\t\t\tdpr = wx.getWindowInfo().pixelRatio || 1;\n\t\t}\t\t\n\t\tthis.devicePixelRatio = dpr;\n\t\t// 为了解决锯齿问题，先放大canvas再缩放\n\t\tthis.dprScaleSize = this.devicePixelRatio > 1? this.devicePixelRatio : 2;\n\t\t\n\t\tif(this.option.width > 0) this.width = this.option.width;\n\t\tif(this.option.height > 0) this.height = this.option.height;\t\n\t\tthis.resize();\t\t\n\n\t\t//绑定事件\n\t\tthis.eventHandler = new jmEvents(this, this.canvas.canvas || this.canvas);\t\n\n\t\t//如果指定了自动刷新\n\t\tif(this.option.autoRefresh) {\n\t\t\tthis.autoRefresh();\n\t\t}\n\n\t\tif(callback) callback(this);\t\t\n\t}\n\n\t//  重置canvas大小，并判断高清屏，画图先放大二倍\n\tresize(w, h) {\n\t\tif(!this.canvas) return;\n\n\t\tthis.__normalSize = this.__normalSize || { width: 0, height: 0};\n\t\tw = w || this.__normalSize.width || this.width, h = h || this.__normalSize.height || this.height;\n\n\t\tif(w) this.__normalSize.width = w;\n\t\tif(h) this.__normalSize.height = h;\n\t\n\t\tthis.css('width', w + \"px\");\n\t\tthis.css('height', h + \"px\");\n\t\tif(this.mode === '2d') {\n\t\t\tthis.canvas.height = h * this.dprScaleSize;\n\t\t\tthis.canvas.width = w * this.dprScaleSize;\n\t\t\tif(this.dprScaleSize !== 1) this.context.scale && this.context.scale(this.dprScaleSize, this.dprScaleSize);\t\n\t\t}\n\t\telse {\n\t\t\tthis.canvas.width = w;\n\t\t\tthis.canvas.height = h;\n\t\t}\n\n\t\tthis.context.viewport && this.context.viewport(0, 0, w, h);\n\t\tthis.needUpdate = true;\n\t}\n\n\t/**\n\t * 宽度\n\t * @property width\n\t * @type {number}\n\t */\n\tget width() {\n\t\tif(this.__normalSize && this.__normalSize.width) return this.__normalSize.width;\n\t\tif(this.canvas) return this.canvas.width;\n\t\treturn 0;\n\t}\n\tset width(v) {\n\t\tthis.needUpdate = true;\n\t\tif(this.canvas) {\n\t\t\tthis.resize(v);\n\t\t}\t\n\t\treturn v;\n\t}\n\n\t/**\n\t * 高度\n\t * @property height\n\t * @type {number}\n\t */\n\tget height() {\n\t\tif(this.__normalSize && this.__normalSize.height) return this.__normalSize.height;\n\t\tif(this.canvas) return this.canvas.height;\n\t\treturn 0;\n\t}\n\tset height(v) {\n\t\tthis.needUpdate = true;\n\t\tif(this.canvas) {\n\t\t\tthis.resize(0, v);\n\t\t}\n\t\treturn v;\n\t}\n\n\t/**\n\t * 创建jmGraph的静态对象\n\t *\n\t * @method create\n\t * @return {jmGraph} jmGraph实例对象\n\t */\n\tstatic create(...args) {\n\t\treturn new jmGraph(...args);\n\t}\n\n\t/**\n\t * 获取当前画布在浏览器中的绝对定位\n\t *\n\t * @method getPosition\n\t * @return {postion} 返回定位坐标\n\t */\n\tgetPosition() {\n\t\tconst p = this.isWXMiniApp? {\n\t\t\tleft: 0,\n\t\t\ttop: 0\n\t\t} :jmUtils.getElementPosition(this.canvas.canvas || this.canvas);\n\t\t\n\t\tp.width = this.width;\n\t\tp.height = this.height;\n\t\tp.right = p.left + p.width;\n\t\tp.bottom = p.top + p.height;\n\t\treturn p;\n\t}\n\n\t/**\n\t * 注册图形类型,图形类型必需有统一的构造函数。参数为画布句柄和参数对象。\n\t *\n\t * @method registerShape \n\t * @param {string} name 控件图形名称\n\t * @param {class} shape 图形控件类型\n\t */\n\tregisterShape(name, shape) {\n\t\tthis.shapes[name] = shape;\n\t}\n\n\t/**\n\t * 从已注册的图形类创建图形\n\t * 简单直观创建对象\n\t *\n\t * @method createShape \n\t * @param {string} shape 注册控件的名称 也可以直接是控件类型\n\t * @param {object} args 实例化控件的参数\n\t * @return {object} 已实例化控件的对象\n\t */\n\tcreateShape(shape, args) {\n\t\tif(typeof shape === 'string') {\n\t\t\tshape = this.shapes[shape];\n\t\t}\n\t\tif(shape) {\n\t\t\tif(!args) args = {};\n\t\t\targs.graph = this;\n\t\t\tlet obj = new shape(args);\n\t\t\treturn obj;\n\t\t}\n\t}\n\n\t/**\n\t * 生成阴影对象\n\t *\n\t * @method createShadow\n\t * @param {number} x x偏移量\n\t * @param {number} y y偏移量\n\t * @param {number} blur 模糊值\n\t * @param {string} color 颜色\n\t * @return {jmShadow} 阴影对象\n\t */\n\tcreateShadow(x, y, blur, color) {\n\t\tconst sh = new jmShadow(x, y, blur, color);\n\t\treturn sh;\n\t}\n\n\t/**\n\t * 生成线性渐变对象\n\t *\n\t * @method createLinearGradient\n\t * @param {number} x1 线性渐变起始点X坐标\n\t * @param {number} y1 线性渐变起始点Y坐标\n\t * @param {number} x2 线性渐变结束点X坐标\n\t * @param {number} y2 线性渐变结束点Y坐标\n\t * @return {jmGradient} 线性渐变对象\n\t */\n\tcreateLinearGradient(x1, y1, x2, y2, stops=[]) {\n\t\tconst gradient = new jmGradient({\n\t\t\ttype:'linear',\n\t\t\tx1: x1,\n\t\t\ty1: y1,\n\t\t\tx2: x2,\n\t\t\ty2: y2,\n\t\t\tstops\n\t\t});\n\t\treturn gradient;\n\t}\n\n\t/**\n\t * 生成放射渐变对象\n\t *\n\t * @method createRadialGradient\n\t * @param {number} x1 放射渐变小圆中心X坐标\n\t * @param {number} y1 放射渐变小圆中心Y坐标\n\t * @param {number} r1 放射渐变小圆半径\n\t * @param {number} x2 放射渐变大圆中心X坐标\n\t * @param {number} y2 放射渐变大圆中心Y坐标\n\t * @param {number} r2 放射渐变大圆半径\n\t * @return {jmGradient} 放射渐变对象\n\t */\n\tcreateRadialGradient(x1, y1, r1, x2, y2, r2, stops=[]) {\t\n\t\tconst gradient = new jmGradient({\n\t\t\ttype:'radial',\n\t\t\tx1: x1,\n\t\t\ty1: y1,\n\t\t\tr1: r1,\n\t\t\tx2: x2,\n\t\t\ty2: y2,\n\t\t\tr2: r2,\n\t\t\tstops\n\t\t});\n\t\treturn gradient;\n\t}\n\n\t/**\n\t * 重新刷新整个画板\n\t * 以加入动画事件触发延时10毫秒刷新，保存最尽的调用只刷新一次，加强性能的效果。\n\t *\n\t * @method refresh\n\t */\n\trefresh() {\t\n\t\t//加入动画，触发redraw，会导致多次refresh只redraw一次\n\t\t/*this.animate(function() {\n\t\t\treturn false;\n\t\t},100,'jmgraph_refresh');*/\n\t\tthis.redraw();\n\t}\n\n\t/**\n\t * 重新刷新整个画板\n\t * 此方法直接重画，与refresh效果类似\n\t *\n\t * @method redraw\n\t * @param {number} [w] 清除画布的宽度\n\t * @param {number} [h] 清除画布的高度\n\t */\n\tredraw(w, h) {\t\n\t\tthis.clear(w||this.width, h||this.height);\n\t\tthis.paint();\n\t}\n\n\t/**\n\t * 清除画布\n\t * \n\t * @method clear\n\t * @param {number} [w] 清除画布的宽度\n\t * @param {number} [h] 清除画布的高度\n\t */\n\tclear(w, h) {\n\t\tif(!w || !h) {\n\t\t\tw = this.width;\n\t\t\th = this.height;\n\t\t\t/*if(this.scaleSize) {\n\t\t\t\tw = w / this.scaleSize.x;\n\t\t\t\th = h / this.scaleSize.y;\n\t\t\t}*/\n\t\t}\n\t\t\n\t\tif(this.context.clearRect) {\n\t\t\tif(this.style && this.style.fill) {\n\t\t\t\tthis.points = [\n\t\t\t\t\t{x:0, y:0},\n\t\t\t\t\t{x:w, y:0},\n\t\t\t\t\t{x:w, y:h},\n\t\t\t\t\t{x:0, y:h}\n\t\t\t\t];\n\t\t\t\tthis.style.close = true;// 封闭填充\n\t\t\t}\n\n\t\t\tthis.context.clearRect(0, 0, w, h);\n\t\t}\n\t\telse if(this.mode === 'webgl' && this.context.clear) {\n\t\t\tconst color = this.style && this.style.fill? this.utils.hexToRGBA(this.style.fill): {\n\t\t\t\tr: 0,\n\t\t\t\tg: 0,\n\t\t\t\tb: 0,\n\t\t\t\ta: 0\n\t\t\t};\n\t\t\tthis.context.clearColor(color.r, color.g, color.b, color.a); // 设置清空颜色缓冲时的颜色值\n        \tthis.context.clear(this.context.COLOR_BUFFER_BIT); // 清空颜色缓冲区，也就是清空画布\n\t\t}\n\t}\n\n\t/**\n\t* 设置画布样式，此处只是设置其css样式\n\t*\n\t* @method css\n\t* @param {string} name 样式名\n\t* @param {string} value 样式值\n\t*/\n\tcss(name, value) {\n\t\tif(this.canvas && this.canvas.style) {\n\t\t\tif(typeof value != 'undefined') this.canvas.style[name] = value;\n\t\t\treturn this.canvas.style[name];\n\t\t}\n\t}\n\n\t/**\n\t * 生成路径对象\n\t *\n\t * @method createPath\n\t * @param {array} points 路径中的描点集合\n\t * @param {style} style 当前路径的样式\n\t * @return {jmPath} 路径对象jmPath\n\t */\n\tcreatePath(points, style, option={}) {\n\t\tconst path = this.createShape('path',{\n\t\t\tpoints: points,\n\t\t\tstyle: style,\n\t\t\t...option\n\t\t});\n\t\treturn path;\n\t}\n\n\t/**\n\t * 生成直线\n\t * \n\t * @method createLine\n\t * @param {point} start 直线的起点\n\t * @param {point} end 直线的终点\n\t * @param {style} 直线的样式\n\t * @return {jmLine} 直线对象\n\t */\n\tcreateLine(start, end, style) {\n\t\tconst line = this.createShape('line', {\n\t\t\tstart: start,\n\t\t\tend: end,\n\t\t\tstyle: style\n\t\t});\n\t\treturn line;\n\t}\n\n\t/**\n\t * 缩小整个画布按比例0.9\n\t * \n\t * @method zoomOut\n\t */\n\tzoomOut() {\n\t\tthis.scale(0.9 ,0.9);\n\t}\n\n\t/**\n\t * 放大 每次增大0.1的比例\n\t * \n\t * @method zoomIn\n\t */\n\tzoomIn() {\t\t\n\t\tthis.scale(1.1 ,1.1);\n\t}\n\n\t/**\n\t * 大小复原\n\t * \n\t * @method zoomActual\n\t */\n\tzoomActual() {\n\t\tif(this.scaleSize) {\n\t\t\tthis.scale(1 / this.scaleSize.x ,1 / this.scaleSize.y);\t\n\t\t}\n\t\telse {\n\t\t\tthis.scale(1 ,1);\t\n\t\t}\t\n\t}\n\n\t/**\n\t * 放大缩小画布\n\t * \n\t * @method scale\n\t * @param {number} dx 缩放X轴比例\n\t * @param {number} dy 缩放Y轴比例\n\t */\n\tscale(dx, dy) {\n\t\tif(!this.normalSize) {\n\t\t\tthis.normalSize = {\n\t\t\t\twidth: this.canvas.width,\n\t\t\t\theight: this.canvas.height\n\t\t\t};\t\t\n\t\t}\n\t\t\n\t\t//this.context.scale && this.context.scale(dx,dy);\n\t\tif(!this.scaleSize) {\n\t\t\tthis.scaleSize = {x: 1,y: 1};\n\t\t}\n\t\telse {\n\t\t\tthis.scaleSize = {x: dx * this.scaleSize.x, y: dy * this.scaleSize.y};\n\t\t}\n\t\tthis.canvas.style && (this.canvas.style.transform = `scale(${this.scaleSize.x}, ${this.scaleSize.y})`);\n\t}\n\n\t/**\n\t * 保存为base64图形数据\n\t * \n\t * @method toDataURL\n\t * @return {string} 当前画布图的base64字符串\n\t */\n\ttoDataURL() {\n\t\tlet data = this.canvas.toDataURL?this.canvas.toDataURL():'';\n\t\treturn data;\n\t}\n\n\t/** \n\t * 自动刷新画版\n\t * @param {function} callback 执行回调\n\t */\n\tautoRefresh(callback) {\n\t\tif(this.___isAutoRefreshing) return;\n\t\tconst self = this;\n\t\tthis.___isAutoRefreshing = true;\n\t\t\n\t\tconst refreshStartTime = Date.now();\n\t\tfunction update() {\n\t\t\tif(self.destroyed) {\n\t\t\t\tself.___isAutoRefreshing = false;\n\t\t\t\treturn;// 已销毁\n\t\t\t}\n\t\t\tif(self.needUpdate) self.redraw();\n\n\t\t\tconst time = Date.now() - refreshStartTime;\n\t\t\t// 触发刷新事件\n\t\t\tself.emit('update', time);\n\n\t\t\tself.__requestAnimationFrameFunHandler && self.cancelAnimationFrame(self.__requestAnimationFrameFunHandler);\n\t\t\tself.__requestAnimationFrameFunHandler = self.requestAnimationFrame(update);\n\t\t\tif(callback) callback();\n\t\t}\n\t\tself.__requestAnimationFrameFunHandler && this.cancelAnimationFrame(self.__requestAnimationFrameFunHandler);\n\t\tself.__requestAnimationFrameFunHandler = this.requestAnimationFrame(update);\n\t\treturn this;\n\t}\n\n\t// 销毁当前对象\n\tdestroy() {\n\t\tthis.eventHandler.destroy();\n\t\tthis.destroyed = true;// 标记已销毁\n\t}\n}\n\nexport { \n\tjmGraph, \n\tjmUtils,\n\tjmList,\n\tjmProperty,\n\tjmShadow,\n\tjmGradient,\n\tjmEvents,\n\tjmControl,\n\tjmPath,\n };\n"],"names":["jmList","Array","ps","arg","length","isArray","i","push","option","type","obj","this","includes","_typeof","removeAt","index","splice","removeHandler","call","find","cb","inverse","len","handler","count","colorKeywords","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgrey","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","transparent","jmUtils","source","target","v","deep","copyHandler","deepIndex","undefined","isType","dest","clone","slice","k","__proto__","tagName","getContext","name","fun","opt","indexOf","ns","split","bindEvent","attachEvent","addEventListener","removeEventListener","detachEvent","el","pos","offsetParent","top","offsetTop","left","offsetLeft","x","y","evt","scale","isWXMiniApp","event","isTouch","touches","changedTouches","targetTouches","srcElement","px","pageX","clientX","document","documentElement","scrollLeft","body","py","pageY","clientY","scrollTop","ox","offsetX","oy","offsetY","p","getElementPosition","layerX","layerY","screenX","screenY","constructor","pt","polygon","offset","n","Math","abs","pointOnLine","rayCasting","p1","p2","minX","min","maxX","max","minY","maxY","f","l","sqrt","inside","testY","testX","j","yi","yj","xi","xj","parentBounds","targetBounds","result","right","bottom","rp","r","cos","sin","x1","y1","c","sc","substring","trimStart","trimEnd","per","trim","tmp","checkPercent","h","toLowerCase","iv","floor","hex","__hexToRGBA_Cache","m","res","color","a","substr","g","b","Number","hexToNumber","toFixed","match","byteToDecimal","hexToRGBA","callback","win","requestAnimationFrame","window","setTimeout","cancelAnimationFrame","clearTimeout","control_id_counter","jmObject","graph","id","is","arguments","animateHandles","params","add","millisec","handle","self","dispatcher","_this","overduehandles","curTimes","Date","now","each","ani","times","apply","e","remove","animate","PROPERTY_KEY","Symbol","jmProperty","mode","pars","pros","value","args","oldValue","newValue","emit","property","needUpdate","findParent","canvas","jmShadow","blur","fromString","s","ms","test","jmGradient","stops","control","gradient","context","bounds","absoluteBounds","getAbsoluteBounds","x2","y2","location","getLocation","d","radius","width","height","percentToNumber","sx1","sy1","sx2","sy2","webglControl","createLinearGradient","key","toString","r1","r2","createRadialGradient","createCircularGradient","toColor","addColorStop","get","par","spindex","lastIndexOf","isNaN","addStop","str","jmEvents","container","mouseHandler","jmMouseEvent","keyHandler","jmKeyEvent","eventName","raiseEvent","destroy","instance","eventEvents","init","doc","preventDefault","touchStart","passive","touchMove","touchEnd","touchCancel","removeEvent","checkKeyEvent","earcut","data","holeIndices","dim","invSize","hasHoles","outerLen","outerNode","linkedList","triangles","next","prev","start","list","queue","end","steiner","leftmost","getLeftmost","sort","compareX","hole","bridge","hx","hy","qx","Infinity","stop","mx","my","tanMin","pointInTriangle","locallyInside","area","sectorContainsSector","findHoleBridge","bridgeReverse","splitPolygon","filterPoints","eliminateHole","eliminateHoles","earcutLinked","clockwise","last","signedArea","insertNode","equals","removeNode","again","ear","pass","z","zOrder","prevZ","nextZ","q","tail","numMerges","pSize","qSize","inSize","sortLinked","indexCurve","ax","bx","cx","ay","by","cy","x0","y0","minZ","maxZ","isEarHashed","isEar","intersects","cureLocalIntersections","intersectsPolygon","middleInside","isValidDiagonal","splitEarcut","q1","q2","o1","sign","o2","o3","o4","onSegment","num","a2","Node","b2","an","bp","sum","deviation","polygonArea","trianglesArea","flatten","vertices","holes","dimensions","holeIndex","WebglGradient","dx","dy","pow","points","textureContext","forEach","utils","toFillTexture","createShader","gl","src","shader","shaderSource","compileShader","GLSL_TO_SIZE","mapSize","GL_TABLE","GL_TO_GLSL_TYPES","mapType","typeNames","Object","keys","tn","createProgram","vertexSrc","fragmentSrc","vertexShader","VERTEX_SHADER","fragmentShader","FRAGMENT_SHADER","program","attachShader","linkProgram","getProgramParameter","LINK_STATUS","console","error","VALIDATE_STATUS","getError","getProgramInfoLog","warn","deleteProgram","useProgram","deleteShader","attrs","attributes","ACTIVE_ATTRIBUTES","attribData","getActiveAttrib","size","getAttribLocation","extractAttributes","uniforms","ACTIVE_UNIFORMS","uniformData","getActiveUniform","replace","getUniformLocation","extractUniforms","createBuffer","ARRAY_BUFFER","drawType","STATIC_DRAW","buffer","Error","bindBuffer","bufferData","unitSize","BYTES_PER_ELEMENT","create2DTexture","texture","createTexture","pixelStorei","UNPACK_FLIP_Y_WEBGL","activeTexture","TEXTURE0","bindTexture","TEXTURE_2D","texParameterf","TEXTURE_MAG_FILTER","NEAREST","TEXTURE_MIN_FILTER","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","pathVertexSource","pathFragmentSource","WeblBase","style","globalAlpha","textureCanvas","createElement","ctx","willReadFrequently","pathProgram","isGradient","rgbToDecimal","setTextureStyle","lineWidth","__curent_program","attr","strip","dataType","FLOAT","vertexAttribPointer","enableVertexAttribArray","writeVertexAttrib","disableVertexAttribArray","Float32Array","createFloat32Buffer","Uint16Array","createUint16Buffer","bufferHandler","deleteBuffer","log","img","texImage2D","RGBA","UNSIGNED_BYTE","pixels","Uint8Array","deleteTexture","pointsToArray","earCutPoints","p3","concat","map","arr","webglGradient","text","save","font","fontSize","fontFamily","measureText","restore","fillStyle","clearRect","beginPath","moveTo","lineTo","closePath","fill","getImageData","WebglPath","WebglBase","isRegular","needCut","parentAbsoluteBounds","uniform2f","a_center_point","convertColor","uniform4f","v_single_color","colorData","colorBuffer","a_color","setParentBounds","pathPoints","a_position","fixedPoints","vertexBuffer","linePoints","genLinePoints","lines","index1","index2","line1","line2","equalPoint","sub1","cuted","intersection","getIntersection","sub2","cutLines","area_abc","area_abd","area_cda","t","line","point","root","polygons","unshift","getIntersectionLines","pathToLines","treeLine","getPolygon","earCutPointsToTriangles","strokeStyle","setFragColor","uniform1f","a_point_size","a_type","uniform1i","regular","pathToPoints","writePoints","drawArrays","LINE_LOOP","POINTS","fillColor","fillImage","imgData","toImageData","fillPolygons","ImageData","createDataTexture","createImgTexture","u_sample","v_texture_bounds","fillTexture","a_text_coord","isTexture","coordBuffer","TRIANGLE_FAN","fillText","maxWidth","strokeText","jmStyleMap","jmControl","hitArea","position","zIndex","interactive","_this2","initializing","on","bind","children","css","cur","oadd","parent","contain","oremove","levelItems","zindex","clear","__setStyle","mpkey","styleValue","_this3","mpname","toGradient","setStyle","angle","getRotation","__translateAbsolutePosition","toAbsolutePoint","translate","rotate","transform","scaleX","skewX","skewY","scaleY","cursor","isReset","rect","rotation","getBounds","local","oldBounds","rotatePoints","center","margin","trans","offseted","cpoints","rec","prec","beginDraw","close","stroke","endDraw","draw","visible","initPoints","needDraw","item","paint","__events","eventCollection","getEvent","events","unbind","runEventHandle","cancel","pad","getPosition","pointInPolygon","getEventPosition","button","keyCode","charCode","which","ctrlKey","path","stoped","abounds","inpos","checkPoint","runEventAndPopEvent","focused","__mvMonitor","mouseDown","curposition","mv","outside","offsetx","offsety","lockSide","thisbounds","checkOutSide","mu","ml","md","jmPath","jmGraph","cn","devicePixelRatio","util","wx","canIUse","createSelectorQuery","select","getElementById","parentElement","appendChild","offsetWidth","clientWidth","offsetHeight","clientHeight","enable","BLEND","blendFunc","SRC_ALPHA","ONE_MINUS_SRC_ALPHA","__init","shapes","assign","dpr","getWindowInfo","pixelRatio","dprScaleSize","resize","eventHandler","autoRefresh","w","__normalSize","viewport","shape","redraw","clearColor","COLOR_BUFFER_BIT","createShape","scaleSize","normalSize","toDataURL","___isAutoRefreshing","refreshStartTime","__requestAnimationFrameFunHandler","update","time","destroyed"],"mappings":"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"}