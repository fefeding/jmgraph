{"version":3,"file":"jmgraph.core.min.js","sources":["../src/core/jmList.js","../src/core/jmUtils.js","../src/core/jmObject.js","../src/core/jmProperty.js","../src/core/jmShadow.js","../src/core/jmGradient.js","../src/core/jmEvents.js","../src/core/jmControl.js","../src/core/jmPath.js","../src/core/jmGraph.js"],"sourcesContent":["/**\r\n * 自定义集合\r\n * \r\n * @class jmList\r\n * @for jmUtils\r\n * @param {array} [arr] 数组，可转为当前list元素\r\n */\r\nexport default class jmList extends Array {    \r\n    constructor(...arg) {\r\n        let ps = [];\r\n        if(arg && arg.length && Array.isArray(arg[0])) {\r\n            for(let i=0; i< arg[0].length; i++) ps.push(arg[0][i]);\r\n            super(...ps);\r\n        }\r\n        else {\r\n            super();\r\n        }\r\n        this.option = {}; //选项\r\n        this.type = 'jmList';\r\n    }\r\n    /**\r\n     * 往集合中添加对象\r\n     *\r\n     * @method add\r\n     * @for list\r\n     * @param {any} obj 往集合中添加的对象\r\n     */\r\n    add(obj) {        \r\n        if(obj && Array.isArray(obj)) {\r\n            for(let i=0; i < obj.length; i++) {\r\n                if(!this.includes(obj[i])) this.push(obj[i]);\r\n            } \r\n            return obj;           \r\n        }\r\n        if(typeof obj == 'object' && this.includes(obj)) return obj;\r\n        this.push(obj);\r\n        return obj;\r\n    }\r\n\r\n    /**\r\n     * 从集合中移除指定对象\r\n     * \r\n     * @method remove\r\n     * @for list\r\n     * @param {any} obj 将移除的对象\r\n     */\r\n    remove(obj) {\r\n        for(let i = this.length -1; i>=0; i--) {            \r\n            if(this[i] == obj) {\r\n                this.removeAt(i);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 按索引移除对象\r\n     * \r\n     * @method removeAt\r\n     * @for list\r\n     * @param {integer} index 移除对象的索引\r\n     */\r\n    removeAt(index) {\r\n        if(this.length > index) {\r\n            let obj = this[index];\r\n            this.splice(index,1);\r\n            if(this.option.removeHandler)  this.option.removeHandler.call(this, obj, index);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 判断是否包含某个对象\r\n     * \r\n     * @method contain\r\n     * @for list\r\n     * @param {any} obj 判断当前集合中是否包含此对象\r\n     */\r\n    contain(obj) {\r\n        return this.includes(obj);\r\n    }\r\n\r\n    /**\r\n     * 从集合中获取某个对象\r\n     * \r\n     * @method get\r\n     * @for list\r\n     * @param {integer/function} index 如果为整型则表示为获取此索引的对象，如果为function为则通过此委托获取对象\r\n     * @return {any} 集合中的对象\r\n     */\r\n    get(index) {\r\n        if(typeof index == 'function') {\r\n            return this.find(index);\r\n        }\r\n        else {\r\n            return this[index];\r\n        }        \r\n    }\r\n\r\n    /**\r\n     * 遍历当前集合 \r\n     *\r\n     * @method each\r\n     * @for list\r\n     * @param {function} cb 遍历当前集合的委托\r\n     * @param {boolean} inverse 是否按逆序遍历\r\n     */\r\n    each(cb, inverse) {\r\n        if(cb && typeof cb == 'function') {\r\n            //如果按倒序循环\r\n            if(inverse) {\r\n                for(let i = this.length - 1;i>=0; i--) {\r\n                    let r = cb.call(this, i, this[i]);\r\n                    if(r === false) break;\r\n                }\r\n            }\r\n            else {\r\n                let len = this.length;\r\n               for(let i  = 0; i < len;i++) {\r\n                    let r = cb.call(this, i, this[i]);\r\n                    if(r === false) break;\r\n                } \r\n            }            \r\n        }        \r\n    }\r\n\r\n    /**\r\n     * 获取当前集合对象个数\r\n     *\r\n     * @method count\r\n     * @param {function} [handler] 检查对象是否符合计算的条件\r\n     * @for list\r\n     * @return {integer} 当前集合的个数\r\n     */\r\n    count(handler) {\r\n        if(handler && typeof handler == 'function') {\r\n            let count = 0;\r\n            let len = this.length;\r\n            for(let i  = 0; i<len;i++) {\r\n                if(handler(this[i])) {\r\n                    count ++;\r\n                }\r\n            } \r\n            return count;\r\n        }\r\n        return this.length;\r\n    }\r\n\r\n    /**\r\n     * 清空当前集合\r\n     *\r\n     * @method clear\r\n     * @for list\r\n     */\r\n    clear() {\r\n        this.splice(0, this.length);\r\n    }\r\n}\r\n\r\nexport { jmList };","\r\nimport { jmList } from './jmList.js';\r\n\r\n/**\r\n * 画图基础对象\r\n * 当前库的工具类\r\n * \r\n * @class jmUtils\r\n * @static\r\n */\r\nexport default class jmUtils {\r\n    /**\r\n     * 复制一个对象\r\n     * \r\n     * @method clone\r\n     * @static\r\n     * @param {object} source 被复制的对象\r\n     * @param {object} target 可选，如果指定就表示复制给这个对象，如果为boolean它就是deep参数\r\n     * @param {boolean} deep 是否深度复制，如果为true,数组内的每个对象都会被复制\r\n     * @param {function} copyHandler 复制对象回调，如果返回undefined，就走后面的逻辑，否则到这里中止\r\n     * @return {object} 参数source的拷贝对象\r\n     */\r\n    static clone(source, target, deep = false, copyHandler = null, deepIndex = 0) {\r\n        // 如果有指定回调，则用回调处理，否则走后面的复制逻辑\r\n        if(typeof copyHandler === 'function') {\r\n            const obj = copyHandler(source, deep, deepIndex);\r\n            if(obj) return obj;\r\n        }\r\n        deepIndex++; // 每执行一次，需要判断最大拷贝深度        \r\n\r\n        if(typeof target === 'boolean') {\r\n            deep = target;\r\n            target = undefined;\r\n        }\r\n\r\n        // 超过100拷贝深度，直接返回\r\n        if(deepIndex > 100) {\r\n            return target;\r\n        }\r\n\r\n        if(source && typeof source === 'object') {\r\n            target = target || {};\r\n\r\n            //如果为当前泛型，则直接new\r\n            if(this.isType(source, jmList)) {\r\n                return new jmList(source);\r\n            }\r\n            else if(Array.isArray(source)) {\r\n                //如果是深度复，则拷贝每个对象\r\n                if(deep) {\r\n                    let dest = [];\r\n                    for(let i=0; i<source.length; i++) {\r\n                        dest.push(this.clone(source[i], target[i], deep, copyHandler, deepIndex));\r\n                    }\r\n                    return dest;\r\n                }\r\n                return source.slice(0);\r\n            }\r\n           \r\n            if(source.__proto__) target.__proto__ = source.__proto__;\r\n            \r\n            for(let k in source) {\r\n                if(k === 'constructor') continue;\r\n                // 如果不是对象和空，则采用target的属性\r\n                if(typeof target[k] === 'object' || typeof target[k] === 'undefined') {                    \r\n                    target[k] = this.clone(source[k], target[k], deep, copyHandler, deepIndex);\r\n                }\r\n            }\r\n            return target;\r\n        }\r\n        else if(typeof target != 'undefined') {\r\n            return target;\r\n        }\r\n\r\n        return source;\r\n    }\r\n\r\n    /**\r\n     * 绑定事件到html对象\r\n     * \r\n     * @method bindEvent\r\n     * @static\r\n     * @param {element} html元素对象\r\n     * @param {string} name 事件名称\r\n     * @param {function} fun 事件委托\r\n     * @returns {name, fun, target} 返回当前绑定\r\n     */\r\n    static bindEvent(target, name, fun, opt) {\r\n        if(name &&  name.indexOf && name.indexOf(' ') != -1) {\r\n            let ns = name.split(' ');\r\n            for(let i=0;i<ns.length;i++) {\r\n                this.bindEvent(target, ns[i], fun, opt);\r\n            }\r\n        }\r\n        if(target.attachEvent) {\r\n            target.attachEvent(\"on\"+name, fun, opt);\r\n        }    \r\n        else if(target.addEventListener) {\r\n            target.addEventListener(name, fun, opt);\r\n        }\r\n        return {\r\n            name,\r\n            target,\r\n            fun\r\n        };\r\n    }\r\n\r\n    /**\r\n     * 从对象中移除事件到\r\n     * \r\n     * @method removeEvent\r\n     * @static\r\n     * @param {element} html元素对象\r\n     * @param {string} name 事件名称\r\n     * @param {function} fun 事件委托\r\n     */\r\n    static removeEvent(target, name, fun) {\r\n        if(target.removeEventListener) {\r\n            return target.removeEventListener(name, fun, false);\r\n        }    \r\n        else if(target.detachEvent) {\r\n            target.detachEvent('on' + name, fun);\r\n            return true;\r\n        }\r\n        else {\r\n            target['on' + name] = null;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 获取元素的绝对定位\r\n     *\r\n     * @method getElementPosition\r\n     * @static\r\n     * @param {element} el 目标元素对象\r\n     * @return {position} 位置对象(top,left)\r\n     */\r\n    static getElementPosition(el) {    \r\n        let pos = {\"top\": 0, \"left\": 0};\r\n        if(!el) return pos;\r\n\r\n        if (el.offsetParent) {\r\n            while (el.offsetParent) {\r\n                pos.top += el.offsetTop;\r\n                pos.left += el.offsetLeft;\r\n                el = el.offsetParent;\r\n            }\r\n        }\r\n        else if(el.x) {\r\n            pos.left += el.x;\r\n        }\r\n        else if(el.x){\r\n            pos.top += el.y;\r\n        } \r\n        return pos;\r\n    }\r\n    /**\r\n     * 获取元素事件触发的位置\r\n     *\r\n     * @method getEventPosition\r\n     * @static\r\n     * @param {eventArg} evt 当前触发事件的参数\r\n     * @param {point} [scale] 当前画布的缩放比例\r\n     * @return {point} 事件触发的位置 \r\n     */\r\n    static getEventPosition (evt, scale) {\r\n        evt = evt || event;\r\n        \r\n        let isTouch = false;\r\n        let touches = evt.changedTouches || evt.targetTouches || evt.touches;\r\n        let target = evt.target || evt.srcElement;\r\n        if(touches) {\r\n            evt = touches[0];//兼容touch事件\r\n            if(!evt.target) evt.target = target;\r\n            isTouch = true;\r\n        }\r\n        let px = evt.pageX || evt.x;\r\n        if(typeof px == 'undefined')  px = evt.clientX + (document.documentElement.scrollLeft || document.body.scrollLeft);    \r\n        let py = evt.pageY || evt.y;\r\n        if(typeof py == 'undefined')  py = evt.clientY + (document.documentElement.scrollTop || document.body.scrollTop);\r\n\r\n        let ox = evt.offsetX;\r\n        let oy = evt.offsetY;\r\n        if(typeof ox === 'undefined' && typeof oy === 'undefined') {\r\n            let p = this.getElementPosition(target);\r\n            ox= px - p.left;\r\n            oy = py - p.top;\r\n        }\r\n        if(scale) {\r\n            if(scale.x) ox = ox / scale.x;\r\n            if(scale.y) oy = oy / scale.y;\r\n        }\r\n\r\n        return {\r\n            pageX: px,\r\n            pageY: py,\r\n            clientX: evt.clientX,\r\n            clientY: evt.clientY,\r\n            //相对于容器偏移量\r\n            offsetX: ox,\r\n            offsetY: oy,\r\n            layerX: evt.layerX,\r\n            layerY: evt.layerY,\r\n            screenX: evt.screenX,\r\n            screenY: evt.screenY,\r\n            x: ox,\r\n            y: oy,\r\n            isTouch: isTouch,\r\n            touches\r\n        };\r\n    }\r\n\r\n    /**\r\n     * 检 查对象是否为指定的类型,不包括继承\r\n     * \r\n     * @method isType\r\n     * @static\r\n     * @param {object} target 需要判断类型的对象\r\n     * @param {class} type 对象类型\r\n     * @return {boolean} 返回对象是否为指定类型 \r\n     */\r\n    static isType(target, type) {\r\n        if(!target || typeof target !== 'object') return false;\r\n        if(target.constructor === type) return true;\r\n        /*if(target.__baseType) {        \r\n            return jmUtils.isType(target.__baseType.prototype,type);\r\n        }*/\r\n\r\n        //return target instanceof type;\r\n        return false;\r\n    }\r\n    /**\r\n     * 判断点是否在多边形内\r\n     * 如果一个点在多边形内部，任意角度做射线肯定会与多边形要么有一个交点，要么有与多边形边界线重叠。\r\n     * 如果一个点在多边形外部，任意角度做射线要么与多边形有一个交点，要么有两个交点，要么没有交点，要么有与多边形边界线重叠。\r\n     * 利用上面的结论，我们只要判断这个点与多边形的交点个数，就可以判断出点与多边形的位置关系了。\r\n     * \r\n     * @method pointInPolygon\r\n     * @static\r\n     * @param {point} pt 坐标对象\r\n     * @param {array} polygon 多边型角坐标对象数组\r\n     * @param {number} offset 判断可偏移值\r\n     * @return {integer} 0= 不在图形内和线上，1=在边上，2=在图形内部\r\n     */\r\n    static pointInPolygon(pt, polygon, offset) {\r\n        offset = offset || 1;\r\n        offset = offset / 2;\r\n        let i, j, n = polygon.length;\r\n        let inside = false, redo = true;\r\n\r\n        if(!polygon || n == 0) return 0;\r\n        if(n == 1) {\r\n            return Math.abs(polygon[0].x - pt.x) <= offset && Math.abs(polygon[0].y - pt.y) <= offset;\r\n        }\r\n        \r\n        //一条直线\r\n        else if(n == 2) {\r\n            //在最左边之外或在最右边之外\r\n            if(Math.min(polygon[0].x,polygon[1].x) - pt.x > offset || \r\n                pt.x - Math.max(polygon[0].x,polygon[1].x) > offset ) {\r\n                return 0;\r\n            }\r\n            //在最顶部之外或在最底部之外\r\n            if(Math.min(polygon[0].y,polygon[1].y) - pt.y > offset || \r\n                pt.y - Math.max(polygon[0].y,polygon[1].y) > offset) {\r\n                return 0;\r\n            }\r\n\r\n            //如果线为平行为纵坐标。\r\n            if(polygon[0].x == polygon[1].x){\r\n                return (Math.abs(polygon[0].x - pt.x) <= offset && (pt.y - polygon[0].y) * (pt.y - polygon[1].y) <= 0)? 1:0;\r\n            }\r\n            //如果线为平行为横坐标。\r\n            if(polygon[0].y == polygon[1].y){\r\n                return (Math.abs(polygon[0].y - pt.y) <= offset && (pt.x - polygon[0].x) * (pt.x - polygon[1].x) <= 0)? 1:0;\r\n            }\r\n\r\n            if(Math.abs(polygon[0].x - pt.x) < offset && Math.abs(polygon[0].y - pt.y) < offset) {\r\n                return 1;\r\n            }\r\n            if(Math.abs(polygon[1].x - pt.x) < offset && Math.abs(polygon[1].y - pt.y) < offset) {\r\n                return 1;\r\n            }\r\n\r\n            //点到直线的距离小于宽度的一半，表示在线上\r\n            if(pt.y != polygon[0].y && pt.y != polygon[1].y) {\r\n\r\n                let f = (polygon[1].x - polygon[0].x) / (polygon[1].y - polygon[0].y) * (pt.y - polygon[0].y);\r\n                let ff = (pt.y - polygon[0].y) / Math.sqrt(f * f + (pt.y - polygon[0].y) * (pt.y - polygon[0].y));\r\n                let l = ff * (pt.x - polygon[0].x - f );\r\n                \r\n                return Math.abs(l) <= offset ?1:0;\r\n            }\r\n            return 0;\r\n        }\r\n\r\n        for (i = 0;i < n;++i) {\r\n            if (polygon[i].x == pt.x &&    // 是否在顶点上\r\n                polygon[i].y == pt.y ) {\r\n                return 1;\r\n            }\r\n        }\r\n\r\n        //pt = this.clone(pt);\r\n        while (redo) {\r\n            redo = false;\r\n            inside = false;\r\n            for (i = 0,j = n - 1;i < n;j = i++) {\r\n                if ( (polygon[i].y < pt.y && pt.y < polygon[j].y) || \r\n                    (polygon[j].y < pt.y && pt.y < polygon[i].y) ) {\r\n                    if (pt.x <= polygon[i].x || pt.x <= polygon[j].x) {\r\n                        var _x = (pt.y-polygon[i].y)*(polygon[j].x-polygon[i].x)/(polygon[j].y-polygon[i].y)+polygon[i].x;\r\n                        if (pt.x < _x)          // 在线的左侧\r\n                            inside = !inside;\r\n                        else if (pt.x == _x)    // 在线上\r\n                        {\r\n                            return 1;\r\n                        }\r\n                    }\r\n                }\r\n                else if ( pt.y == polygon[i].y) {\r\n                    if (pt.x < polygon[i].x) {    // 交点在顶点上                    \r\n                        if(polygon[i].y > polygon[j].y) {\r\n                            --pt.y\r\n                        }\r\n                        else {\r\n                            ++pt.y;\r\n                        }\r\n                        redo = true;\r\n                        break;\r\n                    }\r\n                }\r\n                else if ( polygon[i].y ==  polygon[j].y && // 在水平的边界线上\r\n                    pt.y == polygon[i].y &&\r\n                    ( (polygon[i].x < pt.x && pt.x < polygon[j].x) || \r\n                    (polygon[j].x < pt.x && pt.x < polygon[i].x) ) ) {\r\n                    inside = true;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        return inside ? 2:0;\r\n    }\r\n\r\n    /**\r\n     * @method judge 判断点是否在多边形中\r\n     * @param {point} dot {{x,y}} 需要判断的点\r\n     * @param {array} coordinates {{x,y}} 多边形点坐标的数组，为保证图形能够闭合，起点和终点必须相等。\r\n     *        比如三角形需要四个点表示，第一个点和最后一个点必须相同。 \r\n     * @param  {number} 是否为实心 1= 是\r\n     * @returns {boolean} 结果 true=在形状内\r\n     */\r\n    /*static judge(dot,coordinates,noneZeroMode) {\r\n        // 默认启动none zero mode\r\n        noneZeroMode=noneZeroMode||1;\r\n        var x = dot.x,y=dot.y;\r\n        var crossNum = 0;\r\n        // 点在线段的左侧数目\r\n        var leftCount = 0;\r\n        // 点在线段的右侧数目\r\n        var rightCount = 0;\r\n        for(var i=0;i<coordinates.length-1;i++){\r\n            var start = coordinates[i];\r\n            var end = coordinates[i+1];\r\n                \r\n            // 起点、终点斜率不存在的情况\r\n            if(start.x===end.x) {\r\n                // 因为射线向右水平，此处说明不相交\r\n                if(x>start.x) continue;\r\n                \r\n                // 从左侧贯穿\r\n                if((end.y>start.y&&y>=start.y && y<=end.y)){\r\n                    leftCount++;\r\n                    crossNum++;\r\n                }\r\n                // 从右侧贯穿\r\n                if((end.y<start.y&&y>=end.y && y<=start.y)) {\r\n                    rightCount++;\r\n                    crossNum++;\r\n                }\r\n                continue;\r\n            }\r\n            // 斜率存在的情况，计算斜率\r\n            var k=(end.y-start.y)/(end.x-start.x);\r\n            // 交点的x坐标\r\n            var x0 = (y-start.y)/k+start.x;\r\n            // 因为射线向右水平，此处说明不相交\r\n            if(x>x0) continue;\r\n                \r\n            if((end.x>start.x&&x0>=start.x && x0<=end.x)){\r\n                crossNum++;\r\n                if(k>=0) leftCount++;\r\n                else rightCount++;\r\n            }\r\n            if((end.x<start.x&&x0>=end.x && x0<=start.x)) {\r\n                crossNum++;\r\n                if(k>=0) rightCount++;\r\n                else leftCount++;\r\n            }\r\n        }\r\n        \r\n        return noneZeroMode===1?leftCount-rightCount!==0:crossNum%2===1;\r\n    }*/\r\n\r\n    /**\r\n     * 检查边界，子对象是否超出父容器边界\r\n     * 当对象偏移offset后是否出界\r\n     * 返回(left:0,right:0,top:0,bottom:0)\r\n     * 如果right>0表示右边出界right偏移量,left<0则表示左边出界left偏移量\r\n     * 如果bottom>0表示下边出界bottom偏移量,top<0则表示上边出界ltop偏移量\r\n     *\r\n     * @method checkOutSide\r\n     * @static\r\n     * @param {bound} parentBounds 父对象的边界\r\n     * @param {bound} targetBounds 对象的边界\r\n     * @param {number} offset 判断是否越界可容偏差\r\n     * @return {bound} 越界标识\r\n     */\r\n    static checkOutSide(parentBounds, targetBounds, offset) {\r\n        let result = {left:0,right:0,top:0,bottom:0};\r\n        if(offset.x < 0 ) {\r\n            result.left = targetBounds.left + offset.x - parentBounds.left;\r\n        }\r\n        else if(offset.x > 0 ) {\r\n            result.right = targetBounds.right + offset.x - parentBounds.right;\r\n        }\r\n\r\n        if(offset.y < 0 ) {\r\n            result.top = targetBounds.top + offset.y - parentBounds.top;\r\n        }\r\n        else if(offset.y > 0) {\r\n            result.bottom = targetBounds.bottom + offset.y - parentBounds.bottom;\r\n        }\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * 把一个或多个点绕某个点旋转一定角度\r\n     * 先把坐标原点移到旋转中心点，计算后移回\r\n     * @method rotatePoints\r\n     * @static\r\n     * @param {Array/object} p 一个或多个点\r\n     * @param {*} rp 旋转中心点\r\n     * @param {*} r 旋转角度\r\n     */\r\n    static rotatePoints(p, rp, r) {\r\n        if(!r || !p) return p;\r\n        let cos = Math.cos(r);\r\n        let sin = Math.sin(r);\r\n        if(p.length) {\r\n            for(let i=0;i<p.length;i++) {\r\n                if(!p[i]) continue;\r\n                let x1 = p[i].x - rp.x;\r\n                let y1 = p[i].y - rp.y;\r\n                p[i].x = x1 * cos - y1 * sin + rp.x;\r\n                p[i].y = x1 * sin + y1 * cos + rp.y;\r\n            }\r\n        }\r\n        else {\r\n            let x1 = p.x - rp.x;\r\n            let y1 = p.y - rp.y;\r\n            p.x = x1 * cos - y1 * sin + rp.x;\r\n            p.y = x1 * sin + y1 * cos + rp.y;\r\n        }\r\n        return p;\r\n    }\r\n\r\n    /**\r\n     * 去除字符串开始字符\r\n     * \r\n     * @method trimStart\r\n     * @static\r\n     * @param {string} source 需要处理的字符串\r\n     * @param {char} [c] 要去除字符串的前置字符\r\n     * @return {string} 去除前置字符后的字符串\r\n     */\r\n    static trimStart(source, c) {\r\n        c = c || ' ';\r\n        if(source && source.length > 0) {\r\n            let sc = source[0];\r\n            if(sc === c || c.indexOf(sc) >= 0) {\r\n                source = source.substring(1);\r\n                return this.trimStart(source,c);\r\n            }        \r\n        }\r\n        return source;\r\n    }\r\n\r\n    /**\r\n     * 去除字符串结束的字符c\r\n     *\r\n     * @method trimEnd\r\n     * @static\r\n     * @param {string} source 需要处理的字符串\r\n     * @param {char} [c] 要去除字符串的后置字符\r\n     * @return {string} 去除后置字符后的字符串\r\n     */\r\n    static trimEnd(source, c) {\r\n        c = c || ' ';\r\n        if(source && source.length > 0) {\r\n            let sc = source[source.length - 1];\r\n            if(sc === c || c.indexOf(sc) >= 0) {\r\n                source = source.substring(0,source.length - 1);\r\n                return this.trimStart(source,c);\r\n            }        \r\n        }\r\n        return source;\r\n    }\r\n\r\n    /**\r\n     * 去除字符串开始与结束的字符\r\n     *\r\n     * @method trim\r\n     * @static\r\n     * @param {string} source 需要处理的字符串\r\n     * @param {char} [c] 要去除字符串的字符\r\n     * @return {string} 去除字符后的字符串\r\n     */\r\n    static trim(source,c) {\r\n        return this.trimEnd(this.trimStart(source,c),c);\r\n    }\r\n\r\n    /**\r\n     * 检查是否为百分比参数\r\n     *\r\n     * @method checkPercent\r\n     * @static\r\n     * @param {string} 字符串参数\r\n     * @return {boolean} true=当前字符串为百分比参数,false=不是\r\n     */\r\n    static checkPercent(per) {\r\n        if(typeof per === 'string') {\r\n            per = this.trim(per);\r\n            if(per[per.length - 1] == '%') {\r\n                return per;\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 转换百分数为数值类型\r\n     *\r\n     * @method percentToNumber\r\n     * @static\r\n     * @param {string} per 把百分比转为数值的参数\r\n     * @return {number} 百分比对应的数值\r\n     */\r\n    static percentToNumber(per) {\r\n        if(typeof per === 'string') {\r\n            let tmp = this.checkPercent(per);\r\n            if(tmp) {\r\n                per = this.trim(tmp,'% ');\r\n                per = per / 100;\r\n            }\r\n        }\r\n        return per;\r\n    }\r\n\r\n    /**\r\n     * 转换16进制为数值\r\n     *\r\n     * @method hexToNumber\r\n     * @static\r\n     * @param {string} h 16进制颜色表达\r\n     * @return {number} 10进制表达\r\n     */\r\n    static hexToNumber(h) {\r\n        if(typeof h !== 'string') return h;\r\n\r\n        h = h.toLowerCase();\r\n        let hex = '0123456789abcdef';\r\n        let v = 0;\r\n        let l = h.length;\r\n        for(let i=0;i<l;i++) {\r\n            let iv = hex.indexOf(h[i]);\r\n            if(iv == 0) continue;\r\n            \r\n            for(let j=1;j<l - i;j++) {\r\n                iv *= 16;\r\n            }\r\n            v += iv;\r\n        }\r\n        return v;\r\n    }\r\n\r\n    /**\r\n     * 转换数值为16进制字符串表达\r\n     *\r\n     * @method hex\r\n     * @static\r\n     * @param {number} v 数值\r\n     * @return {string} 16进制表达\r\n     */\r\n    static numberToHex(v) {\r\n        let hex = '0123456789abcdef';\r\n        \r\n        let h = '';\r\n        while(v > 0) {\r\n            let t = v % 16;\r\n            h = hex[t] + h;\r\n            v = Math.floor(v / 16);\r\n        }\r\n        return h;\r\n    }\r\n\r\n    /**\r\n     * 16进制颜色转为r g b a 对象 {r, g , b, a}\r\n     * @param {string}} hex 16进度的颜色\r\n     */\r\n    static hexToRGBA(hex) {\r\n        hex = this.trim(hex);        \r\n\r\n        //当为7位时，表示需要转为带透明度的rgba\r\n        if(hex[0] == '#') {\r\n            const color = {\r\n                a: 1\r\n            };\r\n            if(hex.length >= 8) {\r\n                color.a = hex.substr(1,2);\r\n                color.g = hex.substr(5,2);\r\n                color.b = hex.substr(7,2);\r\n                color.r = hex.substr(3,2);\r\n                //透明度\r\n                color.a = (this.hexToNumber(color.a) / 255).toFixed(4);\r\n\r\n                color.r = this.hexToNumber(color.r||0);\r\n                color.g = this.hexToNumber(color.g||0);\r\n                color.b = this.hexToNumber(color.b||0);\r\n                return color; \r\n            }\r\n            // #cccccc || #ccc\r\n            else if(hex.length === 7 || hex.length === 4) {\r\n                // #ccc这种情况，把每个位复制一份\r\n                if(hex.length === 4) {\r\n                    color.g = hex.substr(2, 1);\r\n                    color.g = color.g + color.g;\r\n                    color.b = hex.substr(3, 1);\r\n                    color.b = color.b + color.b;\r\n                    color.r = hex.substr(1, 1);\r\n                    color.r = color.r + color.r;\r\n                }\r\n                else {\r\n                    color.g = hex.substr(3, 2);//除#号外的第二位\r\n                    color.b = hex.substr(5, 2);\r\n                    color.r = hex.substr(1, 2);\r\n                }\r\n\r\n                color.r = this.hexToNumber(color.r||0);\r\n                color.g = this.hexToNumber(color.g||0);\r\n                color.b = this.hexToNumber(color.b||0);\r\n                \r\n                return color; \r\n            }\r\n            //如果是5位的话，# 则第2位表示A，后面依次是r,g,b\r\n            else if(hex.length === 5) {\r\n                color.a = hex.substr(1,1);\r\n                color.g = hex.substr(3,1);//除#号外的第二位\r\n                color.b = hex.substr(4,1);\r\n                color.r = hex.substr(2,1);\r\n\r\n                color.r = this.hexToNumber(color.r||0);\r\n                color.g = this.hexToNumber(color.g||0);\r\n                color.b = this.hexToNumber(color.b||0);\r\n                //透明度\r\n                color.a = (this.hexToNumber(color.a) / 255).toFixed(4);\r\n                return color; \r\n            }\r\n        }  \r\n        return hex;     \r\n    }\r\n\r\n    /**\r\n     * 转换颜色格式，如果输入r,g,b则转为hex格式,如果为hex则转为r,g,b格式\r\n     *\r\n     * @method toColor\r\n     * @static\r\n     * @param {string} hex 16进制颜色表达\r\n     * @return {string} 颜色字符串\r\n     */\r\n    static toColor(r, g, b, a) {    \r\n        if(typeof r === 'string' && r) {\r\n            r = this.trim(r); \r\n            // 正常的颜色表达，不需要转换\r\n            if(r[0] === '#' && (r.length === 4 || r.length === 7)) return r;\r\n\r\n            const color = this.hexToRGBA(r);\r\n            if(typeof color === 'string') return color;\r\n            \r\n            r = color.r || r;\r\n            g = color.g || g;\r\n            b = color.b || b;\r\n            a = color.a || a;\r\n        }\r\n        if(typeof r != 'undefined' && typeof g != 'undefined' && typeof b != 'undefined') {\r\n            if(typeof a != 'undefined') {            \r\n                return 'rgba(' + r + ',' + g + ',' + b + ',' + a + ')';\r\n            }\r\n            else {\r\n                return 'rgb(' + r + ',' + g + ',' + b + ')';\r\n            }\r\n        }\r\n        return r;\r\n    }\r\n}\r\nexport { jmUtils };","\r\nimport {jmList} from \"./jmList.js\";\r\n\r\nconst ANICOUNTER = Symbol('jmchart#animate#counter');\r\n\r\n/**\r\n *  所有jm对象的基础对象\r\n * \r\n * @class jmObject\r\n * @for jmGraph\r\n */\r\nexport default class jmObject {\r\n\t//id;\r\n\tconstructor(g) {\r\n\t\tif(g && g.type == 'jmGraph') {\r\n\t\t\tthis.graph = g;\r\n\t\t}\r\n\t\t//this.id = Symbol(\"id\"); //生成一个唯一id\r\n\t}\r\n\t\r\n\t/**\r\n\t * 检 查对象是否为指定类型\r\n\t * \r\n\t * @method is\r\n\t * @param {class} type 判断的类型\r\n\t * @for jmObject\r\n\t * @return {boolean} true=表示当前对象为指定的类型type,false=表示不是\r\n\t */\r\n\tis(type) {\r\n\t\tif(typeof type == 'string') {\r\n\t\t\treturn this.type == type;\r\n\t\t}\r\n\t\treturn this instanceof type;\r\n\t}\r\n\r\n\t/**\r\n\t * 给控件添加动画处理,如果成功执行会导致画布刷新。\r\n\t *\r\n\t * @method animate\r\n\t * @for jmObject\r\n\t * @param {function} handle 动画委托\r\n\t * @param {integer} millisec 此委托执行间隔 （毫秒）\r\n\t */\r\n\tanimate(...args) {\t\r\n\t\tif(this.is('jmGraph')) {\r\n\t\t\tif(args.length > 1) {\t\t\t\r\n\t\t\t\tif(!this.animateHandles) this.animateHandles = new jmList();\r\n\t\t\t\t\r\n\t\t\t\tvar params = [];\r\n\t\t\t\tif(args.length > 2) {\r\n\t\t\t\t\tfor(var i=2;i<args.length;i++) {\r\n\t\t\t\t\t\tparams.push(args[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\t\t\r\n\t\t\t\tthis.animateHandles.add({\r\n\t\t\t\t\tmillisec: args[1] || 20, \r\n\t\t\t\t\thandle: args[0], \r\n\t\t\t\t\tparams:params\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tif(this.animateHandles) {\r\n\t\t\t\tif(this.animateHandles.count() > 0) {\r\n\t\t\t\t\tvar self = this;\r\n\t\t\t\t\t//延时处理动画事件\r\n\t\t\t\t\tthis.dispatcher = setTimeout(function(_this) {\r\n\t\t\t\t\t\t_this = _this || self;\r\n\t\t\t\t\t\t//var needredraw = false;\r\n\t\t\t\t\t\tvar overduehandles = [];\r\n\t\t\t\t\t\tvar curTimes = new Date().getTime();\r\n\t\t\t\t\t\t_this.animateHandles.each(function(i,ani) {\t\t\t\t\t\t\r\n\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\tif(ani && ani.handle && (!ani.times || curTimes - ani.times >= ani.millisec)) {\r\n\t\t\t\t\t\t\t\t\tvar r = ani.handle.apply(_this, ani.params);\r\n\t\t\t\t\t\t\t\t\tif(r === false) {\r\n\t\t\t\t\t\t\t\t\t\toverduehandles.push(ani);//表示已完成的动画效果\r\n\t\t\t\t\t\t\t\t\t}\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tani.times = curTimes;\r\n\t\t\t\t\t\t\t\t\t//needredraw = true;\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tcatch(e) {\r\n\t\t\t\t\t\t\t\tif(window.console && window.console.info) {\r\n\t\t\t\t\t\t\t\t\twindow.console.info(e.toString());\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif(ani) overduehandles.push(ani);//异常的事件，不再执行\r\n\t\t\t\t\t\t\t}\t\t\t\t\t\t\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tfor(var i in overduehandles) {\r\n\t\t\t\t\t\t\t_this.animateHandles.remove(overduehandles[i]);//移除完成的效果\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t_this.animate();\r\n\t\t\t\t\t},10,this);//刷新\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\t\r\n\t\telse {\r\n\t\t\tvar graph = this.graph;\r\n\t\t\tif(graph) {\r\n\t\t\t\tgraph.animate(...args);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport { jmObject };","import { jmObject } from \"./jmObject.js\";\r\n\r\nconst PROPERTY_KEY = Symbol(\"properties\");\r\n\r\n/**\r\n * 对象属性管理\r\n * \r\n * @class jmProperty\r\n * @extends jmObject\r\n * @require jmObject\r\n */\r\nexport default class jmProperty extends jmObject {\t\t\r\n\t\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\t\r\n\t\tthis[PROPERTY_KEY] = {};\r\n\t}\r\n\r\n\t/**\r\n\t * 基础属性读写接口\r\n\t * @method __pro\r\n\t * @param {string} name 属性名\r\n\t * @param {any} value 属性的值\r\n\t * @returns {any} 属性的值\r\n\t */\r\n\t__pro(...pars) {\r\n\t\tif(pars) {\r\n\t\t\tlet pros = this[PROPERTY_KEY];\r\n\t\t\tlet name = pars[0];\r\n\t\t\tif(pars.length > 1) {\r\n\t\t\t\tlet value = pars[1];\r\n\t\t\t\tlet args = {oldValue: pros[name], newValue: value};\r\n\t\t\t\tpros[name] = pars[1];\r\n\t\t\t\tif(this.emit) this.emit('propertyChange', name, args);\r\n\t\t\t\treturn pars[1];\r\n\t\t\t}\r\n\t\t\telse if(pars.length == 1) {\r\n\t\t\t\treturn pros[name];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * 是否需要刷新画板，属性的改变会导致它变为true\r\n\t * @property needUpdate\r\n\t * @type {boolean}\r\n\t */\r\n\tget needUpdate() {\r\n\t\treturn this.__pro('needUpdate');\r\n\t}\r\n\tset needUpdate(v) {\r\n\t\tthis.__pro('needUpdate', v);\r\n\t\t//子控件属性改变，需要更新整个画板\r\n\t\tif(v && !this.is('jmGraph') && this.graph) {\r\n\t\t\tthis.graph.needUpdate = true;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * 当前所在的画布对象 jmGraph\r\n\t * @property graph\r\n\t * @type {jmGraph}\r\n\t */\r\n\tget graph() {\r\n\t\tlet g = this.__pro('graph');\r\n\t\tg = g || (this.__pro('graph', this.findParent('jmGraph')));\r\n\t\treturn g;\r\n\t}\r\n\tset graph(v) {\r\n\t\treturn this.__pro('graph', v);\r\n\t}\r\n}\r\n\r\nexport { jmProperty };\r\n\r\n\r\n","import {jmUtils} from \"./jmUtils.js\";\r\n\r\n/**\r\n * 画图阴影对象表示法\r\n *\r\n * @class jmShadow\r\n * @param {number} x 横坐标偏移量\r\n * @param {number} y 纵坐标编移量\r\n * @param {number} blur 模糊值\r\n * @param {string} color 阴影的颜色\r\n */\r\n\r\nexport default class jmShadow {\r\n\tconstructor(x, y, blur, color) {\r\n\t\tif(typeof x == 'string' && !y && !blur && !color) {\r\n\t\t\tthis.fromString(x);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.x = x;\r\n\t\t\tthis.y = y;\r\n\t\t\tthis.blur = blur;\r\n\t\t\tthis.color = color;\r\n\t\t}\r\n\t}\r\n\t/**\r\n\t * 根据字符串格式转为阴影\r\n\t * @method fromString\r\n\t * @param {string} s 阴影字符串 x,y,blur,color\r\n\t */\r\n\tfromString(s) {\r\n\t\tif(!s) return;\r\n\t\tlet ms = s.match(/\\s*([^,]+)\\s*,\\s*([^,]+)\\s*(,[^,]+)?\\s*(,[\\s\\S]+)?\\s*/i);\r\n\t\tif(ms) {\r\n\t\t\tthis.x = ms[1]||0;\r\n\t\t\tthis.y = ms[2]||0;\r\n\t\t\tif(ms[3]) {\r\n\t\t\t\tms[3] = jmUtils.trim(ms[3],', ');\r\n\t\t\t\t//如果第三位是颜色格式，则表示为颜色\r\n\t\t\t\tif(ms[3].indexOf('#')===0 || /^rgb/i.test(ms[3])) {\r\n\t\t\t\t\tthis.color = ms[3];\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tthis.blur = jmUtils.trim(ms[3],', ');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(ms[4]) {\r\n\t\t\t\tthis.color = jmUtils.trim(ms[4],', ');\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/**\r\n\t * 转为字符串格式 x,y,blur,color\r\n\t * @method toString\r\n\t * @returns {string} 阴影字符串\r\n\t */\r\n\ttoString() {\r\n\t\tlet s = this.x + ',' + this.y;\r\n\t\tif(this.blur) s += ',' + this.blur;\r\n\t\tif(this.color) s += ',' + this.color;\r\n\t\treturn s;\r\n\t}\r\n}\r\n\r\nexport { jmShadow };","import {jmUtils} from \"./jmUtils.js\";\r\nimport {jmList} from \"./jmList.js\";\r\n\r\n/**\r\n * 渐变类\r\n *\r\n * @class jmGradient\r\n * @param {object} op 渐变参数,type:[linear= 线性渐变,radial=放射性渐变] \r\n */\r\nexport default class jmGradient {\r\n\tconstructor(opt) {\r\n\t\tthis.stops = new jmList();\r\n\r\n\t\tif(opt && typeof opt == 'object') {\r\n\t\t\tfor(let k in opt) {\r\n\t\t\t\tthis[k] = opt[k];\r\n\t\t\t}\r\n\t\t}\r\n\t\t//解析字符串格式\r\n\t\t//linear-gradient(direction, color-stop1, color-stop2, ...);\r\n\t\t//radial-gradient(center, shape size, start-color, ..., last-color);\r\n\t\telse if(typeof opt == 'string') {\r\n\t\t\tthis.fromString(opt);\r\n\t\t}\r\n\t}\r\n\t/**\r\n\t * 添加渐变色\r\n\t * \r\n\t * @method addStop\r\n\t * @for jmGradient\r\n\t * @param {number} offset 放射渐变颜色偏移,可为百分比参数。\r\n\t * @param {string} color 当前偏移颜色值\r\n\t */\r\n\taddStop(offset, color) {\r\n\t\tthis.stops.add({\r\n\t\t\toffset: Number(offset),\r\n\t\t\tcolor: color\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * 生成为canvas的渐变对象\r\n\t *\r\n\t * @method toGradient\r\n\t * @for jmGradient\r\n\t * @param {jmControl} control 当前渐变对应的控件\r\n\t * @return {gradient} canvas渐变对象\r\n\t */\r\n\ttoGradient(control) {\r\n\t\tlet gradient;\r\n\t\tlet context = control.context || control;\r\n\t\tlet bounds = control.absoluteBounds?control.absoluteBounds:control.getAbsoluteBounds();\r\n\t\tlet x1 = this.x1||0;\r\n\t\tlet y1 = this.y1||0;\r\n\t\tlet x2 = this.x2;\r\n\t\tlet y2 = this.y2;\r\n\r\n\t\tlet location = control.getLocation();\r\n\r\n\t\tlet d = 0;\r\n\t\tif(location.radius) {\r\n\t\t\td = location.radius * 2;\t\t\t\t\r\n\t\t}\r\n\t\tif(!d) {\r\n\t\t\td = Math.min(location.width,location.height);\t\t\t\t\r\n\t\t}\r\n\r\n\t\t//let offsetLine = 1;//渐变长度或半径\r\n\t\t//处理百分比参数\r\n\t\tif(jmUtils.checkPercent(x1)) {\r\n\t\t\tx1 = jmUtils.percentToNumber(x1) * (bounds.width || d);\r\n\t\t}\r\n\t\tif(jmUtils.checkPercent(x2)) {\r\n\t\t\tx2 = jmUtils.percentToNumber(x2) * (bounds.width || d);\r\n\t\t}\r\n\t\tif(jmUtils.checkPercent(y1)) {\r\n\t\t\ty1 = jmUtils.percentToNumber(y1) * (bounds.height || d);\r\n\t\t}\r\n\t\tif(jmUtils.checkPercent(y2)) {\r\n\t\t\ty2 = jmUtils.percentToNumber(y2) * (bounds.height || d);\r\n\t\t}\t\r\n\r\n\t\tlet sx1 = Number(x1) + bounds.left;\r\n\t\tlet sy1 = Number(y1) + bounds.top;\r\n\t\tlet sx2 = Number(x2) + bounds.left;\r\n\t\tlet sy2 = Number(y2) + bounds.top;\r\n\t\tif(this.type === 'linear') {\t\t\r\n\t\t\tgradient = context.createLinearGradient(sx1, sy1, sx2, sy2);\r\n\t\t}\r\n\t\telse if(this.type === 'radial') {\r\n\t\t\tlet r1 = this.r1||0;\r\n\t\t\tlet r2 = this.r2;\r\n\t\t\tif(jmUtils.checkPercent(r1)) {\r\n\t\t\t\tr1 = jmUtils.percentToNumber(r1);\t\t\t\r\n\t\t\t\tr1 = d * r1;\r\n\t\t\t}\r\n\t\t\tif(jmUtils.checkPercent(r2)) {\r\n\t\t\t\tr2 = jmUtils.percentToNumber(r2);\r\n\t\t\t\tr2 = d * r2;\r\n\t\t\t}\t\r\n\t\t\t//offsetLine = Math.abs(r2 - r1);//二圆半径差\r\n\t\t\t//小程序的接口特殊\r\n\t\t\tif(context.createCircularGradient) { \r\n\t\t\t\tgradient = context.createCircularGradient(sx1, sy1, r2);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tgradient = context.createRadialGradient(sx1, sy1, r1, sx2, sy2, r2);\t\r\n\t\t\t}\t\r\n\t\t}\r\n\t\t//颜色渐变\r\n\t\tthis.stops.each(function(i,s) {\t\r\n\t\t\tlet c = jmUtils.toColor(s.color);\r\n\t\t\t//s.offset 0.0 ~ 1.0\r\n\t\t\tgradient.addColorStop(s.offset, c);\t\t\r\n\t\t});\r\n\t\t\r\n\t\treturn gradient;\r\n\t}\r\n\r\n\t/**\r\n\t * 变换为字条串格式\r\n\t * linear-gradient(x1 y1 x2 y2, color1 step, color2 step, ...);\t//radial-gradient(x1 y1 r1 x2 y2 r2, color1 step,color2 step, ...);\r\n\t * linear-gradient线性渐变，x1 y1表示起点，x2 y2表示结束点,color表颜色，step为当前颜色偏移\r\n\t * radial-gradient径向渐变,x1 y1 r1分别表示内圆中心和半径，x2 y2 r2为结束圆 中心和半径，颜色例似线性渐变 step为0-1之间\r\n\t *\r\n\t * @method fromString\r\n\t * @for jmGradient\r\n\t * @return {string} \r\n\t */\r\n\tfromString(s) {\r\n\t\tif(!s) return;\r\n\t\tlet ms = s.match(/(linear|radial)-gradient\\s*\\(\\s*([^,]+)\\s*,\\s*((.|\\s)+)\\)/i);\r\n\t\tif(!ms || ms.length < 3) return;\r\n\t\tthis.type = ms[1].toLowerCase();\t\t\r\n\t\t\r\n\t\tconst ps = jmUtils.trim(ms[2]).split(/\\s+/);\r\n\t\t//线性渐变\r\n\t\tif(this.type == 'linear') {\r\n\t\t\tif(ps.length <= 2) {\r\n\t\t\t\tthis.x2 = ps[0];\r\n\t\t\t\tthis.y2 = ps[1]||0;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.x1 = ps[0];\r\n\t\t\t\tthis.y1 = ps[1];\r\n\t\t\t\tthis.x2 = ps[2];\r\n\t\t\t\tthis.y2 = ps[3];\r\n\t\t\t}\r\n\t\t}\r\n\t\t//径向渐变\r\n\t\telse {\r\n\t\t\tif(ps.length <= 3) {\r\n\t\t\t\tthis.x2 = ps[0];\r\n\t\t\t\tthis.y2 = ps[1]||0;\r\n\t\t\t\tthis.r2 = ps[2]||0;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.x1 = ps[0];\r\n\t\t\t\tthis.y1 = ps[1];\r\n\t\t\t\tthis.r1 = ps[2];\r\n\t\t\t\tthis.x2 = ps[3];\r\n\t\t\t\tthis.y2 = ps[3];\r\n\t\t\t\tthis.r2 = ps[3];\r\n\t\t\t}\r\n\t\t}\r\n\t\t//解析颜色偏移\r\n\t\t//color step\r\n\t\tconst pars = ms[3].match(/((rgb(a)?\\s*\\([\\d,\\.\\s]+\\))|(#[a-zA-Z\\d]+))\\s+([\\d\\.]+)/ig);\r\n\t\tif(pars && pars.length) {\r\n\t\t\tfor(let i=0;i<pars.length;i++) {\r\n\t\t\t\tconst par = jmUtils.trim(pars[i]);\r\n\t\t\t\tconst spindex = par.lastIndexOf(' ');\r\n\t\t\t\tif(spindex > -1) {\t\t\t\r\n\t\t\t\t\tconst offset = Number(par.substr(spindex + 1));\t\t\r\n\t\t\t\t\tconst color = jmUtils.trim(par.substr(0, spindex));\r\n\t\t\t\t\tif(!isNaN(offset) && color) {\r\n\t\t\t\t\t\tthis.addStop(offset, color);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * 转换为渐变的字符串表达\r\n\t *\r\n\t * @method toString\r\n\t * @for jmGradient\r\n\t * @return {string} linear-gradient(x1 y1 x2 y2, color1 step, color2 step, ...);\t//radial-gradient(x1 y1 r1 x2 y2 r2, color1 step,color2 step, ...);\r\n\t */\r\n\ttoString() {\r\n\t\tlet str = this.type + '-gradient(';\r\n\t\tif(this.type == 'linear') {\r\n\t\t\tstr += this.x1 + ' ' + this.y1 + ' ' + this.x2 + ' ' + this.y2;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tstr += this.x1 + ' ' + this.y1 + ' ' + this.r1 + ' ' + this.x2 + ' ' + this.y2 + ' ' + this.r2;\r\n\t\t}\r\n\t\t//颜色渐变\r\n\t\tthis.stops.each(function(i,s) {\t\r\n\t\t\tstr += ',' + s.color + ' ' + s.offset;\r\n\t\t});\r\n\t\treturn str + ')';\r\n\t}\r\n}\r\n\r\nexport { jmGradient };\r\n\r\n\r\n\r\n","import {jmUtils} from \"./jmUtils.js\";\r\n/**\r\n * 事件模型\r\n *\r\n * @class jmEvents\r\n * @for jmGraph\r\n */\r\nexport default class jmEvents {\r\n\r\n\tconstructor(container, target) {\r\n\t\tthis.container = container;\r\n\t\tthis.target = target || container;\r\n\t\tthis.mouseHandler = new jmMouseEvent(this, container, target);\r\n\t\tthis.keyHandler = new jmKeyEvent(this, container, target);\r\n\t}\r\n\r\n\ttouchStart(evt) {\r\n\t\tevt = evt || window.event;\r\n\t\tevt.eventName = 'touchstart';\r\n\t\tthis.container.raiseEvent('touchstart',evt);\r\n\t\tlet t = evt.target || evt.srcElement;\r\n\t\tif(t == this.target) {\r\n\t\t\t//if(evt.preventDefault) evt.preventDefault();\r\n\t\t\treturn false;\r\n\t\t}\r\n\t};\r\n\r\n\ttouchMove(evt) {\r\n\t\tevt = evt || window.event;\r\n\t\tevt.eventName = 'touchmove';\r\n\t\tthis.container.raiseEvent('touchmove',evt);\r\n\t\tlet t = evt.target || evt.srcElement;\r\n\t\tif(t == this.target) {\r\n\t\t\t//if(evt.preventDefault) evt.preventDefault();\r\n\t\t\treturn false;\r\n\t\t}\r\n\t};\r\n\r\n\ttouchEnd(evt) {\r\n\t\tevt = evt || window.event;\r\n\t\tevt.eventName = 'touchend';\r\n\t\t\r\n\t\tthis.container.raiseEvent('touchend',evt);\r\n\t\tlet t = evt.target || evt.srcElement;\r\n\t\tif(t == this.target) {\r\n\t\t\t//if(evt.preventDefault) evt.preventDefault();\r\n\t\t\treturn false;\r\n\t\t}\r\n\t};\r\n\r\n\ttouchCancel(evt) {\r\n\t\tevt = evt || window.event;\r\n\t\tevt.eventName = 'touchcancel';\r\n\t\t\r\n\t\tthis.container.raiseEvent('touchcancel',evt);\r\n\t\tlet t = evt.target || evt.srcElement;\r\n\t\tif(t == this.target) {\r\n\t\t\t//if(evt.preventDefault) evt.preventDefault();\r\n\t\t\treturn false;\r\n\t\t}\r\n\t};\r\n\r\n\t// 销毁\r\n\tdestory() {\r\n\t\tthis.mouseHandler.destory();\r\n\t\tthis.keyHandler.destory();\r\n\t}\r\n}\r\n\r\n/**\r\n * 鼠标事件处理对象，container 为事件主体，target为响应事件对象\r\n */\r\nclass jmMouseEvent {\r\n\tconstructor(instance, container, target) {\r\n\t\tthis.instance = instance;\r\n\t\tthis.container = container;\r\n\t\tthis.target = target || container;\r\n\r\n\t\tthis.eventEvents = {};// 所有绑定的事件\r\n\r\n\t\tthis.init(instance, container, target);\r\n\t}\r\n\t\r\n\tinit(instance, container, target) {\r\n\t\tlet canvas = this.target;\t\r\n\t\tlet doc = typeof typeof document != 'undefined'?document:null;\r\n\t\t//禁用鼠标右健系统菜单\r\n\t\t//canvas.oncontextmenu = function() {\r\n\t\t//\treturn false;\r\n\t\t//};\r\n\r\n\t\tthis.eventEvents['mousedown'] = jmUtils.bindEvent(this.target,'mousedown',function(evt) {\r\n\t\t\tevt = evt || window.event;\r\n\t\t\tevt.eventName = 'mousedown';\r\n\t\t\tlet r = container.raiseEvent('mousedown',evt);\r\n\t\t\t//if(r === false) {\r\n\t\t\t\t//if(evt.preventDefault) evt.preventDefault();\r\n\t\t\t\t//return false;\r\n\t\t\t//}\t\t\t\t\r\n\t\t});\r\n\t\t\r\n\t\tthis.eventEvents['mousedown'] = jmUtils.bindEvent(this.target,'mousemove',function(evt) {\t\r\n\t\t\tevt = evt || window.event;\t\t\r\n\t\t\tevt.eventName = 'mousemove';\r\n\t\t\tlet target = evt.target || evt.srcElement;\r\n\t\t\tif(target == canvas) {\r\n\t\t\t\tlet r = container.raiseEvent('mousemove',evt);\r\n\t\t\t\t//if(r === false) {\r\n\t\t\t\t\tif(evt.preventDefault) evt.preventDefault();\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t//}\t\t\r\n\t\t\t}\t\t\t\t\r\n\t\t});\r\n\t\t\r\n\t\tthis.eventEvents['mousedown'] = jmUtils.bindEvent(this.target,'mouseover',function(evt) {\r\n\t\t\tevt = evt || window.event;\t\r\n\t\t\tevt.eventName = 'mouseover';\r\n\t\t\tcontainer.raiseEvent('mouseover',evt);\r\n\t\t});\r\n\t\tthis.eventEvents['mouseleave'] = jmUtils.bindEvent(this.target,'mouseleave',function(evt) {\r\n\t\t\tevt = evt || window.event;\t\r\n\t\t\tevt.eventName = 'mouseleave';\r\n\t\t\tcontainer.raiseEvent('mouseleave',evt);\r\n\t\t});\t\t\t\r\n\t\tthis.eventEvents['mouseout'] = jmUtils.bindEvent(this.target,'mouseout',function(evt) {\r\n\t\t\tevt = evt || window.event;\t\r\n\t\t\tevt.eventName = 'mouseout';\r\n\t\t\tcontainer.raiseEvent('mouseout',evt);\r\n\t\t});\r\n\t\tdoc && (this.eventEvents['mouseup'] = jmUtils.bindEvent(doc,'mouseup',function(evt) {\r\n\t\t\tevt = evt || window.event;\t\r\n\t\t\tevt.eventName = 'mouseup';\r\n\t\t\t//let target = evt.target || evt.srcElement;\r\n\t\t\t//if(target == canvas) {\t\t\t\t\t\t\r\n\t\t\t\tlet r = container.raiseEvent('mouseup',evt);\r\n\t\t\t\tif(r === false) {\r\n\t\t\t\t\tif(evt.preventDefault) evt.preventDefault();\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\t\t\t\t\t\r\n\t\t\t//}\r\n\t\t}));\r\n\t\t\r\n\t\tthis.eventEvents['dblclick'] = jmUtils.bindEvent(this.target,'dblclick',function(evt) {\r\n\t\t\tevt = evt || window.event;\r\n\t\t\tevt.eventName = 'dblclick';\r\n\t\t\tcontainer.raiseEvent('dblclick',evt);\r\n\t\t});\r\n\t\tthis.eventEvents['click'] = jmUtils.bindEvent(this.target,'click',function(evt) {\r\n\t\t\tevt = evt || window.event;\r\n\t\t\tevt.eventName = 'click';\r\n\t\t\tcontainer.raiseEvent('click',evt);\r\n\t\t});\r\n\r\n\t\tdoc && (this.eventEvents['resize'] = jmUtils.bindEvent(doc,'resize',function(evt) {\r\n\t\t\tevt = evt || window.event;\r\n\t\t\tevt.eventName = 'resize';\r\n\t\t\treturn container.raiseEvent('resize',evt);\r\n\t\t}));\r\n\r\n\t\t// passive: false 为了让浏览器不告警并且preventDefault有效\r\n\t\t// 另一种处理：touch-action: none; 这样任何触摸事件都不会产生默认行为，但是 touch 事件照样触发。\r\n\t\tthis.eventEvents['touchstart'] = jmUtils.bindEvent(this.target,'touchstart', function(evt) {\r\n\t\t\tevt.eventName = 'touchstart';\r\n\t\t\treturn instance.touchStart(evt);\r\n\t\t},{ passive: false });\r\n\r\n\t\tthis.eventEvents['touchmove'] = jmUtils.bindEvent(this.target,'touchmove', function(evt) {\r\n\t\t\tevt.eventName = 'touchmove';\r\n\t\t\treturn instance.touchMove(evt);\r\n\t\t},{ passive: false });\r\n\r\n\t\tdoc && (this.eventEvents['touchend'] = jmUtils.bindEvent(doc,'touchend', function(evt) {\r\n\t\t\tevt.eventName = 'touchend';\r\n\t\t\treturn instance.touchEnd(evt);\r\n\t\t},{ passive: false }));\r\n\r\n\t\tdoc && (this.eventEvents['touchcancel'] = jmUtils.bindEvent(doc,'touchcancel', function(evt) {\r\n\t\t\tevt.eventName = 'touchcancel';\r\n\t\t\treturn instance.touchCancel(evt);\r\n\t\t},{ passive: false }));\r\n\t}\r\n\r\n\t// 销毁所有事件\r\n\tdestory() {\r\n\t\tfor(let name in this.eventEvents) {\r\n\t\t\tconst event = this.eventEvents[name];\r\n\t\t\tif(!event || !event.fun) continue;\r\n\t\t\tjmUtils.removeEvent(event.target, name, event.fun);\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/**\r\n * 健盘事件处理对象，container 为事件主体，target为响应事件对象\r\n */\r\nclass jmKeyEvent {\r\n\tconstructor(instance, container,target) {\r\n\t\tthis.instance = instance;\r\n\t\tthis.container = container;\r\n\t\tthis.target = target || container;\r\n\r\n\t\tthis.eventEvents = {};// 所有绑定的事件\r\n\r\n\t\tthis.init(container, target);\r\n\t}\r\n\r\n\t/**\r\n\t * 初始化健盘事件\r\n\t */\r\n\tinit(container, target) {\r\n\t\tlet doc = typeof typeof document != 'undefined'?document:null;\r\n\t\t/**\r\n\t\t * 检查是否触发健盘事件至画布\r\n\t\t * 如果触发对象为输入框等对象则不响应事件\r\n\t\t *  \r\n\t\t */\r\n\t\tlet checkKeyEvent = (evt) => {\r\n\t\t\tlet target = evt.srcElement || evt.target;\r\n\t\t\tif(target && (target.tagName == 'INPUT' \r\n\t\t\t\t|| target.tagName == 'TEXTAREA'\r\n\t\t\t\t|| target.tagName == 'ANCHOR' \r\n\t\t\t\t|| target.tagName == 'FORM' \r\n\t\t\t\t|| target.tagName == 'FILE'\r\n\t\t\t\t|| target.tagName == 'IMG'\r\n\t\t\t\t|| target.tagName == 'HIDDEN'\r\n\t\t\t\t|| target.tagName == 'RADIO'\r\n\t\t\t\t|| target.tagName == 'TEXT'\t)) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tdoc && (this.eventEvents['keypress'] = jmUtils.bindEvent(doc,'keypress',function(evt) {\r\n\t\t\tevt = evt || window.event;\r\n\t\t\tif(!checkKeyEvent(evt)) return;//如果事件为其它输入框，则不响应\r\n\t\t\tlet r = container.raiseEvent('keypress',evt);\r\n\t\t\tif(r === false && evt.preventDefault) \r\n\t\t\t\tevt.preventDefault();\r\n\t\t\treturn r;\r\n\t\t}));\r\n\t\tdoc && (this.eventEvents['keydown'] = jmUtils.bindEvent(doc,'keydown',function(evt) {\r\n\t\t\tevt = evt || window.event;\r\n\t\t\tif(!checkKeyEvent(evt)) return;//如果事件为其它输入框，则不响应\r\n\t\t\tlet r = container.raiseEvent('keydown',evt);\r\n\t\t\tif(r === false && evt.preventDefault) \r\n\t\t\t\tevt.preventDefault();\r\n\t\t\treturn r;\r\n\t\t}));\r\n\t\tdoc && (this.eventEvents['keyup'] = jmUtils.bindEvent(doc,'keyup',function(evt) {\r\n\t\t\tevt = evt || window.event;\r\n\t\t\tif(!checkKeyEvent(evt)) return;//如果事件为其它输入框，则不响应\r\n\t\t\tlet r = container.raiseEvent('keyup',evt);\r\n\t\t\tif(r === false && evt.preventDefault) \r\n\t\t\t\tevt.preventDefault();\r\n\t\t\treturn r;\r\n\t\t}));\t\t\t\r\n\t}\r\n\r\n\t// 销毁所有事件\r\n\tdestory() {\r\n\t\tfor(let name in this.eventEvents) {\r\n\t\t\tconst event = this.eventEvents[name];\r\n\t\t\tif(!event || !event.fun) continue;\r\n\t\t\tjmUtils.removeEvent(event.target, name, event.fun);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport { jmEvents };\r\n","\r\nimport {jmUtils} from \"./jmUtils.js\";\r\nimport {jmList} from \"./jmList.js\";\r\nimport {jmGradient} from \"./jmGradient.js\";\r\nimport {jmShadow} from \"./jmShadow.js\";\r\nimport {jmProperty} from \"./jmProperty.js\";\r\n\r\n/**\r\n * 控件基础对象\r\n * 控件的基础属性和方法\r\n *\r\n * @class jmControl\r\n * @extends jmProperty\r\n */\t\r\nexport default class jmControl extends jmProperty {\t\r\n\r\n\tconstructor(params, t) {\r\n\t\tparams = params||{};\r\n\t\tsuper();\r\n\t\tthis.__pro('type', t || new.target.name);\r\n\t\tthis.style = params && params.style ? params.style : {};\r\n\t\t//this.position = params.position || {x:0,y:0};\r\n\t\tthis.width = params.width || 0;\r\n\t\tthis.height = params.height  || 0;\r\n\r\n\t\tif(params.position) {\r\n\t\t\tthis.position = params.position;\r\n\t\t}\r\n\r\n\t\tthis.graph = params.graph || null;\r\n\t\tthis.zIndex = params.zIndex || 0;\r\n\t\tthis.interactive = typeof params.interactive == 'undefined'? true : params.interactive;\r\n\r\n\t\t//样式名称，也当做白名单使用\t\t\r\n\t\tthis.jmStyleMap = {\r\n\t\t\t'fill':'fillStyle',\r\n\t\t\t'stroke':'strokeStyle',\r\n\t\t\t'shadow.blur':'shadowBlur',\r\n\t\t\t'shadow.x':'shadowOffsetX',\r\n\t\t\t'shadow.y':'shadowOffsetY',\r\n\t\t\t'shadow.color':'shadowColor',\r\n\t\t\t'lineWidth' : 'lineWidth',\r\n\t\t\t'miterLimit': 'miterLimit',\r\n\t\t\t'fillStyle' : 'fillStyle',\r\n\t\t\t'strokeStyle' : 'strokeStyle',\r\n\t\t\t'font' : 'font',\r\n\t\t\t'opacity' : 'globalAlpha',\r\n\t\t\t'textAlign' : 'textAlign',\r\n\t\t\t'textBaseline' : 'textBaseline',\r\n\t\t\t'shadowBlur' : 'shadowBlur',\r\n\t\t\t'shadowOffsetX' : 'shadowOffsetX',\r\n\t\t\t'shadowOffsetY' : 'shadowOffsetY',\r\n\t\t\t'shadowColor' : 'shadowColor',\r\n\t\t\t'lineJoin': 'lineJoin',//线交汇处的形状,miter(默认，尖角),bevel(斜角),round（圆角）\r\n\t\t\t'lineCap':'lineCap' //线条终端点,butt(默认，平),round(圆),square（方）\r\n\t\t};\r\n\r\n\t\tthis.initializing();\t\r\n\t\t\r\n\t\tthis.on = this.bind;\r\n\t\t\r\n\t\tthis.option = params;\r\n\t}\r\n\r\n\t//# region 定义属性\r\n\t/**\r\n\t * 当前对象类型名jmRect\r\n\t *\r\n\t * @property type\r\n\t * @type string\r\n\t */\r\n\tget type() {\r\n\t\treturn this.__pro('type');\r\n\t}\r\n\r\n\t/**\r\n\t * 当前canvas的context\r\n\t * @property context\r\n\t * @type {object}\r\n\t */\r\n\tget context() {\r\n\t\tlet s = this.__pro('context');\r\n\t\tif(s) return s;\r\n\t\telse if(this.is('jmGraph') && this.canvas) {\r\n\t\t\treturn this.context = this.canvas.getContext('2d');\r\n\t\t}\r\n\t\tlet g = this.graph;\r\n\t\tif(g) return g.context;\r\n\t\treturn g.canvas.getContext('2d');\r\n\t}\r\n\tset context(v) {\r\n\t\treturn this.__pro('context', v);\r\n\t}\r\n\r\n\t/**\r\n\t * 样式\r\n\t * @property style\r\n\t * @type {object}\r\n\t */\r\n\tget style() {\r\n\t\tlet s = this.__pro('style');\r\n\t\tif(!s) s = this.__pro('style', {});\r\n\t\treturn s;\r\n\t}\r\n\tset style(v) {\r\n\t\tthis.needUpdate = true;\r\n\t\treturn this.__pro('style', v);\r\n\t}\r\n\r\n\t/**\r\n\t * 当前控件是否可见\r\n\t * @property visible\r\n\t * @default true\r\n\t * @type {boolean}\r\n\t */\r\n\tget visible() {\r\n\t\tlet s = this.__pro('visible');\r\n\t\tif(typeof s == 'undefined') s = this.__pro('visible', true);\r\n\t\treturn s;\r\n\t}\r\n\tset visible(v) {\r\n\t\tthis.needUpdate = true;\r\n\t\treturn this.__pro('visible', v);\r\n\t}\t\r\n\r\n\t/**\r\n\t * 当前控件是否是交互式的，如果是则会响应鼠标或touch事件。\r\n\t * 如果false则不会主动响应，但冒泡的事件依然会得到回调\r\n\t * @property interactive\r\n\t * @default false\r\n\t * @type {boolean}\r\n\t */\r\n\tget interactive() {\r\n\t\tlet s = this.__pro('interactive');\r\n\t\treturn s;\r\n\t}\r\n\tset interactive(v) {\r\n\t\treturn this.__pro('interactive', v);\r\n\t}\r\n\t\t\r\n\t/**\r\n\t * 当前控件的子控件集合\r\n\t * @property children\r\n\t * @type {list}\r\n\t */\r\n\tget children() {\r\n\t\tlet s = this.__pro('children');\r\n\t\tif(!s) s = this.__pro('children', new jmList());\r\n\t\treturn s;\r\n\t}\r\n\tset children(v) {\r\n\t\tthis.needUpdate = true;\r\n\t\treturn this.__pro('children', v);\r\n\t}\r\n\r\n\t/**\r\n\t * 宽度\r\n\t * @property width\r\n\t * @type {number}\r\n\t */\r\n\tget width() {\r\n\t\tlet s = this.__pro('width');\r\n\t\tif(typeof s == 'undefined') s = this.__pro('width', 0);\r\n\t\treturn s;\r\n\t}\r\n\tset width(v) {\r\n\t\tthis.needUpdate = true;\r\n\t\treturn this.__pro('width', v);\r\n\t}\r\n\r\n\t/**\r\n\t * 高度\r\n\t * @property height\r\n\t * @type {number}\r\n\t */\r\n\tget height() {\r\n\t\tlet s = this.__pro('height');\r\n\t\tif(typeof s == 'undefined') s = this.__pro('height', 0);\r\n\t\treturn s;\r\n\t}\r\n\tset height(v) {\r\n\t\tthis.needUpdate = true;\r\n\t\treturn this.__pro('height', v);\r\n\t}\r\n\r\n\t/**\r\n\t * 控件层级关系，发生改变时，需要重新调整排序\r\n\t * @property zIndex\r\n\t * @type {number}\r\n\t */\r\n\tget zIndex() {\r\n\t\tlet s = this.__pro('zIndex');\r\n\t\tif(!s) s = this.__pro('zIndex', 0);\r\n\t\treturn s;\r\n\t}\r\n\tset zIndex(v) {\r\n\t\tthis.needUpdate = true;\r\n\t\tthis.__pro('zIndex', v);\r\n\t\tthis.children.sort();//层级发生改变，需要重新排序\r\n\t\tthis.needUpdate = true;\r\n\t\treturn v;\r\n\t}\r\n\r\n\t/**\r\n\t * 设置鼠标指针\r\n\t * css鼠标指针标识,例如:pointer,move等\r\n\t * \r\n\t * @property cursor\r\n\t * @type {string}\r\n\t */\r\n\tset cursor(cur) {\t\r\n\t\tvar graph = this.graph ;\r\n\t\tif(graph) {\t\t\r\n\t\t\tgraph.css('cursor',cur);\t\t\r\n\t\t}\r\n\t}\r\n\tget cursor() {\r\n\t\tvar graph = this.graph ;\r\n\t\tif(graph) {\t\t\r\n\t\t\treturn graph.css('cursor');\t\t\r\n\t\t}\r\n\t}\r\n\r\n\t//# end region\r\n\r\n\t/**\r\n\t * 初始化对象，设定样式，初始化子控件对象\r\n\t * 此方法为所有控件需调用的方法\r\n\t *\r\n\t * @method initializing\r\n\t * @for jmControl\r\n\t */\r\n\tinitializing() {\r\n\r\n\t\tconst self = this;\r\n\t\t//定义子元素集合\r\n\t\tthis.children = this.children || new jmList();\r\n\t\tconst oadd = this.children.add;\r\n\t\t//当把对象添加到当前控件中时，设定其父节点\r\n\t\tthis.children.add = function(obj) {\r\n\t\t\tif(typeof obj === 'object') {\r\n\t\t\t\tif(obj.parent && obj.parent != self && obj.parent.children) {\r\n\t\t\t\t\tobj.parent.children.remove(obj);//如果有父节点则从其父节点中移除\r\n\t\t\t\t}\r\n\t\t\t\tobj.parent = self;\r\n\t\t\t\t//如果存在先移除\r\n\t\t\t\tif(this.contain(obj)) {\r\n\t\t\t\t\tthis.oremove(obj);\r\n\t\t\t\t}\r\n\t\t\t\toadd.call(this, obj);\r\n\t\t\t\tobj.emit('add', obj);\r\n\r\n\t\t\t\tself.needUpdate = true;\r\n\t\t\t\tif(self.graph) obj.graph = self.graph;\r\n\t\t\t\tthis.sort();//先排序\r\n\t\t\t\t//self.emit('addChild', obj);\r\n\t\t\t\treturn obj;\r\n\t\t\t}\r\n\t\t};\r\n\t\tthis.children.oremove= this.children.remove;\r\n\t\t//当把对象从此控件中移除时，把其父节点置为空\r\n\t\tthis.children.remove = function(obj) {\r\n\t\t\tif(typeof obj === 'object') {\t\t\t\t\r\n\t\t\t\tobj.parent = null;\r\n\t\t\t\tobj.graph = null;\r\n\t\t\t\tobj.remove(true);\r\n\t\t\t\tthis.oremove(obj);\r\n\t\t\t\tself.needUpdate = true;\r\n\t\t\t\t//self.emit('removeChild', obj, index);\r\n\t\t\t}\r\n\t\t};\r\n\t\t/**\r\n\t\t * 根据控件zIndex排序，越大的越高\r\n\t\t */\r\n\t\t//const osort = this.children.sort;\r\n\t\tthis.children.sort = function() {\r\n\t\t\tconst levelItems = {};\r\n\t\t\t//提取zindex大于0的元素\r\n\t\t\t//为了保证0的层级不改变，只能把大于0的提出来。\r\n\t\t\tthis.each(function(i, obj) {\r\n\t\t\t\tif(!obj) return;\r\n\t\t\t\tlet zindex = obj.zIndex;\r\n\t\t\t\tif(!zindex && obj.style && obj.style.zIndex) {\r\n\t\t\t\t\tzindex = Number(obj.style.zIndex);\r\n\t\t\t\t\tif(isNaN(zindex)) zindex=obj.style.zIndex||0;\r\n\t\t\t\t}\r\n\t\t\t\tlet items = levelItems[zindex] || (levelItems[zindex] = []);\r\n\t\t\t\titems.push(obj);\r\n\t\t\t});\r\n\r\n\t\t\tthis.splice(0, this.length);\r\n\t\t\t\r\n\t\t\tfor(let index in levelItems) {\r\n\t\t\t\toadd.call(this, levelItems[index]);\r\n\t\t\t}\r\n\t\t\t/*\r\n\t\t\tosort.call(this, (c1, c2) => {\r\n\t\t\t\tlet zindex1 = c1.zIndex || c1.style.zIndex || 0;\r\n\t\t\t\tlet zindex2 = c2.zIndex || c2.style.zIndex || 0;\r\n\t\t\t\treturn zindex1 - zindex2;\r\n\t\t\t});*/\r\n\t\t}\r\n\t\tthis.children.clear = function() {\r\n\t\t\tthis.each(function(i,obj) {\r\n\t\t\t\tthis.remove(obj);\r\n\t\t\t},true);\r\n\t\t}\r\n\t\tthis.needUpdate = true;\r\n\t} \r\n\r\n\t/**\r\n\t * 设定样式到context\r\n\t * 处理样式映射，转换渐变和阴影对象为标准canvas属性\r\n\t * 样式一览\r\n\t\t| 简化名称 | 原生名称 | 说明\r\n\t\t| :- | :- | :- | \r\n\t\t| fill | fillStyle | 用于填充绘画的颜色、渐变或模式\r\n\t\t| stroke | strokeStyle | 用于笔触的颜色、渐变或模式\r\n\t\t| shadow | 没有对应的 | 最终会解析成以下几个属性，格式：'0,0,10,#fff'或g.createShadow(0,0,20,'#000');\r\n\t\t| shadow.blur | shadowBlur | 用于阴影的模糊级别\r\n\t\t| shadow.x | shadowOffsetX | 阴影距形状的水平距离\r\n\t\t| shadow.y | shadowOffsetY | 阴影距形状的垂直距离\r\n\t\t| shadow.color | shadowColor | 阴影颜色，格式：'#000'、'#46BF86'、'rgb(255,255,255)'或'rgba(39,72,188,0.5)'\r\n\t\t| lineWidth | lineWidth | 当前的线条宽度\r\n\t\t| miterLimit | miterLimit | 最大斜接长度\r\n\t\t| font | font | 请使用下面的 fontSize 和 fontFamily\r\n\t\t| fontSize | font | 字体大小\r\n\t\t| fontFamily | font | 字体\r\n\t\t| opacity | globalAlpha | 绘图的当前 alpha 或透明值\r\n\t\t| textAlign | textAlign | 文本内容的当前对齐方式\r\n\t\t| textBaseline | textBaseline | 在绘制文本时使用的当前文本基线\r\n\t\t| lineJoin | lineJoin | 两条线相交时，所创建的拐角类型：miter(默认，尖角),bevel(斜角),round（圆角）\r\n\t\t| lineCap | lineCap | 线条的结束端点样式：butt(默认，平),round(圆),square（方）\r\n\t * \r\n\t * @method setStyle\r\n\t * @for jmControl\r\n\t * @private\r\n\t * @param {style} style 样式对象，如:{fill:'black',stroke:'red'}\r\n\t */\r\n\tsetStyle(style) {\r\n\t\tstyle = style || jmUtils.clone(this.style, true);\r\n\t\tif(!style) return;\r\n\r\n\t\t// 当前根据屏幕放大倍数，如果有倍数，则需要对线宽等同比放大\r\n\t\tlet scale = this.graph.devicePixelRatio;\r\n\r\n\t\t/**\r\n\t\t * 样式设定\r\n\t\t * \r\n\t\t * @method __setStyle\r\n\t\t * @private\r\n\t\t * @param {jmControl} control 当前样式对应的控件对象\r\n\t\t * @param {style} style 样式\r\n\t\t * @param {string} name 样式名称\r\n\t\t * @param {string} mpkey 样式名称在映射中的key(例如：shadow.blur为模糊值)\r\n\t\t */\r\n\t\tlet __setStyle = (style, name, mpkey) => {\r\n\t\t\t//let styleValue = style[mpkey||name]||style;\r\n\t\t\tif(style) {\t\t\t\t\r\n\t\t\t\tif(typeof style === 'function') {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tstyle = style.call(this);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcatch(e) {\r\n\t\t\t\t\t\tconsole.warn(e);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tlet t = typeof style;\t\r\n\t\t\t\tlet mpname = this.jmStyleMap[mpkey || name];\r\n\r\n\t\t\t\t//如果为渐变对象\r\n\t\t\t\tif((style instanceof jmGradient) || (t == 'string' && style.indexOf('-gradient') > -1)) {\r\n\t\t\t\t\t//如果是渐变，则需要转换\r\n\t\t\t\t\tif(t == 'string' && style.indexOf('-gradient') > -1) {\r\n\t\t\t\t\t\tstyle = new jmGradient(style);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t__setStyle(style.toGradient(this), mpname||name);\t\r\n\t\t\t\t}\r\n\t\t\t\telse if(t == 'function') {\t\t\t\t\t\r\n\t\t\t\t\tif(mpname) {\r\n\t\t\t\t\t\tstyle = style.call(this, mpname);\r\n\t\t\t\t\t\tif(style) {\r\n\t\t\t\t\t\t\t__setStyle(style, mpname);\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse if(mpname) {\r\n\t\t\t\t\t//只有存在白名单中才处理\r\n\t\t\t\t\t//颜色转换\r\n\t\t\t\t\tif(t == 'string' && ['fillStyle', 'strokeStyle', 'shadowColor'].indexOf(mpname) > -1) {\r\n\t\t\t\t\t\tstyle = jmUtils.toColor(style);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// 按比例需要放大的样式\r\n\t\t\t\t\tif(scale && style) {\r\n\t\t\t\t\t\tswitch(mpname) {\r\n\t\t\t\t\t\t\tcase 'lineWidth': {\r\n\t\t\t\t\t\t\t\tstyle *= scale;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// 字体放大\r\n\t\t\t\t\t\t\tcase 'fontSize':\r\n\t\t\t\t\t\t\tcase 'font': {\r\n\t\t\t\t\t\t\t\tconst ms = style.toString().match(/[\\d\\.]+/);\r\n\t\t\t\t\t\t\t\tif(ms && ms.length) {\r\n\t\t\t\t\t\t\t\t\tconst size = Number(ms[0]) * scale;\r\n\t\t\t\t\t\t\t\t\tstyle = style.toString().replace(ms[0], size);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\t\t\t\t\t\r\n\t\t\t\t\tthis.context[mpname] = style;\r\n\t\t\t\t}\t\r\n\t\t\t\telse {\r\n\t\t\t\t\tswitch(name) {\r\n\t\t\t\t\t\t//阴影样式\r\n\t\t\t\t\t\tcase 'shadow' : {\r\n\t\t\t\t\t\t\tif(t == 'string') {\r\n\t\t\t\t\t\t\t\t__setStyle(new jmShadow(style), name);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tfor(let k in style) {\r\n\t\t\t\t\t\t\t\t__setStyle(style[k], k, name + '.' + k);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//平移\r\n\t\t\t\t\t\tcase 'translate' : {\r\n\t\t\t\t\t\t\tthis.context.translate(style.x,style.y);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//旋转\r\n\t\t\t\t\t\tcase 'rotation' : {\t\r\n\t\t\t\t\t\t\tif(!style.angle) break;\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t//旋 转先移位偏移量\r\n\t\t\t\t\t\t\tlet tranX = 0;\r\n\t\t\t\t\t\t\tlet tranY = 0;\r\n\t\t\t\t\t\t\t//旋转，则移位，如果有中心位则按中心旋转，否则按左上角旋转\r\n\t\t\t\t\t\t\t//这里只有style中的旋转才能生效，不然会导至子控件多次旋转\r\n\t\t\t\t\t\t\tif(style.point) {\r\n\t\t\t\t\t\t\t\tlet bounds = this.absoluteBounds?this.absoluteBounds:this.getAbsoluteBounds();\r\n\t\t\t\t\t\t\t\tstyle = this.getRotation(style);\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\ttranX = style.rotateX + bounds.left;\r\n\t\t\t\t\t\t\t\ttranY = style.rotateY + bounds.top;\t\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif(tranX!=0 || tranY != 0) this.context.translate(tranX,tranY);\r\n\t\t\t\t\t\t\tthis.context.rotate(style.angle);\r\n\t\t\t\t\t\t\tif(tranX!=0 || tranY != 0) this.context.translate(-tranX,-tranY);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcase 'transform' : {\r\n\t\t\t\t\t\t\tif(Array.isArray(style)) {\r\n\t\t\t\t\t\t\t\tthis.context.transform.apply(this.context, style);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse if(typeof style == 'object') {\r\n\t\t\t\t\t\t\t\tthis.context.transform(style.scaleX,//水平缩放\r\n\t\t\t\t\t\t\t\t\tstyle.skewX,//水平倾斜\r\n\t\t\t\t\t\t\t\t\tstyle.skewY,//垂直倾斜\r\n\t\t\t\t\t\t\t\t\tstyle.scaleY,//垂直缩放\r\n\t\t\t\t\t\t\t\t\tstyle.offsetX,//水平位移\r\n\t\t\t\t\t\t\t\t\tstyle.offsetY);//垂直位移\r\n\t\t\t\t\t\t\t}\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//鼠标指针\r\n\t\t\t\t\t\tcase 'cursor' : {\r\n\t\t\t\t\t\t\tthis.cursor = style;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\t\t\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\t\r\n\r\n\t\t//一些特殊属性要先设置，否则会导致顺序不对出现错误的效果\r\n\t\tif(this.translate) {\r\n\t\t\t__setStyle(this.translate, 'translate');\r\n\t\t}\r\n\t\tif(this.transform) {\r\n\t\t\t__setStyle(this.transform, 'transform');\r\n\t\t}\r\n\t\t//设置样式\r\n\t\tfor(let k in style) {\r\n\t\t\tif(k === 'constructor') continue;\r\n\t\t\tlet t = typeof style[k];\r\n\t\t\t//先处理部分样式，以免每次都需要初始化解析\r\n\t\t\tif(t == 'string' && style[k].indexOf('-gradient') > -1) {\r\n\t\t\t\tstyle[k] = new jmGradient(style[k]);\r\n\t\t\t}\r\n\t\t\telse if(t == 'string' && k == 'shadow') {\r\n\t\t\t\tstyle[k] = new jmShadow(style[k]);\r\n\t\t\t}\r\n\t\t\t__setStyle(style[k], k);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * 获取当前控件的边界\r\n\t * 通过分析控件的描点或位置加宽高得到为方形的边界\r\n\t *\r\n\t * @method getBounds\r\n\t * @for jmControl\r\n\t * @param {boolean} [isReset=false] 是否强制重新计算\r\n\t * @return {object} 控件的边界描述对象(left,top,right,bottom,width,height)\r\n\t */\r\n\tgetBounds(isReset) {\r\n\t\t//如果当次计算过，则不重复计算\r\n\t\tif(this.bounds && !isReset) return this.bounds;\r\n\r\n\t\tlet rect = {}; // left top\r\n\t\t//jmGraph，特殊处理\r\n\t\tif(this.type == 'jmGraph' && this.canvas) {\r\n\t\t\tif(typeof this.canvas.width === 'function') {\r\n\t\t\t\trect.right = this.canvas.width(); \r\n\t\t\t}\r\n\t\t\telse if(this.canvas.width) {\r\n\t\t\t\trect.right = this.canvas.width; \r\n\t\t\t}\r\n\t\t\telse if(this.width) {\r\n\t\t\t\trect.right = this.width;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(typeof this.canvas.height === 'function') {\r\n\t\t\t\trect.bottom = this.canvas.height(); \r\n\t\t\t}\r\n\t\t\telse if(this.canvas.height) {\r\n\t\t\t\trect.bottom = this.canvas.height; \r\n\t\t\t}\r\n\t\t\telse if(this.height) {\r\n\t\t\t\trect.bottom = this.height;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if(this.points && this.points.length > 0) {\t\t\r\n\t\t\tfor(let i in this.points) {\r\n\t\t\t\tlet p = this.points[i];\r\n\t\t\t\tif(typeof rect.left === 'undefined' || rect.left > p.x) {\r\n\t\t\t\t\trect.left = p.x;\r\n\t\t\t\t}\r\n\t\t\t\tif(typeof rect.top === 'undefined'  || rect.top > p.y) {\r\n\t\t\t\t\trect.top = p.y;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(typeof rect.right === 'undefined'  || rect.right < p.x) {\r\n\t\t\t\t\trect.right = p.x;\r\n\t\t\t\t}\r\n\t\t\t\tif(typeof rect.bottom === 'undefined' || rect.bottom < p.y) {\r\n\t\t\t\t\trect.bottom = p.y;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if(this.getLocation) {\r\n\t\t\tlet p = this.getLocation();\r\n\t\t\tif(p) {\r\n\t\t\t\trect.left = p.left;\r\n\t\t\t\trect.top = p.top;\r\n\t\t\t\trect.right = p.left + p.width;\r\n\t\t\t\trect.bottom = p.top + p.height;\r\n\t\t\t}\t\t\r\n\t\t}\r\n\t\tif(!rect.left) rect.left = 0; \r\n\t\tif(!rect.top) rect.top = 0; \r\n\t\tif(!rect.right) rect.right = 0; \r\n\t\tif(!rect.bottom) rect.bottom = 0; \r\n\t\trect.width = rect.right - rect.left;\r\n\t\trect.height = rect.bottom - rect.top;\r\n\t\treturn this.bounds=rect;\r\n\t}\r\n\r\n\t/**\r\n\t * 获取当前控件的位置相关参数\r\n\t * 解析百分比和margin参数\r\n\t *\r\n\t * @method getLocation\r\n\t * @return {object} 当前控件位置参数，包括中心点坐标，右上角坐标，宽高\r\n\t */\r\n\tgetLocation(clone=true) {\r\n\t\t//如果已经计算过则直接返回\r\n\t\t//在开画之前会清空此对象\r\n\t\t//if(reset !== true && this.location) return this.location;\r\n\r\n\t\tlet local = this.location = {left: 0,top: 0,width: 0,height: 0};\r\n\t\tlocal.position = typeof this.position == 'function'? this.position(): jmUtils.clone(this.position);\t\r\n\t\tlocal.center = this.center && typeof this.center === 'function'?this.center(): jmUtils.clone(this.center);//中心\r\n\t\tlocal.start = this.start && typeof this.start === 'function'?this.start(): jmUtils.clone(this.start);//起点\r\n\t\tlocal.end = this.end && typeof this.end === 'function'?this.end(): jmUtils.clone(this.end);//起点\r\n\t\tlocal.radius = this.radius;//半径\r\n\t\tlocal.width = this.width;\r\n\t\tlocal.height = this.height;\r\n\r\n\t\tlet margin = jmUtils.clone(this.style.margin, {});\r\n\t\tmargin.left = (margin.left || 0) * this.graph.devicePixelRatio;\r\n\t\tmargin.top = (margin.top || 0) * this.graph.devicePixelRatio;\r\n\t\tmargin.right = (margin.right || 0) * this.graph.devicePixelRatio;\r\n\t\tmargin.bottom = (margin.bottom || 0) * this.graph.devicePixelRatio;\r\n\t\t\r\n\t\t//如果没有指定位置，但指定了margin。则位置取margin偏移量\r\n\t\tif(local.position) {\r\n\t\t\tlocal.left = local.position.x;\r\n\t\t\tlocal.top = local.position.y;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tlocal.left = margin.left;\r\n\t\t\tlocal.top = margin.top;\r\n\t\t}\r\n\r\n\t\tif(!this.parent) return local;//没有父节点则直接返回\r\n\t\tlet parentBounds = this.parent.getBounds();\t\r\n\r\n\t\t//处理百分比参数\r\n\t\tif(jmUtils.checkPercent(local.left)) {\r\n\t\t\tlocal.left = jmUtils.percentToNumber(local.left) * parentBounds.width;\r\n\t\t}\r\n\t\tif(jmUtils.checkPercent(local.top)) {\r\n\t\t\tlocal.top = jmUtils.percentToNumber(local.top) * parentBounds.height;\r\n\t\t}\r\n\t\t\r\n\t\t//如果没有指定宽度或高度，则按百分之百计算其父宽度或高度\r\n\t\tif(jmUtils.checkPercent(local.width)) {\r\n\t\t\tlocal.width = jmUtils.percentToNumber(local.width) * parentBounds.width;\r\n\t\t}\r\n\t\tif(jmUtils.checkPercent(local.height)) {\r\n\t\t\tlocal.height = jmUtils.percentToNumber(local.height) * parentBounds.height;\r\n\t\t}\r\n\t\t//处理中心点\r\n\t\tif(local.center) {\r\n\t\t\t//处理百分比参数\r\n\t\t\tif(jmUtils.checkPercent(local.center.x)) {\r\n\t\t\t\tlocal.center.x = jmUtils.percentToNumber(local.center.x) * parentBounds.width;\r\n\t\t\t}\r\n\t\t\tif(jmUtils.checkPercent(local.center.y)) {\r\n\t\t\t\tlocal.center.y = jmUtils.percentToNumber(local.center.y) * parentBounds.height;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(local.radius) {\r\n\t\t\t//处理百分比参数\r\n\t\t\tif(jmUtils.checkPercent(local.radius)) {\r\n\t\t\t\tlocal.radius = jmUtils.percentToNumber(local.radius) * Math.min(parentBounds.width, parentBounds.height);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn local;\r\n\t}\r\n\r\n\t/**\r\n\t * 获取当前控制的旋转信息\r\n\t * @returns {object} 旋转中心和角度\r\n\t */\r\n\tgetRotation(rotation) {\r\n\t\trotation = rotation || this.style.rotation;\r\n\t\tif(!rotation) {\r\n\t\t\t//如果本身没有，则可以继承父级的\r\n\t\t\trotation = this.parent && this.parent.getRotation?this.parent.getRotation():null;\r\n\t\t\t//如果父级有旋转，则把坐标转换为当前控件区域\r\n\t\t\tif(rotation) {\r\n\t\t\t\tlet bounds = this.getBounds();\r\n\t\t\t\trotation.rotateX -= bounds.left;\r\n\t\t\t\trotation.rotateY -= bounds.top;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tlet bounds = this.getBounds();\r\n\t\t\trotation.rotateX = rotation.point.x;\r\n\t\t\tif(jmUtils.checkPercent(rotation.rotateX)) {\r\n\t\t\t\trotation.rotateX  = jmUtils.percentToNumber(rotation.rotateX) * bounds.width;\r\n\t\t\t}\r\n\r\n\t\t\trotation.rotateY = rotation.point.y;\r\n\t\t\tif(jmUtils.checkPercent(rotation.rotateY)) {\r\n\t\t\t\trotation.rotateY  = jmUtils.percentToNumber(rotation.rotateY) * bounds.height;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn rotation;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * 移除当前控件\r\n\t * 如果是VML元素，则调用其删除元素\r\n\t *\r\n\t * @method remove \r\n\t */\r\n\tremove() {\t\r\n\t\tif(this.parent) {\r\n\t\t\tthis.parent.children.remove(this);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * 对控件进行平移\r\n\t * 遍历控件所有描点或位置，设置其偏移量。\r\n\t *\r\n\t * @method offset\r\n\t * @param {number} x x轴偏移量\r\n\t * @param {number} y y轴偏移量\r\n\t * @param {boolean} [trans] 是否传递,监听者可以通过此属性是否决定是否响应移动事件,默认=true\r\n\t * @param {object} [evt] 如果是事件触发，则传递move事件参数\r\n\t */\r\n\toffset(x, y, trans, evt) {\r\n\t\ttrans = trans === false?false:true;\t\r\n\t\tlet local = this.getLocation(true);\t\t\r\n\t\tlet offseted = false;\r\n\t\t\r\n\t\tif(local.position) {\r\n\t\t\tlocal.left += x;\r\n\t\t\tlocal.top += y;\r\n\t\t\t// 由于local是clone出来的对象，为了保留位移，则要修改原属性\r\n\t\t\tthis.position.x = local.left;\r\n\t\t\tthis.position.y = local.top;\r\n\t\t\toffseted = true;\r\n\t\t}\r\n\r\n\t\tif(local.center) {\t\t\r\n\t\t\tthis.center.x = local.center.x + x;\r\n\t\t\tthis.center.y = local.center.y + y;\r\n\t\t\toffseted = true;\r\n\t\t}\r\n\r\n\t\tif(local.start && typeof local.start == 'object') {\t\r\n\t\t\tthis.start.x = local.start.x + x;\r\n\t\t\tthis.start.y = local.start.y + y;\r\n\t\t\toffseted = true;\r\n\t\t}\r\n\r\n\t\tif(local.end && typeof local.end == 'object') {\t\t\r\n\t\t\tthis.end.x = local.end.x + x;\r\n\t\t\tthis.end.y = local.end.y + y;\r\n\t\t\toffseted = true;\r\n\t\t}\r\n\r\n\r\n\t\tif(offseted == false && this.cpoints) {\r\n\t\t\tlet p = typeof this.cpoints == 'function'?this.cpoints:this.cpoints;\r\n\t\t\tif(p) {\t\t\t\r\n\t\t\t\tlet len = p.length;\r\n\t\t\t\tfor(let i=0; i < len;i++) {\r\n\t\t\t\t\tp[i].x += x;\r\n\t\t\t\t\tp[i].y += y;\r\n\t\t\t\t}\t\t\r\n\t\t\t\toffseted = true;\r\n\t\t\t}\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tif(offseted == false && this.points) {\r\n\t\t\tlet len = this.points.length;\r\n\t\t\tfor(let i=0; i < len;i++) {\r\n\t\t\t\tthis.points[i].x += x;\r\n\t\t\t\tthis.points[i].y += y;\r\n\t\t\t}\r\n\t\t\toffseted = true;\r\n\t\t}\r\n\t\t\r\n\t\t//触发控件移动事件\t\r\n\t\tthis.emit('move',{\r\n\t\t\toffsetX: x,\r\n\t\t\toffsetY: y,\r\n\t\t\ttrans: trans,\r\n\t\t\tevt: evt\r\n\t\t});\r\n\r\n\t\tthis.needUpdate = true;\r\n\t}\r\n\r\n\t/**\r\n\t * 把图形旋转一个角度\r\n\t * @param {number} angle 旋转角度\r\n\t * @param {object} point 旋转坐标，可以是百分比,例如：{x: '50%',y: '50%'}\r\n\t */\r\n\trotate(angle, point) {\t\r\n\t\t/*this.children.each(function(i,c){\r\n\t\t\tc.rotate(angle);\r\n\t\t});*/\r\n\t\tthis.style.rotation = {\r\n\t\t\tangle: angle,\r\n\t\t\tpoint: point\r\n\t\t};\r\n\r\n\t\tthis.needUpdate = true;\r\n\t}\r\n\r\n\t/**\r\n\t * 获取控件相对于画布的绝对边界，\r\n\t * 与getBounds不同的是：getBounds获取的是相对于父容器的边界.\r\n\t *\r\n\t * @method getAbsoluteBounds\r\n\t * @return {object} 边界对象(left,top,right,bottom,width,height)\r\n\t */\r\n\tgetAbsoluteBounds() {\r\n\t\t//当前控件的边界，\r\n\t\tlet rec = this.getBounds();\r\n\t\tif(this.parent && this.parent.absoluteBounds) {\r\n\t\t\t//父容器的绝对边界\r\n\t\t\tlet prec = this.parent.absoluteBounds || this.parent.getAbsoluteBounds();\r\n\t\t\t\r\n\t\t\treturn {\r\n\t\t\t\tleft : prec.left + rec.left,\r\n\t\t\t\ttop : prec.top + rec.top,\r\n\t\t\t\tright : prec.left + rec.right,\r\n\t\t\t\tbottom : prec.top + rec.bottom,\r\n\t\t\t\twidth : rec.width,\r\n\t\t\t\theight : rec.height\r\n\t\t\t};\r\n\t\t}\r\n\t\treturn rec;\r\n\t}\r\n\r\n\t/**\r\n\t * 画控件前初始化\r\n\t * 执行beginPath开始控件的绘制\r\n\t * \r\n\t * @method beginDraw\r\n\t */\r\n\tbeginDraw() {\t\r\n\t\tthis.getLocation(true);//重置位置信息\r\n\t\tthis.context.beginPath();\t\t\t\r\n\t}\r\n\r\n\t/**\r\n\t * 结束控件绘制\r\n\t *\r\n\t * @method endDraw\r\n\t */\r\n\tendDraw() {\r\n\t\t//如果当前为封闭路径\r\n\t\tif(this.style.close) {\r\n\t\t\tthis.context.closePath();\r\n\t\t}\r\n\t\t\r\n\t\tif(this.style['fill']) {\r\n\t\t\tthis.context.fill();\r\n\t\t}\r\n\t\tif(this.style['stroke'] || !this.style['fill']) {\r\n\t\t\tthis.context.stroke();\r\n\t\t}\r\n\r\n\t\tthis.needUpdate = false;\r\n\t}\r\n\r\n\t/**\r\n\t * 绘制控件\r\n\t * 在画布上描点\r\n\t * \r\n\t * @method draw\r\n\t */\r\n\tdraw() {\t\r\n\t\tif(this.points && this.points.length > 0) {\r\n\t\t\t//获取当前控件的绝对位置\r\n\t\t\tlet bounds = this.parent && this.parent.absoluteBounds?this.parent.absoluteBounds:this.absoluteBounds;\r\n\t\t\t\r\n\t\t\tthis.context.moveTo(this.points[0].x + bounds.left,this.points[0].y + bounds.top);\r\n\t\t\tlet len = this.points.length;\t\t\t\r\n\t\t\tfor(let i=1; i < len;i++) {\r\n\t\t\t\tlet p = this.points[i];\r\n\t\t\t\t//移至当前坐标\r\n\t\t\t\tif(p.m) {\r\n\t\t\t\t\tthis.context.moveTo(p.x + bounds.left,p.y + bounds.top);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tthis.context.lineTo(p.x+ bounds.left,p.y + bounds.top);\r\n\t\t\t\t}\t\t\t\r\n\t\t\t}\t\t\r\n\t\t}\t\r\n\t}\r\n\r\n\t/**\r\n\t * 绘制当前控件\r\n\t * 协调控件的绘制，先从其子控件开始绘制，再往上冒。\r\n\t *\r\n\t * @method paint\r\n\t */\r\n\tpaint(v) {\r\n\t\tif(v !== false && this.visible !== false) {\t\t\r\n\t\t\tif(this.initPoints) this.initPoints();\r\n\t\t\t//计算当前边界\r\n\t\t\tthis.bounds = null;\r\n\t\t\tthis.absoluteBounds = this.getAbsoluteBounds();\r\n\t\t\tlet needDraw = true;//是否需要绘制\r\n\t\t\tif(!this.is('jmGraph') && this.graph) {\r\n\t\t\t\tif(this.absoluteBounds.left >= this.graph.width) needDraw = false;\r\n\t\t\t\telse if(this.absoluteBounds.top >= this.graph.height) needDraw = false;\r\n\t\t\t\telse if(this.absoluteBounds.right <= 0) needDraw = false;\r\n\t\t\t\telse if(this.absoluteBounds.bottom <= 0) needDraw = false;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.context.save();\r\n\r\n\t\t\tthis.emit('beginDraw', this);\r\n\t\t\t\r\n\t\t\tthis.setStyle();//设定样式\r\n\r\n\t\t\tif(needDraw && this.beginDraw) this.beginDraw();\r\n\t\t\tif(needDraw && this.draw) this.draw();\t\r\n\t\t\tif(needDraw && this.endDraw) this.endDraw();\r\n\r\n\t\t\tif(this.children) {\r\n\t\t\t\tthis.children.each(function(i,item) {\r\n\t\t\t\t\tif(item && item.paint) item.paint();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tthis.emit('endDraw',this);\t\r\n\t\t\tthis.context.restore();\r\n\t\t\t\r\n\t\t\t//兼容小程序\r\n\t\t\tif(this.is('jmGraph') && this.context.draw) this.context.draw();\r\n\t\t\tthis.needUpdate = false;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * 获取指定事件的集合\r\n\t * 比如mousedown,mouseup等\r\n\t *\r\n\t * @method getEvent\r\n\t * @param {string} name 事件名称\r\n\t * @return {list} 事件委托的集合\r\n\t */\r\n\tgetEvent(name) {\t\t\r\n\t\treturn this.__events?this.__events[name]:null;\r\n\t}\r\n\r\n\t/**\r\n\t * 绑定控件的事件\r\n\t *\r\n\t * @method bind\r\n\t * @param {string} name 事件名称\r\n\t * @param {function} handle 事件委托\r\n\t */\r\n\tbind(name, handle) {\t\r\n\t\tif(name && name.indexOf(' ') > -1) {\r\n\t\t\tname = name.split(' ');\r\n\t\t\tfor(let n of name) {\r\n\t\t\t\tn && this.bind(n, handle);\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\t\r\n\t\t/**\r\n\t\t * 添加事件的集合\r\n\t\t *\r\n\t\t * @method _setEvent\r\n\t\t * @private\r\n\t\t */\r\n\t\tfunction _setEvent(name, events) {\r\n\t\t\tif(!this.__events) this.__events = {};\r\n\t\t\treturn this.__events[name] = events;\r\n\t\t}\r\n\t\tlet eventCollection = this.getEvent(name) || _setEvent.call(this, name, new jmList());\r\n\t\tif(!eventCollection.contain(handle)) {\r\n\t\t\teventCollection.add(handle);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * 移除控件的事件\r\n\t *\r\n\t * @method unbind \r\n\t * @param {string} name 事件名称\r\n\t * @param {function} handle 从控件中移除事件的委托\r\n\t */\r\n\tunbind(name, handle) {\t\r\n\t\tif(name && name.indexOf(' ') > -1) {\r\n\t\t\tname = name.split(' ');\r\n\t\t\tfor(let n of name) {\r\n\t\t\t\tn && this.unbind(n, handle);\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\t\r\n\t\tlet eventCollection = this.getEvent(name) ;\t\t\r\n\t\tif(eventCollection) {\r\n\t\t\tif(handle) eventCollection.remove(handle);\r\n\t\t\telse eventCollection.clear();\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * 执行监听回调\r\n\t * \r\n\t * @method emit\r\n\t * @for jmControl\r\n\t * @param {string} name 触发事件的名称\r\n\t * @param {array} args 事件参数数组\r\n\t */\r\n\temit(...args) {\t\t\t\r\n\t\tthis.runEventHandle(args[0], args.slice(1));\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/**\r\n\t * 独立执行事件委托\r\n\t *\r\n\t * @method runEventHandle\r\n\t * @param {string} 将执行的事件名称\r\n\t * @param {object} 事件执行的参数，包括触发事件的对象和位置\r\n\t */\r\n\trunEventHandle(name, args) {\r\n\t\tlet events = this.getEvent(name);\t\t\r\n\t\tif(events) {\r\n\t\t\tvar self = this;\r\n\t\t\tif(!Array.isArray(args)) args = [args];\t\r\n\t\t\tevents.each(function(i, handle) {\r\n\t\t\t\t//只要有一个事件被阻止，则不再处理同级事件，并设置冒泡被阻断\r\n\t\t\t\tif(false === handle.apply(self, args)) {\r\n\t\t\t\t\targs.cancel = true;\r\n\t\t\t\t}\r\n\t\t\t});\t\t\r\n\t\t}\t\r\n\t\treturn args.cancel;\r\n\t}\r\n\r\n\t/**\r\n\t * 检 查坐标是否落在当前控件区域中..true=在区域内\r\n\t *\r\n\t * @method checkPoint\r\n\t * @param {point} p 位置参数\r\n\t * @param {number} [pad] 可选参数，表示线条多远内都算在线上\r\n\t * @return {boolean} 当前位置如果在区域内则为true,否则为false。\r\n\t */\r\n\tcheckPoint(p, pad) {\r\n\t\t//jmGraph 需要判断dom位置\r\n\t\tif(this.type == 'jmGraph') {\r\n\t\t\t//获取dom位置\r\n\t\t\tlet position = this.getPosition();\r\n\t\t\t// 由于高清屏会有放大坐标，所以这里用pagex就只能用真实的canvas大小\r\n\t\t\tconst right = position.left + (this.canvas.clientWidth || this.canvas.offsetWidth || this.canvas.width);\r\n\t\t\tconst bottom = position.top + (this.canvas.clientHeight || this.canvas.offsetHeight || this.canvas.height);\r\n\t\t\tif(p.pageX > right || p.pageX < position.left) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tif(p.pageY > bottom || p.pageY < position.top) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\t\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\t\r\n\t\tlet bounds = this.getBounds();\t\r\n\t\tlet rotation = this.getRotation();//获取当前旋转参数\r\n\t\tlet ps = this.points;\r\n\t\t//如果不是路径组成，则采用边界做为顶点\r\n\t\tif(!ps || !ps.length) {\r\n\t\t\tps = [];\r\n\t\t\tps.push({x: bounds.left, y: bounds.top}); //左上角\r\n\t\t\tps.push({x: bounds.right, y: bounds.top});//右上角\r\n\t\t\tps.push({x: bounds.right, y: bounds.bottom});//右下角\r\n\t\t\tps.push({x: bounds.left, y: bounds.bottom}); //左下\r\n\t\t\tps.push({x: bounds.left, y: bounds.top}); //左上角   //闭合\r\n\t\t}\r\n\t\t//如果有指定padding 表示接受区域加宽，命中更易\r\n\t\tpad = Number(pad || this.style['touchPadding'] || this.style['lineWidth'] || 1);\r\n\t\tif(ps && ps.length) {\r\n\t\t\t\r\n\t\t\t//如果有旋转参数，则需要转换坐标再处理\r\n\t\t\tif(rotation && rotation.angle != 0) {\r\n\t\t\t\tps = jmUtils.clone(ps, true);//拷贝一份数据\r\n\t\t\t\t//rotateX ,rotateY 是相对当前控件的位置\r\n\t\t\t\tps = jmUtils.rotatePoints(ps, {\r\n\t\t\t\t\tx: rotation.rotateX + bounds.left,\r\n\t\t\t\t\ty: rotation.rotateY + bounds.top\r\n\t\t\t\t}, rotation.angle);\r\n\t\t\t}\r\n\t\t\t//如果当前路径不是实心的\r\n\t\t\t//就只用判断点是否在边上即可\t\r\n\t\t\tif(ps.length > 2 && (!this.style['fill'] || this.style['stroke'])) {\r\n\t\t\t\tlet i = 0;\r\n\t\t\t\tlet count = ps.length;\r\n\t\t\t\tfor(let j = i+1; j <= count; j = (++i + 1)) {\r\n\t\t\t\t\t//如果j超出最后一个\r\n\t\t\t\t\t//则当为封闭图形时跟第一点连线处理.否则直接返回false\r\n\t\t\t\t\tif(j == count) {\r\n\t\t\t\t\t\tif(this.style.close) {\r\n\t\t\t\t\t\t\tlet r = jmUtils.pointInPolygon(p,[ps[i],ps[0]], pad);\r\n\t\t\t\t\t\t\tif(r) return true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} \r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\t//判断是否在点i,j连成的线上\r\n\t\t\t\t\t\tlet s = jmUtils.pointInPolygon(p,[ps[i],ps[j]], pad);\r\n\t\t\t\t\t\tif(s) return true;\r\n\t\t\t\t\t}\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t//不是封闭的图形，则直接返回\r\n\t\t\t\tif(!this.style['fill']) return false;\r\n\t\t\t}\r\n\r\n\t\t\tlet r = jmUtils.pointInPolygon(p,ps, pad);\t\t\r\n\t\t\treturn r;\r\n\t\t}\r\n\r\n\t\tif(p.x > bounds.right || p.x < bounds.left) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif(p.y > bounds.bottom || p.y < bounds.top) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t\r\n\t\treturn true;\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * 触发控件事件，组合参数并按控件层级关系执行事件冒泡。\r\n\t *\r\n\t * @method raiseEvent\r\n\t * @param {string} name 事件名称\r\n\t * @param {object} args 事件执行参数\r\n\t * @return {boolean} 如果事件被组止冒泡则返回false,否则返回true\r\n\t */\r\n\traiseEvent(name, args) {\r\n\t\tif(this.visible === false) return ;//如果不显示则不响应事件\t\r\n\t\tif(!args.position) {\t\t\r\n\t\t\tconst graph = this.graph;\r\n\r\n\t\t\tconst srcElement = args.srcElement || args.target;\t\t\t\r\n\t\t\t\r\n\t\t\tconst position = jmUtils.getEventPosition(args, graph.scaleSize);//初始化事件位置\t\t\r\n\r\n\t\t\t// 如果有指定scale高清处理，需要对坐标处理\r\n\t\t\t// 因为是对canvas放大N倍，再把style指定为当前大小，所以坐标需要放大N    && srcElement === graph.canvas      \r\n\t\t\tif(graph.devicePixelRatio > 0) {\r\n\t\t\t\tposition.x = position.offsetX = position.x * graph.devicePixelRatio;\r\n\t\t\t\tposition.y = position.offsetY = position.y * graph.devicePixelRatio;\r\n\t\t\t}\r\n\t\t\r\n\t\t\targs = {\r\n\t\t\t\tposition: position,\r\n\t\t\t\tbutton: args.button == 0 || position.isTouch? 1: args.button,\r\n\t\t\t\tkeyCode: args.keyCode || args.charCode || args.which,\r\n\t\t\t\tctrlKey: args.ctrlKey,\r\n\t\t\t\tcancel : false,\r\n\t\t\t\tevent: args, // 原生事件\r\n\t\t\t\tsrcElement : srcElement\r\n\t\t\t};\t\t\r\n\t\t}\r\n\t\targs.path = args.path||[]; //事件冒泡路径\r\n\r\n\t\t//先执行子元素事件，如果事件没有被阻断，则向上冒泡\r\n\t\tlet stoped = false;\r\n\t\tif(this.children) {\r\n\t\t\tthis.children.each(function(j, el) {\r\n\t\t\t\t//未被阻止才执行\t\t\t\r\n\t\t\t\tif(args.cancel !== true) {\r\n\t\t\t\t\t//如果被阻止冒泡，\r\n\t\t\t\t\tstoped = el.raiseEvent(name, args) === false? true: stoped;\r\n\t\t\t\t\t// 不再响应其它元素\r\n\t\t\t\t\tif(stoped) return false;\r\n\t\t\t\t}\r\n\t\t\t}, true);//按逆序处理\r\n\t\t}\r\n\t\t// 如果已被阻止，不再响应上级事件\r\n\t\tif(stoped) return false;\r\n\t\t\r\n\t\t//获取当前对象的父元素绝对位置\r\n\t\t//生成当前坐标对应的父级元素的相对位置\r\n\t\tlet abounds = this.parent && this.parent.absoluteBounds?this.parent.absoluteBounds : this.absoluteBounds;\r\n\t\tif(!abounds) return false;\t\r\n\t\t//args = jmUtils.clone(args);//参数副本\r\n\t\targs.position.x = args.position.offsetX - abounds.left;\r\n\t\targs.position.y = args.position.offsetY - abounds.top;\r\n\r\n\t\t// 是否在当前控件内操作\r\n\t\tconst inpos = this.interactive !== false && this.checkPoint(args.position);\r\n\t\t\r\n\t\t//事件发生在边界内或健盘事件发生在画布中才触发\r\n\t\tif(inpos) {\r\n\t\t\t//如果没有指定触发对象，则认为当前为第一触发对象\r\n\t\t\tif(!args.target) {\r\n\t\t\t\targs.target = this;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.runEventAndPopEvent(name, args);\r\n\r\n\t\t\tif(!this.focused && (name === 'mousemove' || name === 'touchmove')) {\r\n\t\t\t\tthis.focused = true;//表明当前焦点在此控件中\r\n\t\t\t\tthis.raiseEvent(name === 'mousemove'? 'mouseover': 'touchover', args);\r\n\t\t\t}\t\r\n\t\t}\r\n\t\telse {\r\n\t\t\t//如果焦点不在，且原焦点在，则触发mouseleave事件\r\n\t\t\tif(this.interactive !== false && !inpos &&\r\n\t\t\t\tthis.focused && \r\n\t\t\t\t(name === 'mousemove' || name === 'touchmove')) {\r\n\r\n\t\t\t\tthis.focused = false;//表明当前焦点离开\r\n\t\t\t\tthis.runEventHandle(name === 'mousemove'? 'mouseleave' : 'touchleave', args);//执行事件\t\r\n\t\t\t}\t\r\n\t\t}\r\n\t\t\t\r\n\t\treturn args.cancel === false;//如果被阻止则返回false,否则返回true\r\n\t}\r\n\r\n\t/**\r\n\t * 执行事件，并进行冒泡\r\n\t * @param {string} name 事件名称 \r\n\t * @param {object} args 事件参数\r\n\t */\r\n\trunEventAndPopEvent(name, args) {\t\r\n\r\n\t\tif(args.cancel !== true) {\r\n\t\t\t// 添加到触发路径\r\n\t\t\targs.path.push(this);\r\n\r\n\t\t\t//如果返回true则阻断冒泡\r\n\t\t\tthis.runEventHandle(name, args);//执行事件\r\n\r\n\t\t\t// // 向父节点冒泡事件\t\t\r\n\t\t\t// if(args.cancel !== true && this.parent && this.parent.runEventAndPopEvent) {\r\n\t\t\t// \t// 相对位置需要改为父节点的\r\n\t\t\t// \tif(args.position) {\r\n\t\t\t// \t\tlet bounds = this.parent.getBounds();\r\n\t\t\t// \t\targs.position.x += bounds.left;\r\n\t\t\t// \t\targs.position.y += bounds.top;\r\n\t\t\t// \t}\r\n\t\t\t// \tthis.parent.runEventAndPopEvent(name, args);\r\n\t\t\t// }\t\t\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * 清空控件指定事件\r\n\t *\r\n\t * @method clearEvents\r\n\t * @param {string} name 需要清除的事件名称\r\n\t */\r\n\tclearEvents(name) {\r\n\t\tvar eventCollection = this.getEvent(name) ;\t\t\r\n\t\tif(eventCollection) {\r\n\t\t\teventCollection.clear;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * 查找其父级类型为type的元素，直到找到指定的对象或到最顶级控件后返回空。\r\n\t *\r\n\t * @method findParent \r\n\t * @param {object} 类型名称或类型对象\r\n\t * @return {object} 指定类型的实例\r\n\t */\r\n\tfindParent(type) {\r\n\t\t//如果为类型名称，则返回名称相同的类型对象\r\n\t\tif(typeof type === 'string') {\r\n\t\t\tif(this.type == type)\r\n\t\t\t\treturn this;\r\n\t\t}\r\n\t\telse if(this.is(type)) {\r\n\t\t\treturn this;\r\n\t\t}\r\n\t\tif(this.parent) {\r\n\t\t\treturn this.parent.findParent(type);\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\t/**\r\n\t * 设定是否可以移动\r\n\t * 此方法需指定jmgraph或在控件添加到jmgraph后再调用才能生效。\r\n\t *\r\n\t * @method canMove\r\n\t * @param {boolean} m true=可以移动，false=不可移动或清除移动。\r\n\t * @param {jmGraph} [graph] 当前画布，如果为空的话必需是已加入画布的控件，否则得指定画布。\r\n\t */\r\n\tcanMove(m, graph) {\r\n\t\tif(!this.__mvMonitor) {\r\n\t\t\t/**\r\n\t\t\t * 控制控件移动对象\r\n\t\t\t * \r\n\t\t\t * @property __mvMonitor\r\n\t\t\t * @private\r\n\t\t\t */\r\n\t\t\tthis.__mvMonitor = {};\r\n\t\t\tthis.__mvMonitor.mouseDown = false;\r\n\t\t\tthis.__mvMonitor.curposition={x:0,y:0};\r\n\t\t\tvar self = this;\r\n\t\t\t/**\r\n\t\t\t * 控件移动鼠标事件\r\n\t\t\t *\r\n\t\t\t * @method mv\r\n\t\t\t * @private\r\n\t\t\t */\r\n\t\t\tthis.__mvMonitor.mv = function(evt) {\r\n\t\t\t\tlet _this = self;\r\n\t\t\t\t//如果鼠标经过当前可移动控件，则显示可移动指针\r\n\t\t\t\t//if(evt.path && evt.path.indexOf(_this)>-1) {\r\n\t\t\t\t//\t_this.cursor('move');\t\r\n\t\t\t\t//}\r\n\r\n\t\t\t\tif(_this.__mvMonitor.mouseDown) {\r\n\t\t\t\t\t_this.parent.bounds = null;\r\n\t\t\t\t\tlet parentbounds = _this.parent.getAbsoluteBounds();\t\t\r\n\t\t\t\t\tlet offsetx = evt.position.offsetX - _this.__mvMonitor.curposition.x;\r\n\t\t\t\t\tlet offsety = evt.position.offsetY - _this.__mvMonitor.curposition.y;\t\t\t\t\r\n\t\t\t\t\t//console.log(offsetx + ',' + offsety);\r\n\t\t\t\t\t//如果锁定边界\r\n\t\t\t\t\tif(_this.lockSide) {\r\n\t\t\t\t\t\tlet thisbounds = _this.bounds || _this.getAbsoluteBounds();\t\t\t\t\t\r\n\t\t\t\t\t\t//检查边界出界\r\n\t\t\t\t\t\tlet outside = jmUtils.checkOutSide(parentbounds,thisbounds,{x:offsetx,y:offsety});\r\n\t\t\t\t\t\tif(outside.left < 0) {\r\n\t\t\t\t\t\t\tif(_this.lockSide.left) offsetx -= outside.left;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if(outside.right > 0) {\r\n\t\t\t\t\t\t\tif(_this.lockSide.right) offsetx -= outside.right;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(outside.top < 0) {\r\n\t\t\t\t\t\t\tif(_this.lockSide.top) offsety -= outside.top;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if(outside.bottom > 0) {\r\n\t\t\t\t\t\t\tif(_this.lockSide.bottom) offsety -= outside.bottom;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(offsetx || offsety) {\r\n\t\t\t\t\t\t_this.offset(offsetx, offsety, true, evt);\r\n\t\t\t\t\t\t_this.__mvMonitor.curposition.x = evt.position.offsetX;\r\n\t\t\t\t\t\t_this.__mvMonitor.curposition.y = evt.position.offsetY;\t\r\n\t\t\t\t\t\t//console.log(offsetx + '.' + offsety);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t/**\r\n\t\t\t * 控件移动鼠标松开事件\r\n\t\t\t *\r\n\t\t\t * @method mu\r\n\t\t\t * @private\r\n\t\t\t */\r\n\t\t\tthis.__mvMonitor.mu = function(evt) {\r\n\t\t\t\tlet _this = self;\r\n\t\t\t\tif(_this.__mvMonitor.mouseDown) {\r\n\t\t\t\t\t_this.__mvMonitor.mouseDown = false;\r\n\t\t\t\t\t//_this.cursor('default');\r\n\t\t\t\t\t_this.emit('moveend',{position:_this.__mvMonitor.curposition});\t\r\n\t\t\t\t\t//return false;\r\n\t\t\t\t}\t\t\t\r\n\t\t\t}\r\n\t\t\t/**\r\n\t\t\t * 控件移动鼠标离开事件\r\n\t\t\t *\r\n\t\t\t * @method ml\r\n\t\t\t * @private\r\n\t\t\t */\r\n\t\t\tthis.__mvMonitor.ml = function() {\r\n\t\t\t\tlet _this = self;\r\n\t\t\t\tif(_this.__mvMonitor.mouseDown) {\r\n\t\t\t\t\t_this.__mvMonitor.mouseDown = false;\r\n\t\t\t\t\t//_this.cursor('default');\t\r\n\t\t\t\t\t_this.emit('moveend',{position:_this.__mvMonitor.curposition});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\t\r\n\t\t\t}\r\n\t\t\t/**\r\n\t\t\t * 控件移动鼠标按下事件\r\n\t\t\t *\r\n\t\t\t * @method md\r\n\t\t\t * @private\r\n\t\t\t */\r\n\t\t\tthis.__mvMonitor.md = function(evt) {\r\n\t\t\t\t\r\n\t\t\t\tif(this.__mvMonitor.mouseDown) return;\r\n\t\t\t\tif(evt.button == 0 || evt.button == 1) {\r\n\t\t\t\t\tthis.__mvMonitor.mouseDown = true;\r\n\t\t\t\t\t//this.cursor('move');\r\n\t\t\t\t\t//var parentbounds = this.parent.absoluteBounds || this.parent.getAbsoluteBounds();\t\r\n\t\t\t\t\tthis.__mvMonitor.curposition.x = evt.position.offsetX;//evt.position.x + parentbounds.left;\r\n\t\t\t\t\tthis.__mvMonitor.curposition.y = evt.position.offsetY;//evt.position.y + parentbounds.top;\r\n\t\t\t\t\t//触发控件移动事件\r\n\t\t\t\t\tthis.emit('movestart',{position:this.__mvMonitor.curposition});\r\n\t\t\t\t\t\r\n\t\t\t\t\tevt.cancel = true;\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\t\t\t\r\n\t\t\t}\r\n\t\t}\r\n\t\tgraph = graph || this.graph ;//获取最顶级元素画布\r\n\t\t\r\n\t\tif(m !== false) {\t\t\t\r\n\t\t\tgraph.bind('mousemove',this.__mvMonitor.mv);\r\n\t\t\tgraph.bind('mouseup',this.__mvMonitor.mu);\r\n\t\t\tgraph.bind('mouseleave',this.__mvMonitor.ml);\r\n\t\t\tthis.bind('mousedown',this.__mvMonitor.md);\r\n\t\t\tgraph.bind('touchmove',this.__mvMonitor.mv);\r\n\t\t\tgraph.bind('touchend',this.__mvMonitor.mu);\r\n\t\t\tthis.bind('touchstart',this.__mvMonitor.md);\r\n\t\t}\r\n\t\telse {\t\t\t\r\n\t\t\tgraph.unbind('mousemove',this.__mvMonitor.mv);\r\n\t\t\tgraph.unbind('mouseup',this.__mvMonitor.mu);\r\n\t\t\tgraph.unbind('mouseleave',this.__mvMonitor.ml);\r\n\t\t\tthis.unbind('mousedown',this.__mvMonitor.md);\r\n\t\t\tgraph.unbind('touchmove',this.__mvMonitor.mv);\r\n\t\t\tgraph.unbind('touchend',this.__mvMonitor.mu);\r\n\t\t\tthis.unbind('touchstart',this.__mvMonitor.md);\t\r\n\t\t}\r\n\t\treturn this;\r\n\t}\r\n};\r\n\r\nexport { jmControl };","import {jmControl} from \"./jmControl.js\";\r\n/**\r\n * 基础路径,大部分图型的基类\r\n * 指定一系列点，画出图形\r\n *\r\n * @class jmPath\r\n * @extends jmControl\r\n * @param {object} params 路径参数 points=所有描点\r\n */\r\n\r\nexport default class jmPath extends jmControl {\t\r\n\r\n\tconstructor(params, t='jmPath') {\r\n\t\tsuper(params, t);\t\t\r\n\t\tthis.points = params && params.points ? params.points : [];\t\r\n\t\t\r\n\t}\r\n\t\r\n\t/**\r\n\t * 描点集合\r\n\t * point格式：{x:0,y:0,m:true}\r\n\t * @property points\r\n\t * @type {array}\r\n\t */\r\n\tget points() {\r\n\t\tlet s = this.__pro('points');\r\n\t\treturn s;\r\n\t}\r\n\tset points(v) {\r\n\t\tthis.needUpdate = true;\r\n\t\treturn this.__pro('points', v);\r\n\t}\r\n}\r\n\r\nexport { jmPath };\r\n","import {jmUtils} from \"./jmUtils.js\";\r\nimport {jmList} from \"./jmList.js\";\r\nimport {jmProperty} from './jmProperty.js';\r\nimport {jmShadow} from \"./jmShadow.js\";\r\nimport {jmGradient} from \"./jmGradient.js\";\r\nimport {jmEvents} from \"./jmEvents.js\";\r\nimport {jmControl} from \"./jmControl.js\";\r\nimport {jmPath} from \"./jmPath.js\";\r\n\r\n/**\r\n * jmGraph画图类库\r\n * 对canvas画图api进行二次封装，使其更易调用，省去很多重复的工作。\r\n *\r\n * @module jmGraph\r\n * @class jmGraph\r\n * @extends jmControl\r\n * @param {element} canvas 标签canvas\r\n * @param {object} option 参数：{width:宽,height:高}\r\n * @param {function} callback 初始化后的回调\r\n */\r\nexport default class jmGraph extends jmControl {\r\n\r\n\tconstructor(canvas, option, callback) {\r\n\t\tif(typeof option == 'function') {\r\n\t\t\tcallback = option;\r\n\t\t\toption = {};\r\n\t\t}\r\n\t\r\n\t\toption = option || {};\r\n\t\t\r\n\t\toption.interactive = true;\r\n\t\t\r\n\t\tsuper(option, 'jmGraph');\r\n\r\n\t\tthis.option = option || {};\r\n\t\t\r\n\t\tthis.devicePixelRatio = 1; // 根据屏幕的缩放倍数\r\n\r\n\t\t/**\r\n\t\t * 工具类\r\n\t\t * @property utils/util\r\n\t\t * @type {jmUtils}\r\n\t\t */\r\n\t\tthis.util = this.utils = jmUtils;\t\t\r\n\r\n\t\t//如果是小程序\r\n\t\tif(typeof wx != 'undefined' && wx.createCanvasContext) {\r\n\t\t\tthis.context = wx.createCanvasContext(canvas);\r\n\t\t\tcanvas = wx.createSelectorQuery().select('#' + canvas);\r\n\t\t\tthis.isWXMiniApp = true;// 微信小程序平台\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif(typeof canvas === 'string' && typeof document != 'undefined') {\r\n\t\t\t\tcanvas = document.getElementById(canvas);\r\n\t\t\t}\r\n\t\t\telse if(canvas.length) {\r\n\t\t\t\tcanvas = canvas[0];\r\n\t\t\t}\r\n\r\n\t\t\tif(canvas.tagName != 'CANVAS') {\r\n\t\t\t\tthis.container = canvas;\r\n\t\t\t\tlet cn = document.createElement('canvas');\r\n\t\t\t\tcanvas.appendChild(cn);\r\n\t\t\t\tcn.width = canvas.offsetWidth||canvas.clientWidth;\r\n\t\t\t\tcn.height = canvas.offsetHeight||canvas.clientHeight;\r\n\t\t\t\tcanvas = cn;\r\n\t\t\t}\t\r\n\t\t\telse {\r\n\t\t\t\tthis.container = canvas.parentElement;\r\n\t\t\t}\r\n\r\n\t\t\tthis.context = canvas.getContext('2d');\r\n\t\t}\r\n\t\tthis.canvas = canvas;\r\n\t\tthis.__init(callback);\r\n\t}\r\n\r\n\t/**\r\n\t * 初始化画布\r\n\t * @method init\r\n\t */\r\n\t__init(callback) {\r\n\t\t/**\r\n\t\t * 当前所有图形类型\r\n\t\t * @property shapes\r\n\t\t * @type {object}\r\n\t\t */\r\n\t\tthis.shapes = Object.assign({\r\n\t\t\t\"path\": jmPath,\r\n\t\t}, this.option.shapes);\r\n\t\t\r\n\t\t/**\r\n\t\t * 画控件前初始化\r\n\t\t * 为了解决一像素线条问题\r\n\t\t */\r\n\t\tthis.on('beginDraw', function() {\t\r\n\t\t\tthis.context.translate(0.5, 0.5);\r\n\t\t});\r\n\t\t/**\r\n\t\t * 结束控件绘制 为了解决一像素线条问题\r\n\t\t */\r\n\t\tthis.on('endDraw', function() {\t\r\n\t\t\tthis.context.translate(-0.5, -0.5);\t\t\r\n\t\t});\r\n\t\t\r\n\t\tif(this.option.width > 0) this.width = this.option.width;\r\n\t\tif(this.option.height > 0) this.height = this.option.height;\t\r\n\r\n\t\tthis.resize();\r\n\r\n\t\t//绑定事件\r\n\t\tthis.eventHandler = new jmEvents(this, this.canvas.canvas || this.canvas);\t\r\n\r\n\t\t//如果指定了自动刷新\r\n\t\tif(this.option.autoRefresh) {\r\n\t\t\tthis.autoRefresh();\r\n\t\t}\r\n\r\n\t\tif(callback) callback(this);\t\t\r\n\t}\r\n\r\n\t//  重置canvas大小，并判断高清屏，画图先放大二倍\r\n\tresize(w, h) {\r\n\r\n\t\tconst scale = typeof window != 'undefined' && window.devicePixelRatio > 1? window.devicePixelRatio : 1;\r\n\t\tif (scale > 1) {\r\n\t\t  this.__normalSize = this.__normalSize || { width: 0, height: 0};\r\n\t\t  w = w || this.__normalSize.width || this.width, h = h || this.__normalSize.height || this.height;\r\n\r\n\t\t  if(w) this.__normalSize.width = w;\r\n\t\t  if(h) this.__normalSize.height = h;\r\n\r\n\t\t  this.canvas.style.width = w + \"px\";\r\n\t\t  this.canvas.style.height = h + \"px\";\r\n\t\t  this.canvas.height = h * scale;\r\n\t\t  this.canvas.width = w *scale;\r\n\t\t  this.context.scale(scale, scale);\r\n\t\t  this.devicePixelRatio = scale;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * 内部坐标转为页面坐标，这里主要是有devicePixelRatio倍数问题\r\n\t * @param {x, y} point 内部坐标\r\n\t */\r\n\tpointToPixes(point) {\r\n\t\tif(this.devicePixelRatio && this.devicePixelRatio !== 1) {\r\n\t\t\tpoint = Object.assign({}, point, {\r\n\t\t\t\tx: point.x / this.devicePixelRatio,\r\n\t\t\t\ty: point.y / this.devicePixelRatio\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn point;\r\n\t}\r\n\r\n\t/**\r\n\t * 宽度\r\n\t * @property width\r\n\t * @type {number}\r\n\t */\r\n\tget width() {\r\n\t\tif(this.canvas) return this.canvas.width;\r\n\t\treturn 0;\r\n\t}\r\n\tset width(v) {\r\n\t\tthis.needUpdate = true;\r\n\t\tif(this.canvas) {\r\n\t\t\tthis.canvas.width = v;\t\r\n\t\t\tthis.resize(v);\r\n\t\t}\t\r\n\t\treturn v;\r\n\t}\r\n\r\n\t/**\r\n\t * 高度\r\n\t * @property height\r\n\t * @type {number}\r\n\t */\r\n\tget height() {\r\n\t\tif(this.canvas) return this.canvas.height;\r\n\t\treturn 0;\r\n\t}\r\n\tset height(v) {\r\n\t\tthis.needUpdate = true;\r\n\t\tif(this.canvas) {\r\n\t\t\tthis.canvas.height = v;\r\n\t\t\tthis.resize(0, v);\r\n\t\t}\r\n\t\treturn v;\r\n\t}\r\n\r\n\t/**\r\n\t * 创建jmGraph的静态对象\r\n\t *\r\n\t * @method create\r\n\t * @return {jmGraph} jmGraph实例对象\r\n\t */\r\n\tstatic create(...args) {\r\n\t\treturn new jmGraph(...args);\r\n\t}\r\n\r\n\t/**\r\n\t * 获取当前画布在浏览器中的绝对定位\r\n\t *\r\n\t * @method getPosition\r\n\t * @return {postion} 返回定位坐标\r\n\t */\r\n\tgetPosition() {\r\n\t\tlet p = jmUtils.getElementPosition(this.canvas.canvas || this.canvas);\r\n\t\tp.width = this.canvas.width;\r\n\t\tp.height = this.canvas.height;\r\n\t\tp.right = p.left + p.width;\r\n\t\tp.bottom = p.top + p.height;\r\n\t\treturn p;\r\n\t}\r\n\r\n\t/**\r\n\t * 注册图形类型,图形类型必需有统一的构造函数。参数为画布句柄和参数对象。\r\n\t *\r\n\t * @method registerShape \r\n\t * @param {string} name 控件图形名称\r\n\t * @param {class} shape 图形控件类型\r\n\t */\r\n\tregisterShape(name, shape) {\r\n\t\tthis.shapes[name] = shape;\r\n\t}\r\n\r\n\t/**\r\n\t * 从已注册的图形类创建图形\r\n\t * 简单直观创建对象\r\n\t *\r\n\t * @method createShape \r\n\t * @param {string} shape 注册控件的名称 也可以直接是控件类型\r\n\t * @param {object} args 实例化控件的参数\r\n\t * @return {object} 已实例化控件的对象\r\n\t */\r\n\tcreateShape(shape, args) {\r\n\t\tif(typeof shape === 'string') {\r\n\t\t\tshape = this.shapes[shape];\r\n\t\t}\r\n\t\tif(shape) {\r\n\t\t\tif(!args) args = {};\r\n\t\t\targs.graph = this;\r\n\t\t\tlet obj = new shape(args);\r\n\t\t\treturn obj;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * 生成阴影对象\r\n\t *\r\n\t * @method createShadow\r\n\t * @param {number} x x偏移量\r\n\t * @param {number} y y偏移量\r\n\t * @param {number} blur 模糊值\r\n\t * @param {string} color 颜色\r\n\t * @return {jmShadow} 阴影对象\r\n\t */\r\n\tcreateShadow(x, y, blur, color) {\r\n\t\tlet sh = new jmShadow(x, y, blur, color);\r\n\t\treturn sh;\r\n\t}\r\n\r\n\t/**\r\n\t * 生成线性渐变对象\r\n\t *\r\n\t * @method createLinearGradient\r\n\t * @param {number} x1 线性渐变起始点X坐标\r\n\t * @param {number} y1 线性渐变起始点Y坐标\r\n\t * @param {number} x2 线性渐变结束点X坐标\r\n\t * @param {number} y2 线性渐变结束点Y坐标\r\n\t * @return {jmGradient} 线性渐变对象\r\n\t */\r\n\tcreateLinearGradient(x1, y1, x2, y2) {\r\n\t\tlet gradient = new jmGradient({\r\n\t\t\ttype:'linear',\r\n\t\t\tx1: x1,\r\n\t\t\ty1: y1,\r\n\t\t\tx2: x2,\r\n\t\t\ty2: y2\r\n\t\t});\r\n\t\treturn gradient;\r\n\t}\r\n\r\n\t/**\r\n\t * 生成放射渐变对象\r\n\t *\r\n\t * @method createRadialGradient\r\n\t * @param {number} x1 放射渐变小圆中心X坐标\r\n\t * @param {number} y1 放射渐变小圆中心Y坐标\r\n\t * @param {number} r1 放射渐变小圆半径\r\n\t * @param {number} x2 放射渐变大圆中心X坐标\r\n\t * @param {number} y2 放射渐变大圆中心Y坐标\r\n\t * @param {number} r2 放射渐变大圆半径\r\n\t * @return {jmGradient} 放射渐变对象\r\n\t */\r\n\tcreateRadialGradient(x1, y1, r1, x2, y2, r2) {\t\r\n\t\tlet gradient = new jmGradient({\r\n\t\t\ttype:'radial',\r\n\t\t\tx1: x1,\r\n\t\t\ty1: y1,\r\n\t\t\tr1: r1,\r\n\t\t\tx2: x2,\r\n\t\t\ty2: y2,\r\n\t\t\tr2: r2\r\n\t\t});\r\n\t\treturn gradient;\r\n\t}\r\n\r\n\t/**\r\n\t * 重新刷新整个画板\r\n\t * 以加入动画事件触发延时10毫秒刷新，保存最尽的调用只刷新一次，加强性能的效果。\r\n\t *\r\n\t * @method refresh\r\n\t */\r\n\trefresh() {\t\r\n\t\t//加入动画，触发redraw，会导致多次refresh只redraw一次\r\n\t\t/*this.animate(function() {\r\n\t\t\treturn false;\r\n\t\t},100,'jmgraph_refresh');*/\r\n\t\tthis.redraw();\r\n\t}\r\n\r\n\t/**\r\n\t * 重新刷新整个画板\r\n\t * 此方法直接重画，与refresh效果类似\r\n\t *\r\n\t * @method redraw\r\n\t * @param {number} [w] 清除画布的宽度\r\n\t * @param {number} [h] 清除画布的高度\r\n\t */\r\n\tredraw(w, h) {\t\r\n\t\tthis.clear(w||this.width, h||this.height);\r\n\t\tthis.paint();\r\n\t}\r\n\r\n\t/**\r\n\t * 清除画布\r\n\t * \r\n\t * @method clear\r\n\t * @param {number} [w] 清除画布的宽度\r\n\t * @param {number} [h] 清除画布的高度\r\n\t */\r\n\tclear(w, h) {\r\n\t\t//this.canvas.width = this.canvas.width;\r\n\t\tif(w && h) {\r\n\t\t\t//this.zoomActual();//恢复比例缩放\r\n\t\t\tthis.canvas.width = w;\r\n\t\t\tthis.canvas.height = h;\r\n\t\t\t//保留原有缩放比例\r\n\t\t\tif(this.scaleSize) {\r\n\t\t\t\tif(this.context.scale) this.context.scale(this.scaleSize.x,this.scaleSize.y);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tw = this.canvas.width;\r\n\t\t\th = this.canvas.height;\r\n\t\t\tif(this.scaleSize) {\r\n\t\t\t\tw = w / this.scaleSize.x;\r\n\t\t\t\th = h / this.scaleSize.y;\r\n\t\t\t}\r\n\t\t}\r\n\t\t//如果有指定背景，则等到draw再全屏绘制一次，也同样达到清除画布的功能\r\n\t\tif(this.style && this.style.fill) {\r\n\t\t\tthis.points = [\r\n\t\t\t\t{x:0,y:0},\r\n\t\t\t\t{x:w,y:0},\r\n\t\t\t\t{x:w,y:h},\r\n\t\t\t\t{x:0,y:h}\r\n\t\t\t];\r\n\t\t}\r\n\t\telse if(this.context.clearRect) this.context.clearRect(0,0,w,h);\r\n\t}\r\n\r\n\t/**\r\n\t* 设置画布样式，此处只是设置其css样式\r\n\t*\r\n\t* @method css\r\n\t* @param {string} name 样式名\r\n\t* @param {string} value 样式值\r\n\t*/\r\n\tcss(name, value) {\r\n\t\tif(this.canvas && this.canvas.style) {\r\n\t\t\tif(typeof value != 'undefined') this.canvas.style[name] = value;\r\n\t\t\treturn this.canvas.style[name];\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * 生成路径对象\r\n\t *\r\n\t * @method createPath\r\n\t * @param {array} points 路径中的描点集合\r\n\t * @param {style} style 当前路径的样式\r\n\t * @return {jmPath} 路径对象jmPath\r\n\t */\r\n\tcreatePath(points, style) {\r\n\t\tlet path = this.createShape('path',{\r\n\t\t\tpoints: points,\r\n\t\t\tstyle: style\r\n\t\t});\r\n\t\treturn path;\r\n\t}\r\n\r\n\t/**\r\n\t * 生成直线\r\n\t * \r\n\t * @method createLine\r\n\t * @param {point} start 直线的起点\r\n\t * @param {point} end 直线的终点\r\n\t * @param {style} 直线的样式\r\n\t * @return {jmLine} 直线对象\r\n\t */\r\n\tcreateLine(start, end, style) {\r\n\t\tlet line = this.createShape('line', {\r\n\t\t\tstart: start,\r\n\t\t\tend: end,\r\n\t\t\tstyle: style\r\n\t\t});\r\n\t\treturn line;\r\n\t}\r\n\r\n\t/**\r\n\t * 缩小整个画布按比例0.9\r\n\t * \r\n\t * @method zoomOut\r\n\t */\r\n\tzoomOut() {\r\n\t\tthis.scale(0.9 ,0.9);\r\n\t}\r\n\r\n\t/**\r\n\t * 放大 每次增大0.1的比例\r\n\t * \r\n\t * @method zoomIn\r\n\t */\r\n\tzoomIn() {\t\t\r\n\t\tthis.scale(1.1 ,1.1);\r\n\t}\r\n\r\n\t/**\r\n\t * 大小复原\r\n\t * \r\n\t * @method zoomActual\r\n\t */\r\n\tzoomActual() {\r\n\t\tif(this.scaleSize) {\r\n\t\t\tthis.scale(1 / this.scaleSize.x ,1 / this.scaleSize.y);\t\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.scale(1 ,1);\t\r\n\t\t}\t\r\n\t}\r\n\r\n\t/**\r\n\t * 放大缩小画布\r\n\t * \r\n\t * @method scale\r\n\t * @param {number} dx 缩放X轴比例\r\n\t * @param {number} dy 缩放Y轴比例\r\n\t */\r\n\tscale(dx, dy) {\r\n\t\tif(!this.normalSize) {\r\n\t\t\tthis.normalSize = {\r\n\t\t\t\twidth: this.canvas.width,\r\n\t\t\t\theight: this.canvas.height\r\n\t\t\t};\t\t\r\n\t\t}\r\n\t\t\r\n\t\tthis.context.scale(dx,dy);\r\n\t\tif(!this.scaleSize) {\r\n\t\t\tthis.scaleSize = {x:dx,y:dy};\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.scaleSize = {x:dx * this.scaleSize.x, y:dy * this.scaleSize.y};\r\n\t\t}\r\n\t\tthis.refresh();\r\n\t}\r\n\r\n\t/**\r\n\t * 保存为base64图形数据\r\n\t * \r\n\t * @method toDataURL\r\n\t * @return {string} 当前画布图的base64字符串\r\n\t */\r\n\ttoDataURL() {\r\n\t\tlet data = this.canvas.toDataURL?this.canvas.toDataURL():'';\r\n\t\treturn data;\r\n\t}\r\n\r\n\t/** \r\n\t * 自动刷新画版\r\n\t * @param {function} callback 执行回调\r\n\t */\r\n\tautoRefresh(callback) {\r\n\t\tif(this.___isAutoRefreshing) return;\r\n\t\tconst self = this;\r\n\t\tthis.___isAutoRefreshing = true;\r\n\t\tlet requestAnimationFrameFun = null;\r\n\t\tif(typeof requestAnimationFrame === 'undefined') {\r\n\t\t\trequestAnimationFrameFun = (fun) => {\r\n\t\t\t\tif(this.__requestAnimationFrameFunHandler) clearTimeout(this.__requestAnimationFrameFunHandler);\r\n\t\t\t\tthis.__requestAnimationFrameFunHandler = setTimeout(fun, 20);\r\n\t\t\t};\r\n\t\t}\r\n\t\telse {\r\n\t\t\trequestAnimationFrameFun = requestAnimationFrame;\r\n\t\t}\r\n\t\tfunction update() {\r\n\t\t\tif(self.destoryed) {\r\n\t\t\t\tself.___isAutoRefreshing = false;\r\n\t\t\t\treturn;// 已销毁\r\n\t\t\t}\r\n\t\t\tif(self.needUpdate) self.redraw();\r\n\t\t\trequestAnimationFrameFun(update);\r\n\t\t\tif(callback) callback();\r\n\t\t}\r\n\t\trequestAnimationFrameFun(update);\r\n\t\treturn this;\r\n\t}\r\n\r\n\t// 销毁当前对象\r\n\tdestory() {\r\n\t\tthis.eventHandler.destory();\r\n\t\tthis.destoryed = true;// 标记已销毁\r\n\t}\r\n}\r\n\r\nexport { \r\n\tjmGraph, \r\n\tjmUtils,\r\n\tjmList,\r\n\tjmProperty,\r\n\tjmShadow,\r\n\tjmGradient,\r\n\tjmEvents,\r\n\tjmControl,\r\n\tjmPath,\r\n };\r\n"],"names":["jmList","Array","ps","arg","length","isArray","i","push","option","type","obj","this","includes","_typeof","removeAt","index","splice","removeHandler","call","find","cb","inverse","len","handler","count","jmUtils","source","target","deep","copyHandler","deepIndex","undefined","isType","dest","clone","slice","k","__proto__","name","fun","opt","indexOf","ns","split","bindEvent","attachEvent","addEventListener","removeEventListener","detachEvent","el","pos","offsetParent","top","offsetTop","left","offsetLeft","x","y","evt","scale","isTouch","touches","event","changedTouches","targetTouches","srcElement","px","pageX","clientX","document","documentElement","scrollLeft","body","py","pageY","clientY","scrollTop","ox","offsetX","oy","offsetY","p","getElementPosition","layerX","layerY","screenX","screenY","constructor","pt","polygon","offset","j","n","inside","redo","Math","abs","min","max","f","l","sqrt","_x","parentBounds","targetBounds","result","right","bottom","rp","r","cos","sin","x1","y1","c","sc","substring","trimStart","trimEnd","per","trim","tmp","checkPercent","h","v","toLowerCase","iv","floor","hex","color","a","substr","g","b","hexToNumber","toFixed","hexToRGBA","jmObject","graph","is","arguments","animateHandles","params","add","millisec","handle","self","dispatcher","setTimeout","_this","overduehandles","curTimes","Date","getTime","each","ani","times","apply","e","window","console","info","toString","remove","animate","PROPERTY_KEY","Symbol","jmProperty","pars","pros","value","args","oldValue","newValue","emit","__pro","needUpdate","findParent","jmShadow","blur","fromString","s","ms","match","test","jmGradient","stops","Number","control","gradient","context","bounds","absoluteBounds","getAbsoluteBounds","x2","y2","location","getLocation","d","radius","width","height","percentToNumber","sx1","sy1","sx2","sy2","createLinearGradient","r1","r2","createCircularGradient","createRadialGradient","toColor","addColorStop","par","spindex","lastIndexOf","isNaN","addStop","str","jmEvents","container","mouseHandler","jmMouseEvent","keyHandler","jmKeyEvent","eventName","raiseEvent","destory","instance","eventEvents","init","canvas","doc","preventDefault","touchStart","passive","touchMove","touchEnd","touchCancel","removeEvent","checkKeyEvent","tagName","jmControl","t","style","position","zIndex","interactive","jmStyleMap","initializing","on","_this2","bind","getContext","children","sort","css","cur","oadd","parent","contain","oremove","levelItems","zindex","clear","devicePixelRatio","__setStyle","mpkey","_this3","warn","mpname","toGradient","size","replace","translate","angle","tranX","tranY","point","getRotation","rotateX","rotateY","rotate","transform","scaleX","skewX","skewY","scaleY","cursor","isReset","rect","points","local","center","start","end","margin","getBounds","rotation","trans","offseted","cpoints","rec","prec","beginPath","close","closePath","fill","stroke","moveTo","m","lineTo","visible","initPoints","needDraw","save","setStyle","beginDraw","draw","endDraw","item","paint","restore","__events","eventCollection","getEvent","events","unbind","runEventHandle","cancel","pad","getPosition","clientWidth","offsetWidth","clientHeight","offsetHeight","rotatePoints","pointInPolygon","getEventPosition","scaleSize","button","keyCode","charCode","which","ctrlKey","path","stoped","abounds","inpos","checkPoint","runEventAndPopEvent","focused","__mvMonitor","mouseDown","curposition","mv","outside","parentbounds","offsetx","offsety","lockSide","thisbounds","checkOutSide","mu","ml","md","jmPath","jmGraph","callback","util","utils","wx","createCanvasContext","createSelectorQuery","select","isWXMiniApp","getElementById","cn","createElement","appendChild","parentElement","__init","shapes","Object","assign","resize","eventHandler","autoRefresh","w","__normalSize","shape","redraw","clearRect","createShape","dx","dy","normalSize","refresh","toDataURL","___isAutoRefreshing","requestAnimationFrameFun","requestAnimationFrame","__requestAnimationFrameFunHandler","clearTimeout","update","destoryed"],"mappings":"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"}